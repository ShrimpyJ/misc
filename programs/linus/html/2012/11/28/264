    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2012/11/15/369">First message in thread</a></li><li><a href="/lkml/2012/11/15/369">Zdenek Kabelac</a><ul><li class="origin"><a href="/lkml/2012/11/28/278">Linus Torvalds</a><ul><li><a href="/lkml/2012/11/28/278">Zdenek Kabelac</a><ul><li><a href="/lkml/2012/11/28/377">Linus Torvalds</a><ul><li><a href="/lkml/2012/11/28/356">Zdenek Kabelac</a></li><li><a href="/lkml/2012/11/28/411">Linus Torvalds</a></li><li><a href="/lkml/2012/11/28/469">"Rafael J. Wysocki"</a></li></ul></li><li><a href="/lkml/2012/11/28/385">"Rafael J. Wysocki"</a></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Wed, 28 Nov 2012 08:01:03 -0800</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: Acpi deadlocks with 3.7.0-rc4</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">Adding more people (and the acpi list) to this report.<br /><br />I'm seeing *very* few changes to the core suspend/resume path in 3.7,<br />and while there are some acpia updates, they seem to be pretty mild<br />too.<br /><br />I think the acpi_os_wait_semaphore thing is a red herring - that's<br />just stale on the stack.<br /><br />Do you have the register state from the oops? Or at least the "Code:"<br />line? It would be nice to see exactly where the oops happens, and I<br />cannot line up your "acpi_ns_lookup  + 0xa1/0x5b9" with any code due<br />to different compilers (and configurations etc).<br /><br />               Linus<br /><br /><br />On Thu, Nov 15, 2012 at 8:09 AM, Zdenek Kabelac &lt;zkabelac&#64;redhat.com&gt; wrote:<br />&gt; Hello<br />&gt;<br />&gt;<br />&gt; I've already seen twice this oops after resuming my Lenovo T61 in docking<br />&gt; station.<br />&gt;<br />&gt; Since for some reason currently the serial line doesn't work correctly after<br />&gt; resume<br />&gt; (while I'm pretty sure it used to work in past) here is at least<br />&gt; hand-written oops<br />&gt; message from mobile camera picture.<br />&gt;<br />&gt; From the trace it seem os_wait semaphore is accessed twice.<br />&gt; Unsure which device is behind it - but it seem docking station is need to<br />&gt; hit this issue.<br />&gt;<br />&gt;<br />&gt; kernel 3.7.0-rc4<br />&gt;<br />&gt; Pid:  pm-suspend<br />&gt;<br />&gt; RIP:   acpi_ns_lookup  + 0xa1/0x5b9<br />&gt;<br />&gt; Call Trace:<br />&gt;<br />&gt; ? acpi_os_wait_semaphore + 0x136/0x149<br />&gt; acpi_ns_get_mode + 0x96/0x102<br />&gt; ? __lock_is_held +0x5f/0x90<br />&gt; acpi_ns_evaluate +0x47/0x2de<br />&gt; ? _raw_spin_lock_irqsave<br />&gt; ? acpi_ut_evaluate_object<br />&gt; ? sub_preempt_count<br />&gt; ? pnpacpi_can_wakeup<br />&gt; acpi_rs_get_method_data<br />&gt; ? acpi_os_signal_semaphore<br />&gt; acpi_walk_resources<br />&gt; ? acpi_ut_release_mutex<br />&gt; pnpacpi_build_resource_template<br />&gt; ? acpi_bus_get_device<br />&gt; pnpacpi_set_resources<br />&gt; ? pnp_device_shutdown<br />&gt; pnp_start_dev<br />&gt; pnp_bus_resume<br />&gt; dpm_run_callback<br />&gt; device_resume<br />&gt; dpm_resume<br />&gt; dpm_resume_end<br />&gt; ? acpi_suspend_begin_old<br />&gt; suspend_devices_and_enter<br />&gt; pm_suspend<br />&gt; state_store<br />&gt; kobj_attr_store<br />&gt; sysfs_write_file<br />&gt; vgs_write<br />&gt; sys_write<br />&gt; system_call_fastpath<br />&gt;<br />&gt; Zdenek<br />&gt;<br />&gt;<br />&gt; PS: jpg on request<br />&gt; --<br />&gt; To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />&gt; the body of a message to majordomo&#64;vger.kernel.org<br />&gt; More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html">http://vger.kernel.org/majordomo-info.html</a><br />&gt; Please read the FAQ at  <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
