    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2012/10/18/61">First message in thread</a></li><li><a href="/lkml/2012/10/21/11">=?utf-8?B?UGF3ZcWC?= Sikora</a><ul><li><a href="/lkml/2012/10/21/25">Heinz Diehl</a></li><li><a href="/lkml/2012/10/21/49">Marcin Slusarz</a><ul><li><a href="/lkml/2012/10/21/70">Heinz Diehl</a></li><li class="origin"><a href="/lkml/2012/10/21/80">Linus Torvalds</a><ul><li><a href="/lkml/2012/10/21/80">Marcin Slusarz</a><ul><li><a href="/lkml/2012/10/21/105">Linus Torvalds</a></li><li><a href="/lkml/2012/10/21/146">Lekensteyn</a></li></ul></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Sun, 21 Oct 2012 07:38:58 -0700</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: Linux 3.7-rc1 (nouveau_bios_score oops).</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">On Sun, Oct 21, 2012 at 5:09 AM, Marcin Slusarz<br />&lt;marcin.slusarz&#64;gmail.com&gt; wrote:<br />&gt;<br />&gt; This looks like ACPI bug...<br /><br />I'm _shocked_ to hear that firmware would be fragile.<br /><br />Anyway, here's the #1 thing to keep in mind about firmware:<br /><br /> - firmware is *always* buggy.<br /><br />It's that simple. Don't expect anything else. Firmware is written by<br />people who have lost the will to live (why? Because they do firmware<br />development for a living), and the only thing keeping them going is<br />the drugs. And they're not the "fun" kind of drugs. The end result is<br />predictable. In their drug-induced haze, they make a mess.<br /><br />So saying "ACPI is buggy" is like saying "water is wet". Deal with it.<br /><br />&gt; Nouveau calls this method: [...]<br />&gt;<br />&gt; with Arg0 == 0, Arg1 == 3 and gets:<br />&gt;<br />&gt; ACPI Error: Field [ROMI] Base+Offset+Width 0+24+1 is beyond end of region [VROM] (length 24) (20120913/exfldio-210)<br />&gt; ACPI Error: Method parse/execution failed [\_SB_.PCI0.PEGR.GFX0._ROM] (Node ffff88033e47fe88), AE_AML_REGION_LIMIT (20120913/psparse-536)<br />&gt;<br />&gt; We can workaround it by aligning Arg1 to 4096 (I'm wondering what is the minimal<br />&gt; value), but do we really have to?<br /><br />Yes, you really have to. You need to understand that ACPI has been<br />tested with one thing, and one thing only: Windows. Clearly windows<br />doesn't ask for some three-byte region. So it doesn't work. Big<br />surprise. Untested code written by monkeys on crack - what did you<br />expect?<br /><br />So don't do "clever" things. When it comes to firmware, you need to<br />expect it to be buggy, and try to access it the way Windows accesses<br />it.<br /><br />Now, whether Windows realy always does things with a 4kB-aligned<br />access, or whether you just need to make sure that you're (say)<br />4-byte-aligned, I don't know. Maybe doing things four (or eight, or<br />sixteen) bytes at a time will work. You can try. But if we know from<br />past experience that a 4kB block-size will work, I'd suggest just<br />saying<br /><br />  "It's stupid, but stupid is good - we're working with firmware"<br /><br />Think of firmware the way you think of hardware: it's buggy and needs<br />workarounds.<br /><br />                Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
