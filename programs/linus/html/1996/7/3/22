    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/1996/7/2/18">First message in thread</a></li><li><a href="/lkml/1996/7/2/24">Linus Torvalds</a><ul><li><a href="/lkml/1996/7/2/59">Chris Evans</a><ul><li><a href="/lkml/1996/7/3/15">Lars Marowsky-Bree</a><ul><li><a href="/lkml/1996/7/3/61">Chris Evans</a></li></ul></li></ul></li><li><a href="/lkml/1996/7/2/83">"Leonard N. Zubkoff"</a><ul><li><a href="/lkml/1996/7/11/30">(Kai Henningsen)</a><ul><li><a href="/lkml/1996/7/13/2">"Jonathan H. Pickard"</a></li></ul></li><li class="origin"><a href="/lkml/1996/7/3/67">Linus Torvalds</a><ul><li><a href="/lkml/1996/7/3/67">"Leonard N. Zubkoff"</a></li></ul></li><li><a href="/lkml/1996/7/3/39">"mpoole"</a></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Wed, 3 Jul 1996 12:51:41 +0300 (EET DST)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: SCSI device numbering (was: Re: Ideas for v2.1</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Tue, 2 Jul 1996, Leonard N. Zubkoff wrote:<br />&gt; <br />&gt; *** PCI Host Adapters ***<br />&gt; <br />&gt; (Bus Type = PCI, bus, device, function, channel, target, lun, partition)<br />&gt; <br />&gt;     I believe the above 8-tuple is sufficient as a minor number for PCI for any<br />&gt;     SCSI device accessible via a PCI SCSI host adapter.  None of these elements<br />&gt;     are dependent on the number or type of installed PCI host adapters.  The<br />&gt;     bus and device are a property of the physical slot in which the host<br />&gt;     adapter is installed, together with the function and channel which are<br />&gt;     properties of the host adapter implementation.<br /><br />Two comments:<br /> - we don't want to be think too much about PCI. Locking ourselves to a <br />   specific bus architecture is just plain bad - there is no reason for <br />   it, as the BUS details shouldn't be seen to user mode anyway (it makes<br />   _some_ sense to show SCSI ID/LUN details, because that is something <br />   that the user at least can care about). <br /> - it's definitely WRONG to make a device number depend on the bus it's <br />   on. It's been done by others, but others have been plain stupid (or <br />   the target audience has been the setup where people religiously care <br />   about where they put their cards, which is definitely not true on PC's)<br /><br />The reason it's WRONG to make device numbers depend on the bus is that we <br />don't want the numbers for change for the _normal_ cases. And it's a lot <br />more frequent that people have just one SCSI adapter and move that around <br />(or exchange it for another) than people having multiple adapters and <br />moving those around.<br /><br />If you encode any bus information in the device number, then you're just <br />shooting yourself in the foot: if the card is moved (for example, the <br />user installs a sound card, and wants to move the other cards around to <br />make the ribbons fit better - I've done things like that many times) then <br />the major number changes.<br /><br />Similarly, if a user decides to upgrade to a faster SCSI card (upgrades <br />from a ISA card to a PCI card, for example), we do NOT want the setup to <br />change. So we do NOT want to have the device number depend on the bus.<br /><br />Or think of a portable: that's where you'd be a lot mroe likely to have <br />the SCSI controller move around. Maybe somebody some day makes a PCMCIA <br />SCSI card (or maybe they already exist?). Are you _really_ arguing for a <br />setup where the disk numbers change depending on which PCMCIA slot the <br />user has happened to use (or whether it's docked, perhaps).<br /><br />Now, under _some_ circumstances it would help to have the bus position <br />encoded in the number - for example if you add a new card and continue <br />using the old card. However, this is not "normal operations" on PC's. <br />People who do that kind of thing are people who can easily fix the setup <br />anyway - they are most likely administering a server machine.<br /><br />Now, I suggest we _also_ do a dynamic filesystem name mapping (so that you<br />can have a fixed name even if you move a disk from one controller to<br />another), but that would be a user-level issue and it's a "secondary" way to<br />view the system (it simply cannot be the primary way, because it _cannot_ be<br />made to work in all circumstances - two identical disks simply cannot be<br />distinguished from each other in such a way that you could move them around<br />and let the kernel notice).<br /><br />		Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
