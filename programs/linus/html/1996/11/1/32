    </div></td><td width="32"> </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/1996/10/29/24">First message in thread</a></li><li><a href="/lkml/1996/10/29/24">Linus Torvalds</a><ul><li class="origin"><a href="/lkml/1996/11/1/35">Linus Torvalds</a><ul><li><a href="/lkml/1996/11/1/35">"Brian E. Gallew"</a></li><li><a href="/lkml/1996/11/2/32">(Harald Koenig)</a><ul><li><a href="/lkml/1996/11/2/52">Alain Knaff</a><ul><li><a href="/lkml/1996/11/3/51">(John Henders)</a></li><li><a href="/lkml/1996/11/3/52">Matti Aarnio</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/1996/10/29/59">Linus Torvalds</a><ul><li><a href="/lkml/1996/11/3/22">Jeremy Hansen</a></li><li><a href="/lkml/1996/10/29/60">Greg Patterson</a><ul><li><a href="/lkml/1996/10/29/61">Tam Ho</a></li><li><a href="/lkml/1996/10/31/9">(Mike Bristow)</a></li></ul></li><li><a href="/lkml/1996/10/30/3">David Dyck</a><ul><li><a href="/lkml/1996/10/30/20">"William E. Roadcap"</a><ul><li><a href="/lkml/1996/10/30/24">David Dyck</a></li><li><a href="/lkml/1996/10/30/30">"Theodore Y. Ts'o"</a></li><li><a href="/lkml/1996/10/30/69">(John Henders)</a></li></ul></li></ul></li><li><a href="/lkml/1996/10/30/14">Louis Mandelstam</a><ul><li><a href="/lkml/1996/10/30/18">Kai Schulte</a></li><li><a href="/lkml/1996/10/31/1">babydr</a></li></ul></li><li><a href="/lkml/1996/10/30/37">"Scott D. Webster"</a></li><li><a href="/lkml/1996/10/31/2">Charlie Ross</a></li><li><a href="/lkml/1996/10/31/6">Agus Budy Wuysang</a><ul><li><a href="/lkml/1996/11/1/19">Bradley Ward Allen</a></li></ul></li><li><a href="/lkml/1996/10/31/20">(Thierry Godefroy)</a></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Fri, 1 Nov 1996 16:59:53 +0200 (EET)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Linux-2.1.7</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />Ok, 2.1.7 is out there in ftp-land, and has the new clever exception handling<br />implementation done by Richard Henderson for both x86 and alpha (I think the<br />idea was originally Ingo Molnars, but I could be mistaken, and Richard<br />certainly took it to new heights of elegance). Anyway, the new stuff uses<br />some clever linker tricks to essentially do zero-cost exception handling<br />rather than having to waste precious instructions to update the per-task<br />exception structure. Very nifty indeed. <br /><br />The interface is still exactly the same, only some low-level architecture-<br />specific implementation details changed. It's all so clever that it's scary. <br />People interested in low-level scary stuff should take a look at the<br />uaccess.h files for x86 or alpha, and be ready to spend some time just<br />figuring out what it all does ;)<br /><br />Anyway, the new exceptions do have a down-side: the exception tables do not<br />currently get exported from kernel loadable modules. This is not something<br />fundamentally hard: it's just something that needs to be handled by the<br />insmod &amp;co people, and which hasn't been done yet. Anybody who feels he can<br />be useful in making insmod talk to the kernel about the exception tables<br />(Björn? Jacques?), please contact Richard &lt;rth&#64;tamu.edu&gt; about this. <br /><br />Note that the lack of exception data in modules does _not_ mean that modules<br />don't work. It only means that modules can't handle user space address<br />exceptions, and thus can't recover gracefully from EFAULT errors. As such you<br />can still load and use the modules (assuming you have the other 2.1.x fixes<br />for insmod module loading), but I'd suggest against it on any system with<br />untrusted users that you expect to do nasty things just for fun. <br /><br />Apart from the new clever exceptions, the other changes in 2.1.7 are:<br /> - baycom driver is a real network driver instead of a strange character <br />   driver.<br /> - soundmodem driver. You don't want to know what perversions people are <br />   up to ;)  (If you _do_ want to know, read the docs)<br /> - various drivers which had boo-boo's with the new exception code fixed <br />   up (ie ftape/md/cdrom/eql should work again)<br /> - isdn silly problems should be fixed<br /> - scc driver update<br /> - tulip driver multicast lists<br /> - aha1740 should work again (virtual/physical address probs on x86, <br />   funnily it worked on alpha)<br /> - quota unmount bug should be fixed in 2.1.x too<br /><br />Anyway, I finally think the exception stuff is starting to be stable (apart<br />from the issues on module loading), and I think I'll try to start integrating<br />some of the other patches in the next few weeks. So expect to start seeing<br />ipv6/PPC/Sparc/m68k/ARM etc patches any week now (and my apologies to the<br />developers of those things for being slow to react - you're all in my queue<br />of things to handle, I've just been slow to get everything else cleared up). <br /><br />		Linus<br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
