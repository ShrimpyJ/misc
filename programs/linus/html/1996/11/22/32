    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/1996/11/21/64">First message in thread</a></li><li><a href="/lkml/1996/11/22/25">Linus Torvalds</a><ul><li><a href="/lkml/1996/11/22/35"> ron&#64;caldera ...</a></li><li><a href="/lkml/1996/11/22/38">(Erik B. Andersen)</a><ul><li class="origin"><a href="/lkml/1996/11/22/45">Linus Torvalds</a><ul><li><a href="/lkml/1996/11/22/45">Keith Rohrer</a></li><li><a href="/lkml/1996/11/22/53">(Philippe Strauss)</a></li></ul></li></ul></li><li><a href="/lkml/1996/11/23/38">Chris Chiappa</a></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Fri, 22 Nov 1996 21:09:44 +0200 (EET)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: Reverse the ucdrom.h patch in 2.1.12</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br /><br />On Fri, 22 Nov 1996, Erik B. Andersen wrote:<br />&gt; <br />&gt; In patch-2.1.12, linux/include/linux/ucdrom.h was changed based on the<br />&gt; posting of Gerd Knorr to linux-kernel.  I subsequently pointed out that<br />&gt; this is the WrongWay(tm) to fix the problem, as this very issue was<br />&gt; discussed some time ago in private email.  The values for speed and<br />&gt; capacity SHOULD be declared const, as these values should not be messed<br />&gt; with by anything.  However, since these values must be set on drive<br />&gt; initialization, and the method utilized in ide-cd to avoid the compilation<br />&gt; warnings works just fine.<br /><br />Hmm.. Personally, I consider pointer casts a bug by default, which was why<br />I applied the non-cast version instead.<br /><br />If pointer casts are needed, I'd much prefer them done through another<br />interface, one such being for example:<br /><br />	initialize_cdrom(capacity,speed);<br /><br />with initialize_cdrom() being a inline function or whatever that then does<br />the casting.<br /><br />The _reason_ I consider pointer casts a bug is that they mess with the C<br />type checking. "What type checking?" I hear you say.. But in fact C type<br />checking is very practical if done correctly, and one reason I use "-Wall" <br />with gcc for everything I write. If the stuff is ever changed (to use<br />"long" for example), the code that uses casts will never result in a<br />compiler warning, yet it will be hopelessly incorrect unless fixed. <br /><br />Now, a inline function that does the same cast results in the same _code_,<br />but then the cast is hidden in one place (and if the inline function is<br />placed near enough the definition of the types, anybody who changes the<br />type is likely to change the inline function to mess with the type as<br />well).<br /><br />If you think I'm looking for something like objects but without the<br />overhead of a object-oriented language, you're getting pretty close.<br /><br />Thought of the day:  "Any interface that _requires_ the programmer to use<br />a cast is a bad interface".<br /><br />Anybody want to send me patches?<br /><br />		Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
