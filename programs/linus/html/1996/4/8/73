    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/1996/3/30/38">First message in thread</a></li><li><a href="/lkml/1996/4/8/31">Linus Torvalds</a><ul><li><a href="/lkml/1996/4/9/109">(Ioannis Schoinas)</a><ul><li><a href="/lkml/1996/4/10/32">"Mark E. Levitt"</a></li></ul></li><li><a href="/lkml/1996/4/8/38">Matti E Aarnio</a><ul><li><a href="/lkml/1996/4/8/51">Gerard Roudier</a></li><li class="origin"><a href="/lkml/1996/4/9/112">Linus Torvalds</a><ul><li><a href="/lkml/1996/4/9/112">Gerard Roudier</a><ul><li><a href="/lkml/1996/4/10/1">"Leonard N. Zubkoff"</a></li></ul></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Tue, 9 Apr 1996 07:04:30 +0300 (EET DST)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: File read-ahead and Linux-1.3.85</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Mon, 8 Apr 1996, Matti E Aarnio wrote:<br />&gt; <br />&gt; &gt; Linux-1.3.85 also does<br />&gt; ....<br />&gt; &gt;  - file read-ahead code update<br />&gt; <br />&gt;   This should have speeded up the system, right ?<br />&gt; (Such claim was made by the author of that patch..)<br /><br />Actually, the patch in 1.3.85 is not the same patch that was on the <br />kernel mailing list earlier. That patch probably improved performance <br />more, but I didn't like how it was done.<br /><br />The 1.3.85 read-ahead changes are more of a update to how we do it than a <br />performance improvement. It should improve performance slightly, but it's <br />really a case of building the foundations for future improvements rather <br />than being a huge improvement in itself.<br /><br />(The asynchronous read-ahead that the kernel mailing list patch added is <br />not really done in 1.3.85 - the code is there, but it doesn't really do <br />any real async read-ahead yet in normal circumstances).<br /><br />&gt;               -Per Char- --Block--- -Rewrite-- -Per Char- --Block--- --Seeks---<br />&gt; Machine    MB K/sec %CPU K/sec %CPU K/sec %CPU K/sec %CPU K/sec %CPU  /sec %CPU<br />&gt; Lnx1380   100  3221 60.4  2973 19.9  1150 13.9  2300 44.1  2844 12.9  45.9  2.3<br />&gt; Lnx1384   180  2395 43.4  2714 17.2  1339 16.7  2519 47.2  3253 14.6  69.2  2.9<br />&gt; Lnx1385   180  2520 44.9  3204 19.8  1258 16.1  2721 56.6  3220 16.0  70.1  3.0<br />&gt; <br />&gt; This machine is a 266 MHz Alpha-XL with integrated NCR 53C810, and<br />&gt; Seagate ST31230N SCSI-disk.   At the last two tests the system had<br />&gt; 128 MB memory, while with the first one there was propably 32 MB memory.<br />&gt; <br />&gt; My point, either we are limited by the disk, or perhaps the NCR-driver<br />&gt; is not as good as it could be...  The read-ahead does not help noticeably.<br /><br />I suspect it's pretty close to be limited by the disk. Getting 3.2MB/s <br />sustained is very reasonable, although it's hard to tell (I have no idea <br />what the ST31230N is supposed to be able to deliver).<br /><br />I don't think it's much of a driver issue: bonnie really tests the other <br />things more (tagged queueing etc features should not matter for bonnie, <br />we should be doing just "simple" requests most of the time).  The queuing <br />code and buffer cache shows up much more, assuming the driver is at least <br />reasonable.<br /><br />		Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
