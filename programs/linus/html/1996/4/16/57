    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/1996/4/15/105">First message in thread</a></li><li><a href="/lkml/1996/4/15/105">(really )</a><ul><li class="origin"><a href="/lkml/1996/4/20/2">Linus Torvalds</a><ul><li><a href="/lkml/1996/4/20/2">(Gideon Glass)</a><ul><li><a href="/lkml/1996/4/20/6">Linus Torvalds</a></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Tue, 16 Apr 1996 09:42:43 +0300 (EET DST)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: Unices are created equal, but ...</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On 15 Apr 1996, really kuznet&#64;ms2.inr.ac.ru wrote:<br />&gt; <br />&gt; Linux really has POOR swapping code, and kswap improved<br />&gt; it insignificantly. This opinion is result of every day experience<br />&gt; rather than benchmarks. I have Pentium 133 64Mb AIC7881 and run program<br />&gt; that eats &gt;=128Mb of virtual memory (certainly, matrices).<br />&gt; It sweaps through these matrices with period ~20min.<br /><br />Agreed. This is one case where linux doesn't do anything clever at all, <br />and one place where we should probably do some work. It happens for a lot <br />of scientific calculations.<br /><br />The linux swapping code is really written for a more "interactive" load, <br />with that kind of access patterns. For that kind of load we do ok, it's <br />only a "special case" that we break on (admittedly it's a not-too-unusual <br />special case and one we should know about).<br /><br />Older unixes usually take the other approach: they try to handle <br />exactly the kind of access pattern you use, because that used to be one <br />of the "normal" cases (when machines were mostly used for scientific <br />calculations with working sets &gt;&gt; main memory and very predictable access <br />patterns).<br /><br />Essentially, linux currently does a "interactive workstation" kind of <br />approach to swapping, where accesses are more or less random. There it <br />makes sense to use a global LRU-based swap-out algorithm.<br /><br />With one large process that does sweeps over an array, LRU is just about <br />pessimal. <br /><br />We should probably modify the LRU algorithm to take RSS into account (and <br />possibly access patterns, although that is harder to do). However, to be <br />quite honest, my personal priority is not that kind of behaviour, so it <br />would be up to somebody else to implement this.. (hint hint)<br /><br />		Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
