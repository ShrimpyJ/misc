    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/1996/4/9/53">First message in thread</a></li><li><a href="/lkml/1996/4/9/53">(really )</a><ul><li class="origin"><a href="/lkml/1996/4/10/101">Linus Torvalds</a><ul><li><a href="/lkml/1996/4/10/101">(Alan Cox)</a><ul><li><a href="/lkml/1996/4/13/47">Madhusudana Rao</a><ul><li><a href="/lkml/1996/4/15/7">Alan Cox</a></li><li><a href="/lkml/1996/4/15/88">Madhusudana Rao</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/1996/4/10/14">(Bernd Eckenfels)</a></li><li><a href="/lkml/1996/4/10/45">Matthias Urlichs</a></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Wed, 10 Apr 1996 07:10:06 +0300 (EET DST)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: ARP: arp called for own IP address</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On 9 Apr 1996, really kuznet&#64;ms2.inr.ac.ru wrote:<br />&gt; <br />&gt; Moreover, RFC1812 teaches us to check for directly attached<br />&gt; interfaces BEFORE route table lookup. (One consequence of this requirement<br />&gt; is that kernel should correctly route packets even if no routing<br />&gt; tables created!) We might follow this recommendation,<br />&gt; but it is so ugly... When remaking routing code I decided<br />&gt; that this recommendation was artifact of before-CIDR epoch and<br />&gt; ignored it (RFC1812 is just draft, anyway).<br />&gt; <br />&gt; Now all the scheme is nice and simple, routing tables are<br />&gt; the only source of routing information. If someone forget to create<br />&gt; route table entry for his own address, it is his fault.<br /><br />Note that the RFC1812 requirement by no means requires us to complicate <br />the routing code: we should instead add the routes to devices <br />automatically when creating the devices with ifconfig. That would <br />actually clean up the routing code somewhat: right now the IP routing <br />looks at the device address as a special case, even though it would be <br />cleaner to have a special _entry_ for that address.<br /><br />For example, the device 1.1.1.1 with netmask 255.255.255.0 should really <br />be thought of as two separate routes:<br /><br />	1.1.1.1 (255.255.255.255) - loopback<br />	1.1.0.0 (255.255.0.0) - device<br /><br />and if we did those as two separate entries it would clean some things <br />up. If we also sort the routing tables appropriately (ie force these <br />kinds of device routes first), we essentially get the rfc requirements, <br />with no ugly code.<br /><br />		Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
