    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/1996/10/31/30">First message in thread</a></li><li><a href="/lkml/1996/10/31/30">"Ray Van Tassle-CRV004"</a><ul><li><a href="/lkml/1996/10/31/83">Keith Owens</a><ul><li class="origin"><a href="">Linus Torvalds</a></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Fri, 1 Nov 1996 03:52:57 +0200 (EET)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: make dep gotchas</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Fri, 1 Nov 1996, Keith Owens wrote:<br />&gt; <br />&gt; Since make dep tracks the relationship of source to headers<br />&gt; (current_directory/.depend) and headers to headers (top_dir/.hdepend),<br />&gt; make dep must be run after *any* change that affects this relationship.<br />&gt; This includes :-<br />&gt; <br />&gt; 1) Configuration changes.<br /><br />Actually, "config" changes are safe. That's because "make dep" doesn't even<br />bother looking at the config options: it creates a dependency tree that is<br />independent of which files you'll actually compile, because it just goes<br />through the .c/.h files with brute force and ignores any #ifdef's it<br />encounters. <br /><br />However, there _is_ one configuration change that you need to look up with,,<br />and that's changing the architecture. Of course, if you edit the main<br />makefile and change the architecture you should have a clean source tree<br />anyway, so this is usually not a problem. <br /><br />&gt; 2) Applying a patch that :-<br />&gt; 3) Renaming or copying the linux source directory!<br />&gt; 4) Anything else?<br /><br />Applying a patch is "pseudo-safe": the act of patching will update the times<br />of any files it changes, so if the dependencies changed the files will get<br />recompiled anyway. But yes, the dependencies will then be out of sync, and<br />any _further_ changes may end up not being noticed, and you're eventually<br />better off doing "make dep" again. <br /><br />In short, the dependencies are definitely not 100% reliable. "make dep" <br />isn't even close to perfect, but it's as good as it gets without being<br />excessively clever. It works most of the time, but I'd agree that it's <br />generally a good idea to re-run "make dep" after any larger changes.<br /><br />The dependencies are most useful to kernel hackers that tend to make<br />incremental small changes and know what those changes are and wanting to<br />recompile the kernel quickly without having to worry about which parts to<br />recompile. <br /><br />In short, "make dep" is most useful for _me_ ;-)<br /><br />		Linus<br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
