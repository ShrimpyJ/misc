    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2009/10/26/296">First message in thread</a></li><li><a href="/lkml/2009/10/30/153">Linus Torvalds</a><ul><li><a href="/lkml/2009/10/30/162">"Rafael J. Wysocki"</a><ul><li class="origin"><a href="/lkml/2009/10/30/168">Linus Torvalds</a><ul><li><a href="/lkml/2009/10/30/168">Linus Torvalds</a><ul><li><a href="/lkml/2009/10/30/182">"Rafael J. Wysocki"</a></li><li><a href="/lkml/2009/10/30/201">Benjamin Herrenschmidt</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/2009/10/30/202">Benjamin Herrenschmidt</a><ul><li><a href="/lkml/2009/10/31/18">"Rafael J. Wysocki"</a><ul><li><a href="/lkml/2009/10/31/67">Benjamin Herrenschmidt</a><ul><li><a href="/lkml/2009/10/31/70">"Rafael J. Wysocki"</a></li></ul></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Fri, 30 Oct 2009 13:40:23 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: Help needed, Re: [Bug #14334] pcmcia suspend regression from 2.6.31.1 to 2.6.31.2 - Dell Inspiron 600m</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Fri, 30 Oct 2009, Rafael J. Wysocki wrote:<br /><br />&gt; On Friday 30 October 2009, Linus Torvalds wrote:<br /><br />&gt; &gt; The PCMCIA code is better than it used to be a long time ago, but some of <br />&gt; &gt; it is still pretty crazy. <br />&gt; &gt; <br />&gt; &gt; I get the feeling that we should just revert that commit 0c570cdeb,<br />&gt; <br />&gt; Well, there's nothing wrong with doing the PCI stuff and restoring the state at<br />&gt; the _noirq stage IMO, so instead of reverting it altogether, I'd add<br />&gt; yenta_dev_suspend|resume() that would just call<br />&gt; pcmcia_socket_dev_suspend|resume() during "regular" suspend|resume.<br /><br />Oh, that sounds fine too. I didn't mean that we had to do an outright <br />revert, since we'd still need to do something else to fix the original <br />issue.<br /><br />&gt; &gt; and instead always do PCMCIA suspend as a "eject" event. That way we have no <br />&gt; &gt; driver behind it to resume at resume time - and we'll see any plugged-in <br />&gt; &gt; device as just a new insertion. <br />&gt; <br />&gt; In fact I thought about that.<br />&gt; <br />&gt; It looks like I need to find a CardBus adapter somewhere and clean that thing up.<br />&gt; <br />&gt; That said, I'd really like to know what's going on in there. :-)<br /><br />I have to admit that my last two laptops haven't even _had_ a PCMCIA slot, <br />so I'm unlikely to be able to help much. But I could dig out an old one, <br />and try to find the one wireless card I know I have in some corner.<br /><br />And partly exactly _because_ even Cardbus is starting to be "legacy", I'd <br />personally prefer to try to simplify the model to the point where we don't <br />have to think about all the subtle interactions. Just making suspend act <br />as an eject would mean that we'd never have to worry about how the CardBus <br />bridge interacts with the PCI layer at suspend/resume time.<br /><br />		Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
