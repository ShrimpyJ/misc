    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2009/8/21/446">First message in thread</a></li><li><a href="/lkml/2009/8/21/446">Linus Torvalds</a><ul><li><a href="/lkml/2009/8/21/454">Gene Heskett</a><ul><li><a href="/lkml/2009/8/21/456">Linus Torvalds</a><ul><li><a href="/lkml/2009/8/22/47">Gene Heskett</a></li></ul></li><li><a href="/lkml/2009/8/22/12">Robert Hancock</a><ul><li><a href="/lkml/2009/8/22/33">Stefan Richter</a><ul><li><a href="/lkml/2009/8/22/52">Gene Heskett</a></li></ul></li><li><a href="/lkml/2009/8/22/51">Gene Heskett</a></li></ul></li></ul></li><li><a href="/lkml/2009/8/23/38">Geert Uytterhoeven</a><ul><li><a href="/lkml/2009/8/26/25">KOSAKI Motohiro</a></li></ul></li><li><a href="/lkml/2009/8/25/271">mailing54</a><ul><li class="origin"><a href="/lkml/2009/8/25/404">Linus Torvalds</a><ul><li><a href="/lkml/2009/8/25/404">mailing54</a><ul><li><a href="/lkml/2009/8/25/418">Linus Torvalds</a></li></ul></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Tue, 25 Aug 2009 11:11:19 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: Linux 2.6.31-rc7</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Tue, 25 Aug 2009, mailing54 wrote:<br />&gt; <br />&gt; Unlike rc6, this rc (rc7) does not boot correctly on my Macbook 2.1. I am<br />&gt; using amd64 kernel-debs provided by Ubuntu on<br />&gt; <a href="http://kernel.ubuntu.com/~kernel-ppa/mainline/.">http://kernel.ubuntu.com/~kernel-ppa/mainline/.</a><br />&gt; <br />&gt; During boot with rc7, I can unlock my encrypted volumes just fine. After that,<br />&gt; boot continues till suddenly screen goes black. I can not tell if the whole<br />&gt; thing hangs or just the screen dies, but I can tell that the only way to get<br />&gt; out of that limbo seems to be the power button. Again, everything seems to<br />&gt; work flawless with rc6 Ubuntu deb.<br /><br />Are you using the same config? It sounds very much like your -rc7 problems <br />are due to the Intel KMS (kernel mode setting) driver, which I know has <br />had problems on at least Mac Mini's. And I wonder if the -rc6 kernel deb <br />used different config options and didn't enable KMS, for example. Because <br />I don't think anything actually changed in the KMS code itself between rc6 <br />and rc7.<br /><br />That said, there were some generic EDID changes that could possibly affect <br />KMS, but looking at the dmesg, I don't think you had KMS enabled in -rc6, <br />and maybe you do in -rc7. I have no idea what configs those debian builds <br />use.<br /><br />			Linus<br /><br />---<br />&gt; Assuming that dmesg output of rc6 and rc7 should look kinda similar, I tried<br />&gt; to narrow the problem down to the following part in the output of rc6:<br />&gt; <br />&gt; <br />&gt; [   21.193733] cfg80211: Regulatory domain changed to country: AT<br />&gt; [   21.193737]     (start_freq - end_freq &#64; bandwidth), (max_antenna_gain, max_eirp)<br />&gt; [   21.193740]     (2402000 KHz - 2482000 KHz &#64; 40000 KHz), (N/A, 2000 mBm)<br />&gt; [   21.193742]     (5170000 KHz - 5250000 KHz &#64; 40000 KHz), (N/A, 2000 mBm)<br />&gt; [   21.193745]     (5250000 KHz - 5330000 KHz &#64; 40000 KHz), (N/A, 2000 mBm)<br />&gt; [   21.193747]     (5490000 KHz - 5710000 KHz &#64; 40000 KHz), (N/A, 2700 mBm)<br />&gt; [   21.707177] lp: driver loaded but no devices found<br />&gt; [   21.913101] Adding 2097144k swap on /dev/mapper/vgencrypted-swap. Priority:-1 extents:1 across:2097144k<br />&gt; [   22.485747] EXT3 FS on dm-1, internal journal<br />&gt; [   23.482830] kjournald starting.  Commit interval 5 seconds<br />&gt; [   23.483105] EXT3 FS on sda4, internal journal<br />&gt; [   23.483109] EXT3-fs: mounted filesystem with writeback data mode.<br />&gt; [   23.628917] SGI XFS with ACLs, security attributes, realtime, large block/inode numbers, no debug enabled<br />&gt; [   23.630731] SGI XFS Quota Management subsystem<br />&gt; [   23.688751] XFS mounting filesystem dm-3<br />&gt; [   24.004942] Ending clean XFS mount for filesystem: dm-3<br />&gt; [   24.844066] HDA Intel 0000:00:1b.0: PCI INT A disabled<br />&gt; [   24.853007] HDA Intel 0000:00:1b.0: PCI INT A -&gt; GSI 22 (level, low) -&gt; IRQ22<br />&gt; [   24.853046] HDA Intel 0000:00:1b.0: setting latency timer to 64<br />&gt; [   24.920161] hda_codec: STAC922x, Apple subsys_id=106b2200<br />&gt; [   25.902474] ppdev: user-space parallel port driver<br />&gt; [   30.269237] ADDRCONF(NETDEV_UP): wlan0: link is not ready<br />&gt; [   30.543459] usb 5-1: usbfs: USBDEVFS_CONTROL failed cmd hid2hci rqt 64 rq 0 len 0 ret -84<br />&gt; [   30.555027] Bluetooth: BNEP (Ethernet Emulation) ver 1.3<br />&gt; [   30.555030] Bluetooth: BNEP filters: protocol multicast<br />&gt; [   30.591724] Bridge firewalling registered<br />&gt; [   30.816130] usb 5-1: USB disconnect, address 2<br />&gt; [   31.116057] usb 5-1: new full speed USB device using uhci_hcd and address 3<br />&gt; [   31.309153] usb 5-1: configuration #1 chosen from 1 choice<br />&gt; [   31.337641] Bluetooth: Generic Bluetooth USB driver ver 0.5<br />&gt; [   31.338153] usbcore: registered new interface driver btusb<br />&gt; [   33.876059] [drm] Initialized drm 1.1.0 20060810<br />&gt; [   33.898991] pci 0000:00:02.0: PCI INT A -&gt; GSI 16 (level, low) -&gt; IRQ 16<br />&gt; [   33.898997] pci 0000:00:02.0: setting latency timer to 64<br />&gt; [   33.908179] [drm] Initialized i915 1.6.0 20080730 for 0000:00:02.0 on minor 0<br />&gt; [   34.129469] render error detected, EIR: 0x00000010<br />&gt; [   34.129475] page table error<br />&gt; [   34.129477]   PGTBL_ER: 0x00000102<br />&gt; [   34.129480] [drm:i915_handle_error] *ERROR* EIR stuck: 0x00000010, masking<br />&gt; [   34.129487] render error detected, EIR: 0x00000010<br />&gt; [   34.129489] page table error<br />&gt; [   34.129490]   PGTBL_ER: 0x00000102<br />&gt; [   34.408721] sky2 eth0: enabling interface<br />&gt; [   34.409131] ADDRCONF(NETDEV_UP): eth0: link is not ready<br />&gt; [   36.660303] ADDRCONF(NETDEV_UP): wlan0: link is not ready<br />&gt; <br />&gt; <br />&gt; <br />&gt; (complete dmesg attached)<br />&gt; <br />&gt; I think the problem must be somewhere in here because when booting rc7 (in<br />&gt; rescue mode), the last thing I can see before all goes black is the frequency<br />&gt; table shown in the first lines of the quoted section. (Also, there are<br />&gt; scary-looking errors near the end ;) )<br />&gt; <br />&gt; <br />&gt; /proc/version/<br />&gt; Linux version 2.6.31-020631rc6-generic (root&#64;zinc) (gcc version 4.2.3 (Ubuntu<br />&gt; 4.2.3-2ubuntu7)) #020631rc6 SMP Fri Aug 14 09:04:48 UTC 2009<br />&gt; <br />&gt; <br />&gt; Please let me know what further info is needed.<br />&gt; <br />&gt; Regards,<br />&gt; <br />&gt; Tobias<br />&gt; <br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
