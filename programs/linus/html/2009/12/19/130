    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2009/12/5/107">First message in thread</a></li><li><a href="/lkml/2009/12/19/126">Linus Torvalds</a><ul><li><a href="/lkml/2009/12/19/127">Linus Torvalds</a><ul><li><a href="/lkml/2009/12/19/129">"Rafael J. Wysocki"</a></li></ul></li><li><a href="/lkml/2009/12/19/128">"Rafael J. Wysocki"</a><ul><li class="origin"><a href="/lkml/2009/12/19/132">Linus Torvalds</a><ul><li><a href="/lkml/2009/12/19/132">"Rafael J. Wysocki"</a></li><li><a href="/lkml/2009/12/19/141">Dmitry Torokhov</a><ul><li><a href="/lkml/2009/12/20/143">"Rafael J. Wysocki"</a></li></ul></li></ul></li><li><a href="/lkml/2009/12/19/142">Dmitry Torokhov</a></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Sat, 19 Dec 2009 16:09:07 -0800 (PST)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: Async suspend-resume patch w/ completions (was: Re: Async suspend-resume patch w/ rwsems)</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Sun, 20 Dec 2009, Rafael J. Wysocki wrote:<br />&gt; &gt; <br />&gt; &gt; Why would it be?<br />&gt; <br />&gt; The embedded controller may depend on it.<br /><br />Again, I say "why?"<br /><br />Anything can be true. That doesn't _make_ everything true. There's no real <br />reason why PnP/ACPI suspend/resume should really care.<br /><br />We can try it. Not for 2.6.33, but by the 34 merge window maybe we'll have <br />a patch-series that is ready to be tested, and that aggressively tries to <br />do the devices that matter asynchronously.<br /><br />So instead of you trying to make up some idiotic cross-device worries, <br />just see if those worries have any actual background in reality. So far I <br />haven't actually heard anything but "in theory, anything is possible", <br />which is such a truism that it's not even worth voicing.<br /><br />That said, I still get the feeling that we'd be even better off simply <br />trying to avoid the whole keyboard reset entirely. Apparently we do it for <br />a few HP laptops. It's entirely possible that we'd be better off simply <br />not _doing_ the slow thing in the first place.<br /><br />For example, we may be _much_ better off doing that whole keyboard reset <br />at resume time than at suspend time. That's what we do when we probe <br />things on initialization - and the resume-time keyboard code is actually <br />already asynchronous, it does that atkbd_reconnect asynchronously by <br />queuing it as an event.<br /><br />So again, all these problems may not at all be fundamnetal problems: the <br />keyboard driver does certain things, but there is no guarantee that it <br />_needs_ to do those things. Turning the driver async may be totally the <br />wrong thing to do, when we could potentially fix latency problems at the <br />driver level instead.<br /><br />			Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
