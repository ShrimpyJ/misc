    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2009/7/31/159">First message in thread</a></li><li class="origin"><a href="/lkml/2009/7/31/162">Linus Torvalds</a><ul><li><a href="/lkml/2009/7/31/162">Eric Paris</a></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Fri, 31 Jul 2009 09:01:40 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: kernel bug</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br />Hmm. We have some fsnotify fixes since -rc4 (and I'm planning on doing <br />-rc5 today), so it's worth checking if this problem is perhaps already ok.<br /><br />But looking at the fixes, I don't think any of them affect this particular <br />BUG_ON, though, so I'm adding Eric to the email participants list, and <br />lkml to keep it archived and google-ready.<br /><br />This seems to also be<br /><br />	<a href="https://bugzilla.kernel.org/show_bug.cgi?id=13729">http://bugzilla.kernel.org/show_bug.cgi?id=13729</a><br />	<a href="https://lkml.org/lkml/2009/7/4/12">http://lkml.org/lkml/2009/7/4/12</a><br /><br />with only slight variations.<br /><br />		Linus<br /><br />On Fri, 31 Jul 2009, Christoph Thielecke wrote:<br />&gt;<br />&gt; Hello Linus,<br />&gt; <br />&gt; today my machine stops rapidly (running 2.6.31-rc4). After revisited the log I <br />&gt; found 2 kernel bug entries which maybe could useful:<br />&gt; <br />&gt; Jul 31 11:23:05 develop kernel: ------------[ cut here ]------------<br />&gt; Jul 31 11:23:05 develop kernel: kernel BUG at fs/notify/notification.c:93!<br />&gt; Jul 31 11:23:05 develop kernel: invalid opcode: 0000 [#1] PREEMPT SMP<br />&gt; Jul 31 11:23:05 develop kernel: last sysfs file: /sys/devices/pci0000:00/0000:00:1d.7/usb1/1-4/1-4.1/product<br />&gt; Jul 31 11:23:05 develop kernel: Modules linked in: b44 nvidia(P) binfmt_misc ppdev parport_pc lp parport rfcomm l2cap bluetooth tun vboxnetadp vboxnetflt vboxdrv pppol2tp pppox ppp_generic slhc ipv6 capifs acpi_cpufreq cpufreq_ondemand cpufreq_powersave cpufreq_stats freq_table cpufreq_userspace cpufreq_conservative nfsd nfs lockd fscache nfs_acl auth_rpcgss sunrpc deflate zlib_deflate ctr twofish twofish_common camellia serpent blowfish cast5 des_generic cbc aes_i586 aes_generic xcbc rmd160 sha256_generic sha1_generic crypto_null af_key nls_iso8859_1 nls_cp437 vfat fat fuse loop asix pl2303 dm9601 usbnet usbserial usbhid hid snd_hda_codec_idt snd_hda_intel snd_hda_codec snd_hwdep snd_pcm_oss snd_mixer_oss snd_pcm snd_seq_dummy snd_seq_oss snd_seq_midi snd_rawmidi firewire_ohci firewire_core arc4 snd_seq_midi_event snd_seq crc_itu_t ecb snd_timer snd_seq_device ssb ohci1394 iwl3945 sdhci_pci sdhci iTCO_wdt iTCO_vendor_support snd pcmcia pcmcia_core iwlcore mmc_core uhci_hc!<br /> d joydev intel_agp i2c_i801 soundcore ieee1394 mii ehci_hcd mac80211 led_class ricoh_mmc agpgart i2c_core snd_page_alloc cfg80211 usbcore psmouse rtc_cmos rtc_core rtc_lib video output serio_raw wmi dell_laptop button battery ac processor rfkill evdev dcdbas sg sr_mod cdrom dm_mirror dm_region_hash dm_log dm_snapshot dm_mod thermal fan sd_mod crc_t10dif [last unloaded: b44]<br />&gt; Jul 31 11:23:05 develop kernel:<br />&gt; Jul 31 11:23:05 develop kernel: Pid: 8207, comm: kdevelop Tainted: P           (2.6.31-rc4 #2) MP061<br />&gt; Jul 31 11:23:05 develop kernel: EIP: 0060:[&lt;c10db67b&gt;] EFLAGS: 00210283 CPU: 0<br />&gt; Jul 31 11:23:05 develop kernel: EIP is at fsnotify_put_event+0x46/0x4a<br />&gt; Jul 31 11:23:05 develop kernel: EAX: f6865d04 EBX: f6865cd0 ECX: 00000000 EDX: bffd8f01<br />&gt; Jul 31 11:23:05 develop kernel: ESI: bffd8f72 EDI: f6865cd0 EBP: f15abf0c ESP: f15abf08<br />&gt; Jul 31 11:23:05 develop kernel: DS: 007b ES: 007b FS: 00d8 GS: 0033 SS: 0068<br />&gt; Jul 31 11:23:05 develop kernel: Process kdevelop (pid: 8207, ti=f15aa000 task=f1571130 task.ti=f15aa000)<br />&gt; Jul 31 11:23:05 develop kernel: Stack:<br />&gt; Jul 31 11:23:05 develop kernel: 00000020 f15abf64 c10dd775 000000b0 bffd8f14 f46488c0 f1fcc174 f1fcc158<br />&gt; Jul 31 11:23:05 develop kernel: &lt;0&gt; f1fcc140 bffd8f54 0000000e 00000000 f1571130 c104699f f1fcc178 f1fcc178<br />&gt; Jul 31 11:23:05 develop kernel: &lt;0&gt; 00000152 00000002 00000000 00000010 f46488c0 bffd8f14 000000f0 f15abf8c<br />&gt; Jul 31 11:23:05 develop kernel: Call Trace:<br />&gt; Jul 31 11:23:05 develop kernel: [&lt;c10dd775&gt;] ? inotify_read+0x24a/0x269<br />&gt; Jul 31 11:23:05 develop kernel: [&lt;c104699f&gt;] ? autoremove_wake_function+0x0/0x3a<br />&gt; Jul 31 11:23:05 develop kernel: [&lt;c10b3206&gt;] ? vfs_read+0x8b/0x142<br />&gt; Jul 31 11:23:05 develop kernel: [&lt;c10dd52b&gt;] ? inotify_read+0x0/0x269<br />&gt; Jul 31 11:23:05 develop kernel: [&lt;c10b3366&gt;] ? sys_read+0x3d/0x6b<br />&gt; Jul 31 11:23:05 develop kernel: [&lt;c1003610&gt;] ? sysenter_do_call+0x12/0x2c<br />&gt; Jul 31 11:23:05 develop kernel: Code: 74 1f 8d 43 34 39 43 34 75 21 8b 43 2c e8 ba fe fc ff 89 da a1 c4 23 54 c1 e8 79 ff fc ff 5b 5d c3 8d 43 14 e8 b3 e6 fd ff eb d7 &lt;0f&gt; 0b eb fe 55 89 e5 57 56 53 83 ec 0c 89 c6 8d 40 18 89 45 e8<br />&gt; Jul 31 11:23:05 develop kernel: EIP: [&lt;c10db67b&gt;] fsnotify_put_event+0x46/0x4a SS:ESP 0068:f15abf08<br />&gt; Jul 31 11:23:05 develop kernel: ---[ end trace 1290e7d176f2655e ]---<br />&gt; <br />&gt; Jul 31 11:23:17 develop kernel: ------------[ cut here ]------------<br />&gt; Jul 31 11:23:17 develop kernel: kernel BUG at fs/notify/notification.c:93!<br />&gt; Jul 31 11:23:17 develop kernel: invalid opcode: 0000 [#2] PREEMPT SMP<br />&gt; Jul 31 11:23:17 develop kernel: last sysfs file: /sys/devices/pci0000:00/0000:00:1d.7/usb1/1-4/1-4.1/product<br />&gt; Jul 31 11:23:17 develop kernel: Modules linked in: b44 nvidia(P) binfmt_misc ppdev parport_pc lp parport rfcomm l2cap bluetooth tun vboxnetadp vboxnetflt vboxdrv pppol2tp pppox ppp_generic slhc ipv6 capifs acpi_cpufreq cpufreq_ondemand cpufreq_powersave cpufreq_stats freq_table cpufreq_userspace cpufreq_conservative nfsd nfs lockd fscache nfs_acl auth_rpcgss sunrpc deflate zlib_deflate ctr twofish twofish_common camellia serpent blowfish cast5 des_generic cbc aes_i586 aes_generic xcbc rmd160 sha256_generic sha1_generic crypto_null af_key nls_iso8859_1 nls_cp437 vfat fat fuse loop asix pl2303 dm9601 usbnet usbserial usbhid hid snd_hda_codec_idt snd_hda_intel snd_hda_codec snd_hwdep snd_pcm_oss snd_mixer_oss snd_pcm snd_seq_dummy snd_seq_oss snd_seq_midi snd_rawmidi firewire_ohci firewire_core arc4 snd_seq_midi_event snd_seq crc_itu_t ecb snd_timer snd_seq_device ssb ohci1394 iwl3945 sdhci_pci sdhci iTCO_wdt iTCO_vendor_support snd pcmcia pcmcia_core iwlcore mmc_core uhci_hc!<br /> d joydev intel_agp i2c_i801 soundcore ieee1394 mii ehci_hcd mac80211 led_class ricoh_mmc agpgart i2c_core snd_page_alloc cfg80211 usbcore psmouse rtc_cmos rtc_core rtc_lib video output serio_raw wmi dell_laptop button battery ac processor rfkill evdev dcdbas sg sr_mod cdrom dm_mirror dm_region_hash dm_log dm_snapshot dm_mod thermal fan sd_mod crc_t10dif [last unloaded: b44]<br />&gt; Jul 31 11:23:17 develop kernel:<br />&gt; Jul 31 11:23:17 develop kernel: Pid: 2462, comm: firefox-bin Tainted: P      D    (2.6.31-rc4 #2) MP061<br />&gt; Jul 31 11:23:17 develop kernel: EIP: 0060:[&lt;c10db67b&gt;] EFLAGS: 00010283 CPU: 0<br />&gt; Jul 31 11:23:17 develop kernel: EIP is at fsnotify_put_event+0x46/0x4a<br />&gt; Jul 31 11:23:17 develop kernel: EAX: f68656b0 EBX: f686567c ECX: 00000000 EDX: 092aa801<br />&gt; Jul 31 11:23:17 develop kernel: ESI: 092aa818 EDI: f686567c EBP: f3f23f0c ESP: f3f23f08<br />&gt; Jul 31 11:23:17 develop kernel: DS: 007b ES: 007b FS: 00d8 GS: 0033 SS: 0068<br />&gt; Jul 31 11:23:17 develop kernel: Process firefox-bin (pid: 2462, ti=f3f22000 task=f06c8b90 task.ti=f3f22000)<br />&gt; Jul 31 11:23:17 develop kernel: Stack:<br />&gt; Jul 31 11:23:17 develop kernel: 00000030 f3f23f64 c10dd775 00000400 092aa7f0 f1662c40 f29cfef4 f29cfed8<br />&gt; Jul 31 11:23:17 develop kernel: &lt;0&gt; f29cfec0 092aa7f0 00000018 00000000 f06c8b90 c104699f f29cfef8 f29cfef8<br />&gt; Jul 31 11:23:17 develop kernel: &lt;0&gt; 00000002 00000100 00000000 00000020 f1662c40 092aa7f0 00000400 f3f23f8c<br />&gt; Jul 31 11:23:17 develop kernel: Call Trace:<br />&gt; Jul 31 11:23:17 develop kernel: [&lt;c10dd775&gt;] ? inotify_read+0x24a/0x269<br />&gt; Jul 31 11:23:17 develop kernel: [&lt;c104699f&gt;] ? autoremove_wake_function+0x0/0x3a<br />&gt; Jul 31 11:23:17 develop kernel: [&lt;c10b3206&gt;] ? vfs_read+0x8b/0x142<br />&gt; Jul 31 11:23:17 develop kernel: [&lt;c10dd52b&gt;] ? inotify_read+0x0/0x269<br />&gt; Jul 31 11:23:17 develop kernel: [&lt;c10b3366&gt;] ? sys_read+0x3d/0x6b<br />&gt; Jul 31 11:23:17 develop kernel: [&lt;c1003610&gt;] ? sysenter_do_call+0x12/0x2c<br />&gt; Jul 31 11:23:17 develop kernel: Code: 74 1f 8d 43 34 39 43 34 75 21 8b 43 2c e8 ba fe fc ff 89 da a1 c4 23 54 c1 e8 79 ff fc ff 5b 5d c3 8d 43 14 e8 b3 e6 fd ff eb d7 &lt;0f&gt; 0b eb fe 55 89 e5 57 56 53 83 ec 0c 89 c6 8d 40 18 89 45 e8<br />&gt; Jul 31 11:23:17 develop kernel: EIP: [&lt;c10db67b&gt;] fsnotify_put_event+0x46/0x4a SS:ESP 0068:f3f23f08<br />&gt; Jul 31 11:23:17 develop kernel: ---[ end trace 1290e7d176f2655f ]---<br />&gt; <br />&gt; crissi&#64;develop:~$ uname -a<br />&gt; Linux develop 2.6.31-rc4 #2 SMP PREEMPT Mon Jul 27 11:47:00 CEST 2009 i686 <br />&gt; GNU/Linux<br />&gt; <br />&gt; crissi&#64;develop:~$ cat /proc/cpuinfo<br />&gt; processor       : 0<br />&gt; vendor_id       : GenuineIntel<br />&gt; cpu family      : 6<br />&gt; model           : 14<br />&gt; model name      : Intel(R) Pentium(R) M CPU        000  &#64; 2.00GHz<br />&gt; stepping        : 4<br />&gt; cpu MHz         : 2000.000<br />&gt; cache size      : 2048 KB<br />&gt; physical id     : 0<br />&gt; siblings        : 2<br />&gt; core id         : 0<br />&gt; cpu cores       : 2<br />&gt; apicid          : 0<br />&gt; initial apicid  : 0<br />&gt; fdiv_bug        : no<br />&gt; hlt_bug         : no<br />&gt; f00f_bug        : no<br />&gt; coma_bug        : no<br />&gt; fpu             : yes<br />&gt; fpu_exception   : yes<br />&gt; cpuid level     : 10<br />&gt; wp              : yes<br />&gt; flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx constant_tsc arch_perfmon bts pni monitor vmx est tm2 xtpr pdcm<br />&gt; bogomips        : 3990.57<br />&gt; clflush size    : 64<br />&gt; power management:<br />&gt; <br />&gt; processor       : 1<br />&gt; vendor_id       : GenuineIntel<br />&gt; cpu family      : 6<br />&gt; model           : 14<br />&gt; model name      : Intel(R) Pentium(R) M CPU        000  &#64; 2.00GHz<br />&gt; stepping        : 4<br />&gt; cpu MHz         : 2000.000<br />&gt; cache size      : 2048 KB<br />&gt; physical id     : 0<br />&gt; siblings        : 2<br />&gt; core id         : 1<br />&gt; cpu cores       : 2<br />&gt; apicid          : 1<br />&gt; initial apicid  : 1<br />&gt; fdiv_bug        : no<br />&gt; hlt_bug         : no<br />&gt; f00f_bug        : no<br />&gt; coma_bug        : no<br />&gt; fpu             : yes<br />&gt; fpu_exception   : yes<br />&gt; cpuid level     : 10<br />&gt; wp              : yes<br />&gt; flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx constant_tsc arch_perfmon bts pni monitor vmx est tm2 xtpr pdcm<br />&gt; bogomips        : 3990.06<br />&gt; clflush size    : 64<br />&gt; power management:<br />&gt; <br />&gt; <br />&gt; Its a debian lenny machine with self compiled kernel from kernel.org.<br />&gt; <br />&gt; <br />&gt; Best regards<br />&gt; -- <br />&gt; Linux User Group Wernigerode<br />&gt; <a href="http://www.lug-wr.de/">http://www.lug-wr.de/</a><br />&gt; <br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
