    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/1998/8/11/88">First message in thread</a></li><li><a href="/lkml/1998/8/12/129">Linus Torvalds</a><ul><li><a href="/lkml/1998/8/12/185">"Jon M. Taylor"</a></li><li><a href="/lkml/1998/8/13/13">"David S. Miller"</a><ul><li class="origin"><a href="/lkml/1998/8/13/24">Linus Torvalds</a><ul><li><a href="/lkml/1998/8/13/24">"David S. Miller"</a></li><li><a href="/lkml/1998/8/14/38">Andi Kleen</a></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Wed, 12 Aug 1998 22:00:36 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: kill -9 &lt;pid of X&gt;</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Wed, 12 Aug 1998, David S. Miller wrote:<br />&gt; <br />&gt;    I tell you that X can block SIGKILL, but you don't seem to be happy<br />&gt;    with that either. What's your beef?<br />&gt; <br />&gt; Last time I checked kernel/signal.c nobody can block SIGKILL or did<br />&gt; you propose allowing this in certain limited cases?<br /><br />People seem to have a really hard time understanding.<br /><br />Can you as "davem" send a SIGKILL to me as "torvalds"? No. <br /><br />Blocking ALL signals is something that is done all the time in UNIX, and<br />it's called "security". <br /><br />Now, some peopl ehave suggested that you shouldn't be able to kill your X<br />server, because that leaves the screen in a unusable state. In short,<br />killing your X server is a security problem. And yes, it makes sense to<br />use EXISTING security features of the kernel to block that killing. <br /><br />No kernel changes.<br /><br />What you do, is you ask a XFree86 person very nicely whether he could add<br />a line to the XF86Config file that adds a new configuration option, namely<br />the user as which you run the server once you've done all the initial<br />setup (maybe the option would default to "bin"). And then you ask the nice<br />XFree86 person to do something like this (pseudo-code, but I'm sure you<br />can figure this out):<br /><br />    main()<br />    {<br />	.. <br />	.. allocate resources ..<br />	.. open(/dev/mem) ..<br />	.. open(/dev/mouse) ..<br />	.. iopl()/ioperm() ..<br />	..<br /><br />	/*<br />	 * get rid of _all_ association with the user that<br />	 * started us - a random user must not have the right<br />	 * to kill us while we do important hardware stuff<br />	 */<br />	setuid(0);<br />	setuid("xuser");<br /><br />	.. now we actually start running ..<br /><br />The point being that even the person who started X no longer has<br />privileges to kill X even with SIGKILL - because the X server isn't<br />running as that user.<br /><br />Again: no kernel modifications required.<br /><br />I'm sure the XFree86 people would be more than happy to consider something<br />like this: they've already given security-people flags in XF86Config to<br />disable Ctrl-Alt-Home etc, exactly because they wanted to not let people<br />break out of "xlock" by just killing the X server with the vulcan nerve-<br />pinch.<br /><br />So yes, with the above root can still kill the X server with SIGKILL. Big<br />deal. If root wants to mess up the screen he can do so very easily without<br />even starting up X, so root being able to SIGKILL the server is a<br />non-issue. <br /><br />I certainly agree that root should be able to send the X server some<br />signal that allows the server to shut down nicely, but I disagree with<br />Alan and others who seem to think that it has to be SIGKILL. There is no<br />reason why X couldn't just intercept all the normal signals and cause a<br />clean shutdown. <br /><br />		Linus<br /><br /><br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.rutgers.edu<br />Please read the FAQ at <a href="http://www.altern.org/andrebalsa/doc/lkml-faq.html">http://www.altern.org/andrebalsa/doc/lkml-faq.html</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
