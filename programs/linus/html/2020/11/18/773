    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2020/11/15/312">First message in thread</a></li><li><a href="/lkml/2020/11/15/312">Linus Torvalds</a><ul><li><a href="/lkml/2020/11/18/380">David Laight</a><ul><li class="origin"><a href="/lkml/2020/11/18/819">Linus Torvalds</a><ul><li><a href="/lkml/2020/11/18/819">David Laight</a></li><li><a href="/lkml/2020/11/18/848">Thomas Zimmermann</a><ul><li><a href="/lkml/2020/11/18/973">David Laight</a></li></ul></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Wed, 18 Nov 2020 10:10:37 -0800</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: Linux 5.10-rc4</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">On Wed, Nov 18, 2020 at 4:12 AM David Laight &lt;David.Laight&#64;aculab.com&gt; wrote:<br />&gt;<br />&gt; I've got the 'splat' below during boot.<br />&gt; This is an 8-core C2758 Atom cpu using the on-board/cpu graphics.<br />&gt; User space is Ubuntu 20.04.<br />&gt;<br />&gt; Additionally the X display has all the colours and alignment slightly<br />&gt; messed up.<br />&gt; 5.9.0 was ok.<br />&gt; I'm just guessing the two issues are related.<br /><br />Sounds likely.  But it would be lovely if you could bisect when<br />exactly the problem(s) started to both verify that, and just to<br />pinpoint the exact change..<br /><br />I'm adding Thomas Zimmermann to the cc, because he did that "drm/ast:<br />Program display mode in CRTC's atomic_enable" which looks relevant in<br />that it's right in that call-chain.<br /><br />Did some initialization perhaps get overlooked?<br /><br />And Dave and Daniel and the drm list cc'd as well..<br /><br />Full splat left quoted below for new people and list.<br /><br />            Linus<br /><br />&gt; [   20.809891] WARNING: CPU: 0 PID: 973 at drivers/gpu/drm/drm_gem_vram_helper.c:284 drm_gem_vram_offset+0x35/0x40 [drm_vram_helper]<br />&gt; [   20.821543] Modules linked in: nls_iso8859_1 dm_multipath scsi_dh_rdac scsi_dh_emc scsi_dh_alua ipmi_ssif intel_powerclamp coretemp kvm_intel kvm joydev input_leds ipmi_si intel_cstate ipmi_devintf ipmi_msghandler mac_hid sch_fq_codel parport_pc ppdev lp parport ip_tables x_tables autofs4 btrfs blake2b_generic zstd_compress raid10 raid456 async_raid6_recov async_memcpy async_pq async_xor async_tx libcrc32c xor raid6_pq raid1 raid0 multipath linear ast drm_vram_helper drm_kms_helper syscopyarea sysfillrect sysimgblt fb_sys_fops cec drm_ttm_helper ttm crct10dif_pclmul crc32_pclmul ghash_clmulni_intel gpio_ich drm aesni_intel hid_generic glue_helper crypto_simd igb usbhid cryptd ahci i2c_i801 hid libahci i2c_smbus lpc_ich dca i2c_ismt i2c_algo_bit<br />&gt; [   20.887477] CPU: 0 PID: 973 Comm: gnome-shell Not tainted 5.10.0-rc4+ #78<br />&gt; [   20.894274] Hardware name: Supermicro A1SAi/A1SRi, BIOS 1.1a 08/27/2015<br />&gt; [   20.900896] RIP: 0010:drm_gem_vram_offset+0x35/0x40 [drm_vram_helper]<br />&gt; [   20.907342] Code: 00 48 89 e5 85 c0 74 17 48 83 bf 78 01 00 00 00 74 18 48 8b 87 80 01 00 00 5d 48 c1 e0 0c c3 0f 0b 48 c7 c0 ed ff ff ff 5d c3 &lt;0f&gt; 0b 31 c0 5d c3 0f 1f 44 00 00 0f 1f 44 00 00 55 48 8b 87 18 06<br />&gt; [   20.926100] RSP: 0018:ffff9f59811d3a68 EFLAGS: 00010246<br />&gt; [   20.931339] RAX: 0000000000000002 RBX: ffff8b46861e20c0 RCX: ffffffffc032d600<br />&gt; [   20.938479] RDX: ffff8b468f47a000 RSI: ffff8b46861e2000 RDI: ffff8b468f9acc00<br />&gt; [   20.945622] RBP: ffff9f59811d3a68 R08: 0000000000000040 R09: ffff8b46864ce288<br />&gt; [   20.952769] R10: 0000000000000000 R11: 0000000000000001 R12: ffff8b468f47a000<br />&gt; [   20.959915] R13: 0000000000000000 R14: 0000000000000000 R15: ffff8b468ad2bf00<br />&gt; [   20.967057] FS:  00007f5b37ac5cc0(0000) GS:ffff8b49efc00000(0000) knlGS:0000000000000000<br />&gt; [   20.975149] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033<br />&gt; [   20.980904] CR2: 00007f5b3d093f00 CR3: 0000000103438000 CR4: 00000000001006f0<br />&gt; [   20.988047] Call Trace:<br />&gt; [   20.990506]  ast_cursor_page_flip+0x22/0x100 [ast]<br />&gt; [   20.995313]  ast_cursor_plane_helper_atomic_update+0x46/0x70 [ast]<br />&gt; [   21.001524]  drm_atomic_helper_commit_planes+0xbd/0x220 [drm_kms_helper]<br />&gt; [   21.008243]  drm_atomic_helper_commit_tail_rpm+0x3a/0x70 [drm_kms_helper]<br />&gt; [   21.015062]  commit_tail+0x99/0x130 [drm_kms_helper]<br />&gt; [   21.020050]  drm_atomic_helper_commit+0x123/0x150 [drm_kms_helper]<br />&gt; [   21.026269]  drm_atomic_commit+0x4a/0x50 [drm]<br />&gt; [   21.030737]  drm_atomic_helper_update_plane+0xe7/0x140 [drm_kms_helper]<br />&gt; [   21.037384]  __setplane_atomic+0xcc/0x110 [drm]<br />&gt; [   21.041953]  drm_mode_cursor_universal+0x13e/0x260 [drm]<br />&gt; [   21.047299]  drm_mode_cursor_common+0xef/0x220 [drm]<br />&gt; [   21.052287]  ? alloc_set_pte+0x10d/0x6d0<br />&gt; [   21.056244]  ? drm_mode_cursor_ioctl+0x60/0x60 [drm]<br />&gt; [   21.061242]  drm_mode_cursor2_ioctl+0xe/0x10 [drm]<br />&gt; [   21.066067]  drm_ioctl_kernel+0xae/0xf0 [drm]<br />&gt; [   21.070455]  drm_ioctl+0x241/0x3f0 [drm]<br />&gt; [   21.074415]  ? drm_mode_cursor_ioctl+0x60/0x60 [drm]<br />&gt; [   21.079401]  __x64_sys_ioctl+0x91/0xc0<br />&gt; [   21.083167]  do_syscall_64+0x38/0x90<br />&gt; [   21.086755]  entry_SYSCALL_64_after_hwframe+0x44/0xa9<br />&gt; [   21.091813] RIP: 0033:0x7f5b3cf1350b<br />&gt; [   21.095403] Code: 0f 1e fa 48 8b 05 85 39 0d 00 64 c7 00 26 00 00 00 48 c7 c0 ff ff ff ff c3 66 0f 1f 44 00 00 f3 0f 1e fa b8 10 00 00 00 0f 05 &lt;48&gt; 3d 01 f0 ff ff 73 01 c3 48 8b 0d 55 39 0d 00 f7 d8 64 89 01 48<br />&gt; [   21.114154] RSP: 002b:00007ffef1966588 EFLAGS: 00000246 ORIG_RAX: 0000000000000010<br />&gt; [   21.121730] RAX: ffffffffffffffda RBX: 00007ffef19665c0 RCX: 00007f5b3cf1350b<br />&gt; [   21.128870] RDX: 00007ffef19665c0 RSI: 00000000c02464bb RDI: 0000000000000009<br />&gt; [   21.136013] RBP: 00000000c02464bb R08: 0000000000000040 R09: 0000000000000004<br />&gt; [   21.143157] R10: 0000000000000002 R11: 0000000000000246 R12: 0000561ec9d10060<br />&gt; [   21.150295] R13: 0000000000000009 R14: 0000561eca2cc9a0 R15: 0000000000000040<br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
