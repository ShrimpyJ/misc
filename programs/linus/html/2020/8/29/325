    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2020/8/29/307">First message in thread</a></li><li><a href="/lkml/2020/8/29/307">Daniel Exner</a><ul><li class="origin"><a href="/lkml/2020/8/29/327">Linus Torvalds</a><ul><li><a href="/lkml/2020/8/29/327">Christoph Hellwig</a><ul><li><a href="/lkml/2020/8/29/338">Gabriel C</a><ul><li><a href="/lkml/2020/8/29/340">Linus Torvalds</a></li></ul></li><li><a href="/lkml/2020/8/29/382">David Rientjes</a></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Sat, 29 Aug 2020 10:54:47 -0700</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: Kernel 5.9-rc Regression: Boot failure with nvme</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">Just adding Christoph to the participants list, since at a guess it's<br />due to his changes whether they came from the nvme side or the dma<br />side..<br /><br />Christoph?<br /><br />                  Linus<br /><br />On Sat, Aug 29, 2020 at 10:06 AM Daniel Exner &lt;dex&#64;dragonslave.de&gt; wrote:<br />&gt;<br />&gt; Hi,<br />&gt;<br />&gt; (please keep me in the loop, as I'm currently not suscribed)<br />&gt;<br />&gt; both 5.9-rc1 and -rc2 fail to boot with my TOSHIBA-RD400 NVME:<br />&gt;<br />&gt; [    1.015590] ------------[ cut here ]------------<br />&gt; [    1.015594] WARNING: CPU: 7 PID: 99 at mm/page_alloc.c:4864<br />&gt; __alloc_pages_nodemask+0x299/0x330<br />&gt; [    1.015594] Modules linked in: syscopyarea xhci_pci(+)<br />&gt; xhci_pci_renesas sysfillrect xhci_hcd nvme aesni_intel(+) crypto_simd<br />&gt; sysimgblt fb_sys_fops cryptd nvme_core t10_pi glue_helper drm hwmon<br />&gt; scsi_mod agpgart i2c_core usbcore video wmi button dm_mirror<br />&gt; dm_region_hash dm_log dm_mod unix ipv6 autofs4<br />&gt; [    1.015602] CPU: 7 PID: 99 Comm: kworker/u16:1 Not tainted<br />&gt; 5.9.0-rc2-dirty #12<br />&gt; [    1.015603] Hardware name: To Be Filled By O.E.M. To Be Filled By<br />&gt; O.E.M./Z170 Gaming K6, BIOS P7.50 10/18/2018<br />&gt; [    1.015607] Workqueue: nvme-reset-wq nvme_reset_work [nvme]<br />&gt; [    1.015608] RIP: 0010:__alloc_pages_nodemask+0x299/0x330<br />&gt; [    1.015609] Code: 66 0f 85 46 ff ff ff e8 24 46 dd ff e9 3c ff ff ff<br />&gt; e8 4b 4f fc ff 48 89 c7 e9 ad fe ff ff 81 e5 00 20 00 00 0f 85 7b ff ff<br />&gt; ff &lt;0f&gt; 0b e9 74 ff ff ff 31 c0 e9 1b fe ff ff 65 48 8b 04 25 00 6d 01<br />&gt; [    1.015610] RSP: 0000:ffffb3ed002abcb8 EFLAGS: 00010246<br />&gt; [    1.015611] RAX: 0000000000000000 RBX: ffff9c8e827c4118 RCX:<br />&gt; 0000000000000000<br />&gt; [    1.015611] RDX: 0000000000000000 RSI: 0000000000000034 RDI:<br />&gt; 0000000000000cc0<br />&gt; [    1.015612] RBP: 0000000000000000 R08: 0000000000000000 R09:<br />&gt; ffffffffffffffff<br />&gt; [    1.015612] R10: 0000000000000006 R11: ffffb3ee002abb97 R12:<br />&gt; 0000000000000000<br />&gt; [    1.015613] R13: 0000000000000000 R14: ffff9c8e921060b0 R15:<br />&gt; 0000000000000cc0<br />&gt; [    1.015614] FS:  0000000000000000(0000) GS:ffff9c8e96bc0000(0000)<br />&gt; knlGS:0000000000000000<br />&gt; [    1.015615] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033<br />&gt; [    1.015615] CR2: 0000559988e2f4d8 CR3: 00000008433e4004 CR4:<br />&gt; 00000000003706e0<br />&gt; [    1.015616] DR0: 0000000000000000 DR1: 0000000000000000 DR2:<br />&gt; 0000000000000000<br />&gt; [    1.015617] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7:<br />&gt; 0000000000000400<br />&gt; [    1.015617] Call Trace:<br />&gt; [    1.015621]  dma_direct_alloc_pages+0x1e9/0x2c0<br />&gt; [    1.015623]  ? pci_alloc_irq_vectors_affinity+0xa5/0x100<br />&gt; [    1.015626]  nvme_alloc_queue+0x10a/0x170 [nvme]<br />&gt; [    1.015629]  nvme_reset_work+0x70b/0x12b0 [nvme]<br />&gt; [    1.015631]  ? nvme_irq_check+0x30/0x30 [nvme]<br />&gt; [    1.015634]  process_one_work+0x1da/0x3d0<br />&gt; [    1.015636]  worker_thread+0x4a/0x3c0<br />&gt; [    1.015637]  ? process_one_work+0x3d0/0x3d0<br />&gt; [    1.015638]  kthread+0x114/0x160<br />&gt; [    1.015640]  ? kthread_park+0x90/0x90<br />&gt; [    1.015641]  ret_from_fork+0x22/0x30<br />&gt; [    1.015643] ---[ end trace 268d4f4db1ef121e ]---<br />&gt;<br />&gt;<br />&gt; Resulting in:<br />&gt; [    1.015644] nvme nvme0: Removing after probe failure status: -12<br />&gt;<br />&gt; If you need more infos I can try to provide them.<br />&gt;<br />&gt; Greetings<br />&gt; Daniel<br />&gt;<br />&gt;<br />&gt;<br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
