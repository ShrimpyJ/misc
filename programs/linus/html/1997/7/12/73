    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/1997/7/12/62">First message in thread</a></li><li><a href="/lkml/1997/7/12/62">Bill Hawes</a><ul><li class="origin"><a href="/lkml/1997/7/13/8">Linus Torvalds</a><ul><li><a href="/lkml/1997/7/13/8">"Michael L. Galbraith"</a><ul><li><a href="/lkml/1997/7/13/29">Bill Hawes</a><ul><li><a href="/lkml/1997/7/14/6">Linus Torvalds</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/1997/7/13/65">Michael Harnois</a></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Sat, 12 Jul 1997 21:47:33 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: pre-patch2.1.45-3 lookin' good</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Sat, 12 Jul 1997, Bill Hawes wrote:<br />&gt;<br />&gt; The dcache in pre-patch 2.1.45-3 is much improved -- it seems to be<br />&gt; releasing some inodes now, enough so that I can copy kernel source trees<br />&gt; and run diff -ru in a 6M machine.<br /><br />It's definitely not very good, though. There is still a major memory leak,<br />and it can leak diskspace too (fixed by the fsck that invariably triggers<br />at the next reboot, but still a problem).<br /><br />&gt;				  A nasty bug triggered by removing<br />&gt; busy files also has disappeared.<br /><br />Yes, that bug was due to the way we removed the dentry even though we<br />really shouldn't have (the inode associated with the dentry was still in<br />use when we severed the connection). Thanks to the half-working garbage<br />collection, the new dcache could do this the right way. <br /><br />&gt; One minor problem I'm having -- after I mount and umount a volume,<br />&gt; there's still an inode held on the volume, so I can't mount it again.<br />&gt; Is there a call to invalidate the dcache for a device?<br /><br />Not yet. That is going to be easy once I get the garbage collection to be<br />correct, right now it's "getting close", but it's not there yet.. <br /><br />I'll make another pre-patch that gets some more cases correct (notably<br />when it comes to file deletion), but it still won't fix the obvious<br />problems with unmounting.<br /><br />		Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
