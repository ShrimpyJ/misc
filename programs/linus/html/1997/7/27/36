    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/1997/7/27/5">First message in thread</a></li><li><a href="/lkml/1997/7/27/5">a sun</a><ul><li class="origin"><a href="">(Linus Torvalds)</a></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">(Linus Torvalds)</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: happiness and joy w/ 2.1.47 (or problems w/ access())</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">27 Jul 1997 19:58:17 GMT</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">In article &lt;199707270708.AAA11715&#64;zoogx.zoology.washington.edu&gt;,<br />a sun  &lt;asun&#64;zoology.washington.edu&gt; wrote:<br />&gt;<br />&gt;it looks like 2.1.47 still hasn't achieved dentry<br />&gt;perfection. access("file/.", F_OK) returns 0 despite the fact that<br />&gt;"file" is not a directory. even better, this only happens for root as<br />&gt;far as i can tell.<br /><br />No, it happens for everybody, but the file has to be executable (except<br />for root). <br /><br />The reason is simply that the "." and ".." special cases were handled<br />before we even tested that it was a directory. <br /><br />So with 2.1.47, do this:<br /><br />	touch normal_file<br />	chmod +x normal_file<br />	ls normal_file/..<br /><br />and you'll see a directory listing of the current directory: ".." of a<br />file is the directory it is in ;)<br /><br />You can also do<br /><br />	echo hello &gt; normal_file<br />	cat normal_file/<br /><br />and you'll get "hello".  This behaviour (together with the "." and ".."<br />handling) is actually all very orthogonal if you look at it the right<br />way: think of the slash as just a separator in the name space, not as a<br />"directory" thing, and "." and ".." as just ways to move in the name<br />space rather than in a "directory hierarchy".<br /><br />So I could just call this a very strange feature, but I guess I'd better<br />not.  Especially as it's very likely against various standards, POSIX<br />being just one of them. <br /><br />The "." and ".." are truly trivial to fix (they are fixed in my current<br />sources, so that particular feature will be gone in 2.1.48).<br /><br />The trailing slash handling is not hard, but it is made less trivial by<br />the fact that the rules for trailing slashes are by no means obvious -<br />some of the rules are totally arbitrary rules laid down by committees<br />(POSIX). So instead of just organizing the sources to automatically get<br />the trailing slashes right I will have to add silly rules for special<br />cases. <br /><br />&gt;also, i've been trying to track down a problem w/ a program that's<br />&gt;dying on me. it's generating an exception for which i would like to<br />&gt;figure out the cause. is there a way to transmogrify the exception<br />&gt;address into something useful like the calling function?<br /><br />Is this a kernel dump? Use "ksymoops" from linux/scripts/.<br /><br />		Linus<br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
