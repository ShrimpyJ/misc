    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2005/7/26/213">First message in thread</a></li><li class="origin"><a href="/lkml/2005/7/26/226">Linus Torvalds</a><ul><li><a href="/lkml/2005/7/26/226">Diego Calleja</a></li><li><a href="/lkml/2005/7/27/31">David Woodhouse</a><ul><li><a href="/lkml/2005/7/27/93">Linus Torvalds</a><ul><li><a href="/lkml/2005/7/27/123">David Woodhouse</a><ul><li><a href="/lkml/2005/7/27/104">Linus Torvalds</a></li></ul></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Tue, 26 Jul 2005 11:57:43 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Linux BKCVS kernel history git import..</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br />Ok, I'm uploading my current git CVS import results to kernel.org right<br />now, which is my current best effort (meaning: I may try to improve on it<br />even if there aren't any more cvsps bugs/features I have to fix, and<br />obviously I'll re-create it if there _are_ cvsps or cvsimport bugs that<br />cause the import to have problems).<br /><br />I've "verified" it in the sense that I've done a "git-whatchanged -p" at<br />various stages of the import, and it looked sane. I also compared doing a<br />tar-tree-export of the 2.6.12-rc2 release, which exists both in my current<br />git tree _and_ in the old bkcvs tree, and they compared identically apart<br />from the fact that the bkcvs tree has the BitKeeper/ directory and a<br />ChangeSet file.<br /><br />It's also pretty aggressively packed - I used "--window=50 --depth=50"  <br />(rather than the default 10 for both) to make the archive smaller, so it's<br />going to be somewhat more CPU-intensive to use (due to the possibly longer<br />delta chains), but it got the pack-file down from 204MB to 166MB, which I<br />think is pretty damn good for three years of history or whatever it is.<br /><br />Especially considering that a gzip -9'd tar-file of the 2.6.12-rc2 release<br />is 45MB all on its own, that archive is just 3.6 times a single tree.<br /><br />Of course, this _is_ the cvs import, which means that it's basically just<br />a straight-line linearization of the real BK history, but it's a pretty<br />good linearization and so it's certainly useful.<br /><br />If somebody adds some logic to "parse_commit()" to do the "fake parent"<br />thing, you can stitch the histories together and see the end result as one<br />big tree. Even without that, you can already do things like<br /><br />	git diff v2.6.10..v2.6.12<br /><br />(which crosses the BK-&gt;git transition) by just copying the 166MB pack-file <br />over, along with the tags that come with the thing. I've not verified it, <br />but if that doesn't work, then it's a git bug. It _should_ work.<br /><br />BIG NOTE! This is definitely one archive you want to "rsync" instead of<br />closing with a git repack. The unpacked archive is somewhere in the 2.4GB<br />region, and since I actually used a higher compression ratio than the<br />default, you'll transfer a smaller pack that way anyway.<br /><br />It will probably take a while to mirror out (in fact, as I write this, the<br />DSL upload just from my local machine out still has fifteen minutes to<br />go), but it should be visible out there soonish. Please holler if you find<br />any problems with the conversion, or if you just have suggestions for<br />improvments.<br /><br />It actually took something like 16 hours to do the conversion on my<br />machine (most of it appears to have been due to CVS being slow, the git<br />parts were quick), so I won't re-convert for any trivial things.<br /><br />I'm planning on doing the 2.4 tree too some day - either as a separate<br />branch in the same archive, or as a separate git archive, I haven't quite<br />decided yet. But I was more interested int he 2.6.x tree (for obvious<br />reasons), and before I do the 2.4.x one I'd like to give that tree some<br />time for people to check if the conversion was ok.<br /><br />One thing that could be verified, for example (but that I have _not_<br />done), is to do a few random "git diff v2.6.x..v2.6.y" and comparing the<br />result with the standard diffs that are out there. Just to verify that the<br />archive looks ok. I assume there is some "diff-compare" out there that can<br />handle the fact that the files are diffed in a different order (and with<br />different flags) etc.<br /><br />		Linus<br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.kernel.org<br />More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html">http://vger.kernel.org/majordomo-info.html</a><br />Please read the FAQ at  <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
