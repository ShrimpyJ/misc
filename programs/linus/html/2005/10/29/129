    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2005/10/28/133">First message in thread</a></li><li><a href="/lkml/2005/10/29/40">Boxer Gnome</a><ul><li><a href="/lkml/2005/10/29/41">Boxer Gnome</a><ul><li class="origin"><a href="">Linus Torvalds</a></li></ul></li></ul></li></ul><div class="threadlist">Patch in this message</div><ul class="threadlist"><li><a href="/lkml/diff/2005/10/29/129/1">Get diff 1</a></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Sat, 29 Oct 2005 10:18:11 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: boot ok,but reboot hang, from 2.6.10 to 2.6.14</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Sat, 29 Oct 2005, Boxer Gnome wrote:<br />&gt;<br />&gt; Sorry,I typed a little error.<br />&gt; <br />&gt; the"The 2.6.10-rc1-rc8 was still ok" should is "The 2.6.10-rc1-bk8 was still ok"<br /><br />Ok, thanks, you've been a hero.<br /><br />This cuts the changes down quite significantly. The shortlog between <br />rc1-bk8 and rc1-bk9 is (if I did everything right - since that's from the <br />BK days and I obviously don't have BK installed anywhere, I had to convert <br />things into git to make sense of it) appended.<br /><br />I _suspect_ it's the IDE changes: perhaps the fact that we enable IDE <br />"stroke" by default now, which unclips the IDE disk. Maybe the BIOS is <br />unhappy with that.<br /><br />In your "dmesg" for a modern kernel, do you get a message like<br /><br />	...: Host Protected Area detected.<br />		current capacity is .. sectors (.. MB)<br />		native  capacity is .. sectors (.. MB)<br /><br />if so, that's probably it, and you could try this patch.<br /><br />If that doesn't help, I can help you bisect the problem down to a smaller <br />patch, if you're willing to try some patches I'd send by email?<br /><br />		Linus<br /><br />---<br />Hacky patch for you to try with current kernel:<br /><br />diff --git a/drivers/ide/ide-disk.c b/drivers/ide/ide-disk.c<br />index 234f5de..71bead5 100644<br />--- a/drivers/ide/ide-disk.c<br />+++ b/drivers/ide/ide-disk.c<br />&#64;&#64; -498,6 +498,8 &#64;&#64; static inline void idedisk_check_hpa(ide<br /> 			 capacity, sectors_to_MB(capacity),<br /> 			 set_max, sectors_to_MB(set_max));<br /> <br />+	return;<br />+<br /> 	if (lba48)<br /> 		set_max = idedisk_set_max_address_ext(drive, set_max);<br /> 	else<br />---<br />shortlog between rc1-bk8 and rc1-bk9:<br />Andi Kleen:<br />      x86_64: Fix safe_smp_processor_id after genapic<br />      x86_64: Fix warning in genapic<br /><br />Andrew Morton:<br />      key_init ordering fix<br />      swapper_space warning suppression<br />      ext3 reservation: default to on<br />      convert pipefs to fs_initcall()<br /><br />Antonino Daplas:<br />      fbdev: Convert MODULE_PARM to module_param in i810fb<br />      fbdev: Remove module parameter 'disabled' from savagefb<br />      fbdev: Convert MODULE_PARM to module_param in intelfb<br />      fbdev: Convert MODULE_PARM to module_param in neofb<br />      fbdev: Fix io access in neofb<br />      fbdev: Add __iomem annotations to sstfb<br />      fbdev: Add __iomem annotations to tdfxfb<br />      fbdev: Do not memset the framebuffer memory in asiliantfb<br />      fbdev: Add __iomem annotations to cyber2000fb<br />      fbdev: Add __iomem annotations to pm2fb<br />      fbdev: Add __iomem annotations to hgafb<br />      fbdev: Add __iomem annotations to cirrusfb<br />      fbdev: Add __iomem annotations to vfb<br />      fbdev: Check if cursor image has changed in intelfb<br />      fbdev: Maintainership<br /><br />Bartlomiej Zolnierkiewicz:<br />      [ide] PIO bugfix<br />      [ide] remove hwif from /proc/ide/ as part of ide_unregister_hwif()<br />      [ide] hpt34x: kill hpt34x.h<br />      [ide] pmac: kill CONFIG_BLK_DEV_IDEDMA_PMAC_AUTO<br />      [ide] setup-pci: small ide_get_or_set_dma_base() cleanup<br />      [ide] setup-pci: simplify autodma logic<br />      [ide] kill IDEPCI_FLAG_FORCE_MASTER<br />      [ide] make destroy_proc_ide_interfaces static<br />      [ide] ide-disk: enable stroke by default<br />Benjamin Herrenschmidt:<br />      ppc32: Fix boot on PowerMac<br />      ppc64: Enable maple IDE fixup<br /><br />Chris Wright:<br />      uninline __sigqueue_alloc<br /><br />Daniel Jacobowitz:<br />      Unwind information fix for the vsyscall DSO<br /><br />Dmitry Torokhov:<br />      ik8.c: export power_status parameter through sysfs<br /><br />Hirokazu Takata:<br />      m32r: fix a typo of delay.c<br /><br />James Nelson:<br />      Documentation/cpqarray.txt update<br />      Documentation/mkdev.ida removal<br /><br />Linus Torvalds:<br />      Make x86 semaphore routines use register calling convention.<br />      Merge bk://bart.bkbits.net/ide-2.6<br />      Merge bk://bk.arm.linux.org.uk/linux-2.6-rmk<br /><br />Marcel Holtmann:<br />      Fix deprecated MODULE_PARM for CAPI subsystem<br /><br />Matt Porter:<br />      ppc32: fix ppc4xx_progress warnings<br /><br />Mingming Cao:<br />      ext3 block reservation patch set -- ext3 preallocation cleanup<br />      ext3 block reservations<br /><br />Olof Johansson:<br />      ppc64: setup cpu_sibling_map on iSeries<br /><br />Paolo \'Blaisorblade\' Giarrusso:<br />      uml: fix mainline lazyness about TTY layer patch<br /><br />Pavel Machek:<br />      Add typechecking to suspend types and powerdown types<br /><br />Robert Love:<br />      make dnotify a configure-time option<br /><br />Russell King:<br />      [ARM] Use cpu_vm_mask to indicate whether the MM is mapped.<br />      [ARM] Use cpu_vm_mask to determine whether to flush TLB/caches.<br />      [ARM] Add disable_irq_nosync() and CPU number headings<br />      [ARM] Remove extraneous spaces.<br />      [ARM] include/asm-arm/arch-integrator/time.h is unused, remove it.<br />      [ARM] Fix wrong variable name in icside.c<br /><br />Stephen C. Tweedie:<br />      ext3: online resizing<br /><br />Stephen Rothwell:<br />      ppc64 iSeries: fix for generic irq changes<br /><br />Toshihiro Iwamoto:<br />      direct IO write memory leak fix<br /><br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.kernel.org<br />More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html">http://vger.kernel.org/majordomo-info.html</a><br />Please read the FAQ at  <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
