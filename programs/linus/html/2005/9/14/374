    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2005/9/12/406">First message in thread</a></li><li><a href="/lkml/2005/9/12/406">Linus Torvalds</a><ul><li><a href="/lkml/2005/9/12/409">Alejandro Bonilla Beeche</a><ul><li><a href="/lkml/2005/9/12/412">Keith Owens</a><ul><li><a href="/lkml/2005/9/13/3">Alejandro Bonilla Beeche</a></li><li><a href="/lkml/2005/9/14/16">Alejandro Bonilla Beeche</a><ul><li><a href="/lkml/2005/9/14/204">Jeff Garzik</a></li><li><a href="/lkml/2005/9/14/211">Linus Torvalds</a></li><li><a href="/lkml/2005/9/14/409">Alejandro Bonilla Beeche</a></li></ul></li></ul></li><li><a href="/lkml/2005/9/13/147">Linus Torvalds</a></li></ul></li><li><a href="/lkml/2005/9/13/32">Cal Peake</a><ul><li><a href="/lkml/2005/9/13/311">Jean Delvare</a></li></ul></li><li><a href="/lkml/2005/9/13/33">Sonny Rao</a><ul><li><a href="/lkml/2005/9/13/46">Eric Dumazet</a><ul><li><a href="/lkml/2005/9/15/3">"David S. Miller"</a><ul><li><a href="/lkml/2005/9/15/6">Linus Torvalds</a></li></ul></li><li><a href="/lkml/2005/9/15/295">Benjamin LaHaise</a><ul><li><a href="/lkml/2005/9/15/302">Linus Torvalds</a></li><li><a href="/lkml/2005/9/15/307">Eric Dumazet</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/2005/9/13/51">"Udo A. Steinberg"</a></li><li><a href="/lkml/2005/9/13/92">Mathieu Fluhr</a><ul><li><a href="/lkml/2005/9/13/94">Helge Hafting</a></li><li><a href="/lkml/2005/9/13/164">Linus Torvalds</a></li><li><a href="/lkml/2005/9/13/234">Mathieu Fluhr</a><ul><li><a href="/lkml/2005/9/13/239">Linus Torvalds</a><ul><li><a href="/lkml/2005/9/13/263">Mathieu Fluhr</a></li></ul></li></ul></li><li><a href="/lkml/2005/9/14/395">Redeeman</a></li></ul></li><li><a href="/lkml/2005/9/13/271">Roland Dreier</a><ul><li><a href="/lkml/2005/9/13/277">Linus Torvalds</a><ul><li><a href="/lkml/2005/9/13/345">Horst von Brand</a></li></ul></li></ul></li><li><a href="/lkml/2005/9/13/306">"Rafael J. Wysocki"</a></li><li><a href="/lkml/2005/9/14/166">Bill Davidsen</a><ul><li><a href="/lkml/2005/9/14/387">Matthew Garrett</a></li></ul></li><li><a href="/lkml/2005/9/14/234">Bill Davidsen</a><ul><li><a href="/lkml/2005/9/14/239">Bill Davidsen</a></li></ul></li><li><a href="/lkml/2005/9/14/340">Henrik Persson</a><ul><li><a href="/lkml/2005/9/14/392">Jesper Juhl</a><ul><li><a href="/lkml/2005/9/16/182">Henrik Persson</a></li></ul></li></ul></li><li><a href="/lkml/2005/9/14/358">Peter Osterlund</a><ul><li class="origin"><a href="/lkml/2005/9/14/381">Linus Torvalds</a><ul><li><a href="/lkml/2005/9/14/381">Peter Osterlund</a></li></ul></li></ul></li><li><a href="/lkml/2005/9/14/394">Redeeman</a></li><li><a href="/lkml/2005/9/16/57">Tomasz Torcz</a></li></ul></li></ul><div class="threadlist">Patch in this message</div><ul class="threadlist"><li><a href="/lkml/diff/2005/9/14/374/1">Get diff 1</a></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Wed, 14 Sep 2005 15:27:19 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: 2.6.14-rc1 on ATI hangs when executing _STA and _INI methods</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Wed, 15 Sep 2005, Peter Osterlund wrote:<br />&gt; <br />&gt; My Compaq Presario R3057EA hangs during ACPI initialization. The last<br />&gt; message is "Executing all Device _STA and _INI methods". git bisect<br />&gt; told me that:<br />&gt; <br />&gt;   66759a01adbfe8828dd063e32cf5ed3f46696181 is first bad commit<br />&gt;   diff-tree 66759a01adbfe8828dd063e32cf5ed3f46696181 (from 049cdefe19f95b67b06b70915cd8e4ae7173337a)<br />&gt;   Author: Chuck Ebbert &lt;76306.1226&#64;compuserve.com&gt;<br />&gt;   Date:   Mon Sep 12 18:49:25 2005 +0200<br />&gt; <br />&gt;     [PATCH] x86-64: i386/x86-64: Fix time going twice as fast problem on ATI Xpress chipsets<br />&gt; <br />&gt; Passing enable_timer_pin_1 as a kernel boot parameter doesn't help,<br />&gt; but this patch does:<br /><br />Ok. That patch has been one big pain, and was clearly totally half-baked.  <br />I think I'll disable the automated checks, since they are clearly wrong.<br />You can still enable it manually with a kernel command line.<br /><br />So something like this.. I assume this works for you?<br /><br />		Linus<br /><br />----<br />diff --git a/arch/i386/kernel/acpi/earlyquirk.c b/arch/i386/kernel/acpi/earlyquirk.c<br />--- a/arch/i386/kernel/acpi/earlyquirk.c<br />+++ b/arch/i386/kernel/acpi/earlyquirk.c<br />&#64;&#64; -7,7 +7,6 &#64;&#64;<br /> #include &lt;linux/pci.h&gt;<br /> #include &lt;asm/pci-direct.h&gt;<br /> #include &lt;asm/acpi.h&gt;<br />-#include &lt;asm/apic.h&gt;<br /> <br /> static int __init check_bridge(int vendor, int device)<br /> {<br />&#64;&#64; -16,15 +15,6 &#64;&#64; static int __init check_bridge(int vendo<br /> 	if (vendor == PCI_VENDOR_ID_NVIDIA) {<br /> 		acpi_skip_timer_override = 1;<br /> 	}<br />-#ifdef CONFIG_X86_LOCAL_APIC<br />-	/*<br />-	 * ATI IXP chipsets get double timer interrupts.<br />-	 * For now just do this for all ATI chipsets.<br />- 	 * FIXME: this needs to be checked for the non ACPI case too.<br />-	 */<br />-	if (vendor == PCI_VENDOR_ID_ATI)<br />-		disable_timer_pin_1 = 1;<br />-#endif<br /> 	return 0;<br /> }<br /> <br />diff --git a/arch/x86_64/kernel/io_apic.c b/arch/x86_64/kernel/io_apic.c<br />--- a/arch/x86_64/kernel/io_apic.c<br />+++ b/arch/x86_64/kernel/io_apic.c<br />&#64;&#64; -299,15 +299,6 &#64;&#64; void __init check_ioapic(void) <br /> #endif<br /> 					/* RED-PEN skip them on mptables too? */<br /> 					return;<br />-				case PCI_VENDOR_ID_ATI:<br />-					/* All timer interrupts on atiixp<br />-				           are doubled. Disable one. */<br />-					if (disable_timer_pin_1 == 0) {<br />-						disable_timer_pin_1 = 1;<br />-						printk(KERN_INFO<br />-		"ATI board detected. Disabling timer pin 1.\n");<br />-					}<br />-					return;<br /> 				} <br /> <br /> 				/* No multi-function device? */<br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.kernel.org<br />More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html">http://vger.kernel.org/majordomo-info.html</a><br />Please read the FAQ at  <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
