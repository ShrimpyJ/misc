    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2013/10/14/431">First message in thread</a></li><li><a href="/lkml/2013/10/25/114">Linus Torvalds</a><ul><li><a href="/lkml/2013/10/26/47">Ingo Molnar</a><ul><li><a href="/lkml/2013/10/28/344">Knut Petersen</a><ul><li><a href="/lkml/2013/10/28/369">Ingo Molnar</a><ul><li><a href="/lkml/2013/10/28/370">Ingo Molnar</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/2013/10/27/156">Linus Torvalds</a><ul><li class="origin"><a href="/lkml/2013/10/27/164">Linus Torvalds</a><ul><li><a href="/lkml/2013/10/27/164">Linus Torvalds</a><ul><li><a href="/lkml/2013/10/27/166">Greg Kroah-Hartman</a></li></ul></li><li><a href="/lkml/2013/10/30/385">Pablo Neira Ayuso</a></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Sun, 27 Oct 2013 20:39:47 +0000</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [BUG 3.12.rc4] Oops: unable to handle kernel paging request during shutdown</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">On Sun, Oct 27, 2013 at 8:20 PM, Linus Torvalds<br />&lt;torvalds&#64;linux-foundation.org&gt; wrote:<br />&gt;<br />&gt; Appended is a warning I get with DEBUG_TIMER_OBJECTS. Seems to be a<br />&gt; device-mapper issue.<br /><br />.. and here's another one. This time it looks like nf_conntrack_free()<br />is freeing something that has a delayed work in it (again, likely an<br />embedded 'struct kobject'). Looks like it is the<br /><br />    kmem_cache_destroy(net-&gt;ct.nf_conntrack_cachep);<br /><br />that triggers this. Which probably means that there are still slab<br />entries on that slab cache or something, but I didn't dig any deeper..<br /><br />David? Patrick? Pablo? Jozsef? Any ideas? This was immediately preceded by<br /><br />  [ 1136.316280] kobject: 'nf_conntrack_ffff8800b74d0000'<br />(ffff8801196fac78): kobject_uevent_env<br />  [ 1136.316287] kobject: 'nf_conntrack_ffff8800b74d0000'<br />(ffff8801196fac78): fill_kobj_path: path =<br />'/kernel/slab/nf_conntrack_ffff8800b74d0000'<br />  [ 1136.316331] kobject: 'nf_conntrack_ffff8800b74d0000'<br />(ffff8801196fac78): kobject_release, parent           (null) (delayed)<br /><br />and I think it's that delayed "kobject_release()" that triggers this.<br /><br />Notice that kobject_release() can be delayed *without* the magic<br />kobject debugging option by simply having a reference count on it from<br />some external source. So this particular issue is probably triggered<br />by my extra debug options in this case (I'm running with all those<br />nasty "try to find bad object freeing" options, and doing module<br />unloading etc), but can happen without it (it's just very hard to<br />trigger in practice without the debug options).<br /><br />             Linus<br /><br />---<br />[ 1136.321294] ------------[ cut here ]------------<br />[ 1136.321305] WARNING: CPU: 2 PID: 2483 at lib/debugobjects.c:260<br />debug_print_object+0x83/0xa0()<br />[ 1136.321311] ODEBUG: free active (active state 0) object type:<br />timer_list hint: delayed_work_timer_fn+0x0/0x20<br />[ 1136.321313] Modules linked in: fuse nf_conntrack_netbios_ns<br />nf_conntrack_broadcast ipt_MASQUERADE ip6t_REJECT xt_conntrack bnep<br />bluetooth ebtable_nat ebt<br />[ 1136.321357]  mfd_core mei snd_page_alloc snd_timer snd soundcore<br />sony_laptop rfkill uinput dm_crypt crc32_pclmul crc32c_intel i915<br />i2c_algo_bit drm_kms_h<br />[ 1136.321371] CPU: 2 PID: 2483 Comm: kworker/u8:2 Tainted: G        W<br />   3.12.0-rc6-00331-ga2ff82065b5b #2<br />[ 1136.321373] Hardware name: Sony Corporation SVP11213CXB/VAIO, BIOS<br />R0270V7 05/17/2013<br />[ 1136.321378] Workqueue: netns cleanup_net<br />[ 1136.321380]  0000000000000009 ffff8800a86cdbc8 ffffffff8160d4a2<br />ffff8800a86cdc10<br />[ 1136.321384]  ffff8800a86cdc00 ffffffff810514e8 ffff8800b745f848<br />ffffffff81c365e0<br />[ 1136.321387]  ffffffff819f9133 ffffffff81f34750 0000000000000001<br />ffff8800a86cdc60<br />[ 1136.321390] Call Trace:<br />[ 1136.321398]  [&lt;ffffffff8160d4a2&gt;] dump_stack+0x45/0x56<br />[ 1136.321405]  [&lt;ffffffff810514e8&gt;] warn_slowpath_common+0x78/0xa0<br />[ 1136.321410]  [&lt;ffffffff81051557&gt;] warn_slowpath_fmt+0x47/0x50<br />[ 1136.321414]  [&lt;ffffffff812f8883&gt;] debug_print_object+0x83/0xa0<br />[ 1136.321420]  [&lt;ffffffff8106aa90&gt;] ? execute_in_process_context+0x90/0x90<br />[ 1136.321424]  [&lt;ffffffff812f99fb&gt;] debug_check_no_obj_freed+0x20b/0x250<br />[ 1136.321429]  [&lt;ffffffff8112e7f2&gt;] ? kmem_cache_destroy+0x92/0x100<br />[ 1136.321433]  [&lt;ffffffff8115d945&gt;] kmem_cache_free+0x125/0x210<br />[ 1136.321436]  [&lt;ffffffff8112e7f2&gt;] kmem_cache_destroy+0x92/0x100<br />[ 1136.321443]  [&lt;ffffffffa046b806&gt;]<br />nf_conntrack_cleanup_net_list+0x126/0x160 [nf_conntrack]<br />[ 1136.321449]  [&lt;ffffffffa046c43d&gt;]<br />nf_conntrack_pernet_exit+0x6d/0x80 [nf_conntrack]<br />[ 1136.321453]  [&lt;ffffffff81511cc3&gt;] ops_exit_list.isra.3+0x53/0x60<br />[ 1136.321457]  [&lt;ffffffff815124f0&gt;] cleanup_net+0x100/0x1b0<br />[ 1136.321460]  [&lt;ffffffff8106b31e&gt;] process_one_work+0x18e/0x430<br />[ 1136.321463]  [&lt;ffffffff8106bf49&gt;] worker_thread+0x119/0x390<br />[ 1136.321467]  [&lt;ffffffff8106be30&gt;] ? manage_workers.isra.23+0x2a0/0x2a0<br />[ 1136.321470]  [&lt;ffffffff8107210b&gt;] kthread+0xbb/0xc0<br />[ 1136.321472]  [&lt;ffffffff81072050&gt;] ? kthread_create_on_node+0x110/0x110<br />[ 1136.321477]  [&lt;ffffffff8161b8fc&gt;] ret_from_fork+0x7c/0xb0<br />[ 1136.321479]  [&lt;ffffffff81072050&gt;] ? kthread_create_on_node+0x110/0x110<br />[ 1136.321481] ---[ end trace 25f53c192da70825 ]---<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
