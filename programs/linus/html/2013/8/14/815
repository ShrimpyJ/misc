    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2013/8/9/294">First message in thread</a></li><li><a href="/lkml/2013/8/14/457">Linus Torvalds</a><ul><li><a href="/lkml/2013/8/14/639">Michal Hocko</a><ul><li class="origin"><a href="/lkml/2013/8/15/122">Linus Torvalds</a><ul><li><a href="/lkml/2013/8/15/122">Ben Tebulin</a><ul><li><a href="/lkml/2013/8/15/186">Linus Torvalds</a></li></ul></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Wed, 14 Aug 2013 11:35:20 -0700</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [Bug] Reproducible data corruption on i5-3340M: Please revert 53a59fc67!</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">On Wed, Aug 14, 2013 at 11:28 AM, Michal Hocko &lt;mhocko&#64;suse.cz&gt; wrote:<br />&gt;<br />&gt; OK that would suggest the issue has been introduced by 597e1c35:<br />&gt; (mm/mmu_gather: enable tlb flush range in generic mmu_gather) in 3.6<br />&gt; which is not 3.7 when Ben started seeing the issue but this definitely<br />&gt; smells like a bug that would be amplified by the bisected patch.<br /><br />Yes, the bug was originally introduced in 597e1c35, but in practice it<br />never happened, because the force_flush case would not ever really<br />trigger unless __get_free_pages(GFP_NOWAIT) returned NULL.<br /><br />Which is *very* rare.<br /><br />So the commit that Ben bisected things down to wasn't the one that<br />really introduced the bug, but it was the one that made<br />tlb_next_batch() much more likely to return failure, which in turn<br />made it much easier to *expose* the bug.<br /><br />NOTE! I still absolutely want Ben to actually test that fix (ie<br />backport commit e6c495a96ce0 to his tree), because without testing<br />this is all just theoretical, and there might be other things hiding<br />here. But it makes sense to me, and I think this already-known bug<br />explains the symptoms.<br /><br />                    Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
