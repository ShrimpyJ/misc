    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2002/11/27/8">First message in thread</a></li><li><a href="/lkml/2002/11/27/8">Stephen Rothwell</a><ul><li><a href="/lkml/2002/11/27/9">"David S. Miller"</a><ul><li><a href="/lkml/2002/11/27/67">Stephen Rothwell</a><ul><li><a href="/lkml/2002/11/28/4">"David S. Miller"</a></li></ul></li><li class="origin"><a href="/lkml/2002/11/28/7">Linus Torvalds</a><ul><li><a href="/lkml/2002/11/28/7">"David S. Miller"</a></li></ul></li></ul></li><li><a href="/lkml/2002/11/27/10">David Mosberger</a><ul><li><a href="/lkml/2002/11/27/12">"David S. Miller"</a></li><li><a href="/lkml/2002/11/27/15">Andi Kleen</a><ul><li><a href="/lkml/2002/11/27/21">David Mosberger</a><ul><li><a href="/lkml/2002/11/27/23">Andi Kleen</a></li><li><a href="/lkml/2002/11/27/28">"David S. Miller"</a></li></ul></li><li><a href="/lkml/2002/11/27/59">Alan Cox</a></li><li><a href="/lkml/2002/11/30/73">Ralf Baechle</a></li></ul></li></ul></li><li><a href="/lkml/2002/11/27/110">Linus Torvalds</a><ul><li><a href="/lkml/2002/11/28/2">Stephen Rothwell</a><ul><li><a href="/lkml/2002/11/28/3">"David S. Miller"</a><ul><li><a href="/lkml/2002/11/28/171">Stephen Rothwell</a></li><li><a href="/lkml/2002/12/1/61">Linus Torvalds</a></li></ul></li></ul></li><li><a href="/lkml/2002/11/28/5">"David S. Miller"</a><ul><li><a href="/lkml/2002/11/28/182">Stephen Rothwell</a><ul><li><a href="/lkml/2002/11/28/184">Stephen Rothwell</a></li></ul></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Wed, 27 Nov 2002 10:51:54 -0800 (PST)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [PATCH] Start of compat32.h (again)</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br />On Tue, 26 Nov 2002, David S. Miller wrote:<br />&gt; <br />&gt; Linus what is you big beef with the names used before, the "__kernel"<br />&gt; part of the name?  We can't just use "u32" for ino_t althroughout the<br />&gt; compat32 code or whatever your idea seems to be.<br /><br />I have two _big_ beefs with the <br /><br />	__kernel_xxx_t32<br /><br />naming:<br /><br /> - the xxx_t naming is already ugly, but at least it's standard ("_t <br />   stands for typedef"). No such case is true for _t32.<br /><br /> - the __kernel_ naming is already ugly, but at least it has a _reason_ <br />   for it, namely that we have to have __ to avoid polluting user-space<br />   headers with the _one_ thing that the kernel exports, namely<br />   architecture types. Again, this is _not_ true for the compat32 stuff, <br />   since it's an ABI, not an API issue, and the types aren't exposed to<br />   user space headers.<br /><br />In short, it's f*cking ugly, for no good reason.  That in itself is _way_ <br />enough reason to say "No FRIGGING WAY!".<br /><br />The original patch was worse by an order of magnitude for _another_ <br />reason, which has nothing to do with naming:<br /><br />Note that I'm not against having architecture-specific "compat32 types". <br />HOWEVER, if they are architecture-specific, then they had better not be in <br />a generic file. So it's just _fundamentally_ wrong to have a &lt;linux/xxx.h&gt; <br />file that then has "architecture-specific" stuff in it. That's just CRAP.<br /><br />So the naming is just ugly (but ugly enough that I don't want to see it). <br />The real crap is having a architecture-independent file that defines <br />non-generic types.<br /><br />I suspect that the correct way to do things is:<br /><br /> - have an &lt;asm/compat32.h&gt; for the types. The types _are_ different for <br />   different architectures, even if 90% of them look really really <br />   similar. It's just not worth it trying to share code that is not <br />   fundamentally the same - and in this case it isn't.<br /><br />   This fixes the fundamental objection I had to &lt;linux/compat32.h&gt;<br /><br /> - use sane naming. Something like "compat32_nlink_t" is sane. Something <br />   like "__kernel_nlink_t32" is not.<br /><br />You might as well also discuss just dropping the "32" from "compat32"  <br />while you're at it. As far as I can tell the code and the fundamental<br />issue has nothing to do with 32-bitness per se. It has everything to do<br />with compatibility with an older ABI. The 32-bitness is a implementation<br />detail, there's nothing that fundamentally says the same compat code might<br />not work with a 64(user)-&gt;128(kernel) bit (or a 16-&gt;32 bit) compatibility<br />layer.<br /><br />			Linus<br /><br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.kernel.org<br />More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html">http://vger.kernel.org/majordomo-info.html</a><br />Please read the FAQ at  <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
