    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2002/8/31/103">First message in thread</a></li><li class="origin"><a href="/lkml/2002/9/2/86">Linus Torvalds</a><ul><li><a href="/lkml/2002/9/2/86">Remco Post</a><ul><li><a href="/lkml/2002/9/2/142">Tom Rini</a><ul><li><a href="/lkml/2002/9/2/144">Remco Post</a></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Sat, 31 Aug 2002 15:22:31 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Linux v2.5.33</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br />There's a fair amount of stuff in here again, but I'd personally like to <br />have people who actually use that d*ng floppy driver please test it out. I <br />finally broke down and tried to fix it, since it's been broken in 2.5.x <br />for longer than most people care to remember.<br /><br />I don't even have floppies to test with, I just verified that I could read<br />two old backup disks, and one seemed fine, and the other read 90% of the<br />thing, which was a lot more than I expected since they are both at least<br />five years old. I've never had good luck with those unreliable 3.5"  <br />things, I'd rather have as little to do with them as possible.<br /><br />Anyway, apart from floppies, this has the IDE organizational cleanups by<br />Al, another merge with Andrew, and some new networking stuff (TCP<br />segmentation offload onto network cards, and initial cut of SCTP support).<br /><br />And NTFS, JFS, and of course USB updates. Oh, and some of the keyboard <br />input stuff should fix some random breakage in the input switchover.<br /><br />		Linus<br /><br />----<br /><br />Summary of changes from v2.5.32 to v2.5.33<br />============================================<br /><br />&lt;ahaas&#64;neosoft.com&gt;:<br />  o designated initializer patches for include_asm-i386,<br />    fs_nls and kernel_dma.c<br /><br />&lt;alan&#64;redhat.com&gt;:<br />  o Re: Make CONFIG_VIDEO_RPOC_FS depend on CONFIG_PROC_FS<br /><br />&lt;bart.de.schuymer&#64;pandora.be&gt;:<br />  o update comments in ip_tables.c<br /><br />&lt;cel&#64;citi.umich.edu&gt;:<br />  o prevent oops in xprt_lock_write, against 2.5.32<br />  o sock_writeable not appropriate for TCP sockets, for 2.5.32<br /><br />&lt;colpatch&#64;us.ibm.com&gt;:<br />  o i386 ksyms cleanup<br />  o PCI Cleanup<br />  o Fixed NUMA-Q PCI patch<br /><br />&lt;dan&#64;debian.org&gt;:<br />  o ptrace exit fix<br /><br />&lt;davids&#64;youknow.youwant.to&gt;:<br />  o Trivial Patch to SonyCD535 documentation<br /><br />&lt;devel&#64;brodo.de&gt;:<br />  o include/asm-i386/msr.h<br /><br />&lt;gerg&#64;snapgear.com&gt;:<br />  o trivial mtdblock.c fix<br /><br />&lt;hch&#64;lst.de&gt;:<br />  o Add ETHTOOL_GDRVINFO ioctl support to several pcmcia net drivers,<br />    and one USB net driver:  3c574_cs, ibmtr_cs, pcnet_cs, ray_cs,<br />    xirc2ps_cs, xircom_cb, and usb/net/kaweth<br /><br />&lt;james&#64;cobaltmountain.com&gt;:<br />  o typo fixes: the the, resourses, wierd, becaus(e), whish,<br />    capitalization<br /><br />&lt;jgrimm&#64;touki.austin.ibm.com&gt;:<br />  o Support MSG_ABORT (the abort primitive) to do a non-graceful<br />    shutdown of an association<br />  o Update statetable for prm ABORT and prm SHUTDOWN in the closed<br />    state (this should turn into an error just like we do in prm SEND)<br /><br />&lt;jgrimm&#64;touki.qip.austin.ibm.com&gt;:<br />  o lksctp-2_5_31-0_5_1.patch<br /><br />&lt;johnpol&#64;2ka.mipt.ru&gt;:<br />  o drivers_scsi_NCR53C9x_c synchronize_irq() fix<br />  o drivers_net_sb1250-mac_c synchronize_irq() fix<br /><br />&lt;manik&#64;cisco.com&gt;:<br />  o [TRIVIAL PATCH] { 2.5.30 } : removing redundant variable<br />    frominit_main.c<br /><br />&lt;pwaechtler&#64;mac.com&gt;:<br />  o OSS convert cli to spinlocks<br /><br />&lt;sam&#64;ravnborg.org&gt;:<br />  o kerneldoc: In kernel-hacking describe designated initialisers<br /><br />&lt;t-kouchi&#64;mvf.biglobe.ne.jp&gt;:<br />  o ia64: IRQ cleanup patch for 2.5.30<br /><br />&lt;thockin&#64;freakshow.cobalt.com&gt;:<br />  o Add Cobalt Networks support to nvram driver export nvram interfaces<br />    general cleanup of nvram driver protect nvram state with a lock fix<br />    nvram O_EXCL hack to actually work<br /><br />&lt;willy&#64;debian.org&gt;:<br />  o More support for upward growing stacks<br />  o reintroduce close() optimisation<br />  o push the BKL down in setfl<br /><br />Alexander Viro &lt;viro&#64;math.psu.edu&gt;:<br />  o move stuff from ide_register_subdriver() to ide-probe.c<br />  o finish introduction of -&gt;reinit()<br />  o put IDE drives on lists<br />  o move media_type checks from ide_scan_devices() to -&gt;reinit<br />  o Remove duplicate calls to ide_cdrom_init(), idedisk_init(), etc<br />  o per-drive IDE deregistration<br />  o Add -&gt;owner to ide_driver_t<br />  o turn ide_reinit_drive() into ata_attach()<br />  o Remove unused high-level IDE -&gt;init method<br />  o put ide_driver_t on lists<br />  o move add_gendisk()/del_gendisk() into -&gt;reinit() and -&gt;cleanup()<br /><br />Alexey Kuznetsov &lt;kuznet&#64;ms2.inr.ac.ru&gt;:<br />  o [NET]: Add TCP segmentation offload core infrastructure<br />  o [NET]: Add TCP segmentation offload support to e1000<br />  o [NET]: Add segmentation offload support to TCP<br /><br />Andrew Morton &lt;akpm&#64;zip.com.au&gt;:<br />  o minor page_alloc.c things<br />  o reduced TLB invalidation rate<br />  o better buffer_head slab packing<br />  o rename zone_struct and zonelist_struct, kill zone_t and<br />  o per-zone-LRU<br />  o per-zone LRU locking<br />  o add L1_CACHE_SHIFT_MAX<br />  o ensure that the per-zone locks fall in separate cachelines<br />  o debug check in put_page_testzero()<br />  o remove pagevec_lru_del()<br />  o put_page() consolidation<br />  o batched freeing of anon pages<br />  o writeback correctness and efficiency changes<br />  o fix an ext3 deadlock<br />  o O_DIRECT for ext3<br />  o ext3 __FUNCTION__ pasting fix<br /><br />Andy Grover &lt;agrover&#64;groveronline.com&gt;:<br />  o Add arch-neutral support for parsing SLIT and SRAT tables (Kochi<br />    Takayoshi)<br />  o There are a few problems with ACPI init. One of these is that<br />    acpi=off will disable the ACPI interpreter init, but not stop the<br />    OS from using ACPI tables for finding CPUs and IOAPICs. Another<br />    problem is that if we use the tables, but then the interpreter<br />    fails to init, we are in deep trouble, because it is too late to<br />    revert to using MPS, but we cannot get _PRT info without the<br />    interpreter.<br />  o local_irq_disable is extraneous (Matthew Wilcox)<br />  o Ensure that the ACPI interrupt has the proper trigger and polarity<br />  o ACPI Remove unused file<br />  o ACPI interpreter update<br /><br />Anton Altaparmakov &lt;aia21&#64;cantab.net&gt;:<br />  o NTFS: Add configuration option for developmental write support<br />  o NTFS: Initial implementation of mmap(2) based overwriting<br />  o NTFS: Fix silly bug in ntfs_write_block(). iblock and dblock have<br />    different semantics so the check was bogus. Compare the byte sizes<br />    instead.<br />  o NTFS: Cleanups, mostly whitespace. Found during resync with 2.4<br />    backport<br />  o NTFS: Initial implementation of write(2) based overwriting of<br />    existing files on ntfs. (Note: Resident files are not supported<br />    yet, so avoid writing to files smaller than 1kiB.)<br />  o NTFS: 2.1.0 - First steps towards write support: implement file<br />    overwrite<br />  o NTFS: Add ifdef NTFS_RW arround ntfs_truncate and ntfs_setattr<br /><br />Anton Blanchard &lt;anton&#64;samba.org&gt;:<br />  o compile fix for st.c<br /><br />Brad Hards &lt;bhards&#64;bigpond.net.au&gt;:<br />  o header cleanup - drivers_mtd_devices_blkmtd.c<br />  o header cleanup - drivers_bluetooth_hci_ldisc.c<br />  o Re: header cleanup - drivers_macintosh_via-pmu.c<br />  o header cleanup - drivers_char_drm_mga_state.c<br /><br />Dave Kleikamp &lt;shaggy&#64;kleikamp.austin.ibm.com&gt;:<br />  o JFS: rework extent invalidation<br />  o JFS extended attributes<br />  o JFS: Add write_super_lockfs() and unlock_fs() for snapshot<br />  o Proper implementation of jfs_get_blocks<br /><br />David Brownell &lt;david-b&#64;pacbell.net&gt;:<br />  o Documentation/usb/{o,u}hci.txt<br />  o usb/core/hcd-pci, pci cleanup<br />  o USB dma and scatterlists<br />  o ehci, registers to driverfs (for debug)<br />  o ohci on sparc64<br />  o show pci_pool stats in driverfs]<br /><br />David Gibson &lt;david&#64;gibson.dropbear.id.au&gt;:<br />  o Fix for magic sysrq when CONFIG_VT=n<br /><br />David Mosberger &lt;davidm&#64;napali.hpl.hp.com&gt;:<br />  o efi.h move<br />  o ia64: Delete include/asm-ia64/efi.h (it got moved to include/linux)<br />  o ia64: Make v2.5.32 compile<br />  o ia64: Remove unnecessary &lt;linux/config.h&gt; include<br />  o ia64: Fix I/O macros in asm-ia64/io.h.  Based on patch by Andreas<br />    Schwab<br />  o ia64: Initial sync with 2.5.32<br />  o ia64: Add asm-ia64/kmap_types.h (dummy file, but needed to get<br />    aio.c compiled)<br />  o ia64: Sync with 2.5.32 to get a working kernel<br />  o Create dummy file include/asm-ia64/mc146818rtc.h since<br />    ide-geometry.c continues to insist on it.<br /><br />David S. Miller &lt;davem&#64;nuts.ninka.net&gt;:<br />  o [SPARC64]: Ultra-III+ updates and better error trap logging<br />  o arch/sparc64/kernel/traps.c: Add spitfire_ prefix to<br />    clean_and_reenable_l1_caches, BUG on non-spitfire cpus<br />  o arch/sparc64/kernel/irq.c: Kill reference to dead linux/kbd_ll.h<br />  o [INPUT]: Add EBUS/ISA speaker input driver for Sparc<br />  o include/asm-sparc64/pgalloc.h: Include linux/mm.h<br />  o drivers/char/keyboard.c: Add sparc{32,64} emulate_raw support<br />  o drivers/serial/Config.in: It is CONFIG_SPARC32 not CONFIG_SPARC<br />  o drivers/input/misc/Config.in: It is CONFIG_SPARC32 not CONFIG_SPARC<br />  o drivers/char/keyboard.c: Merge in Vojtech fixes plus add Sparc raw<br />    support<br />  o arch/sparc64/kernel/setup.c: Kill duplicate kbd_sysrq_xlate<br />  o [SPARC]: Define CONFIG_HW_CONSOLE<br />  o [SPARC64]: Add dummy kmap_types.h for sake of fs/aio.c<br />  o [SPARC]: Finish conversion of sbusfb drivers to new fbcon API<br />  o include/linux/sctp.h: Use __u{8,16,32} instead of uint{8,16,32}_t<br />  o [SCTP]: Whitespace/codingstyle fixups, plus a bug fix or two<br />  o net/sctp/sctp_sm_statefuns.c: Remove bogus use of unused attribute<br />    with a label<br />  o net/sctp/sctp_protocol.c: Fix typo from cleanups<br />  o net/sctp/sctp_sm_sideeffect.c: Kill unusued variable in<br />    sctp_side_effects<br />  o net/sctp/sctp_tsnmap.c: Fix typo from cleanups<br />  o net/sctp/sctp_sm_make_chunk.c: Kill unused variable in<br />    sctp_make_data_empty<br />  o net/sctp/sctp_socket.c: Fix printf string for size_t<br />  o net/sctp/sctp_socket.c: Fix sctp_get_port types, static private<br />    funcs<br />  o net/sctp/sctp_socket.c: Mark sctp_skb_recv_datagram static<br />  o I8042: Add SPARC support<br />  o drivers/input/serio/i8042-sparcio.h: Add missing endef<br />  o drivers/input/serio/i8042-sparcio.h: Fix ioremap args<br />  o drivers/input/serio/i8042.c: Allow IRQs to be determined at runtime<br />  o drivers/scsi/sg.c: Include linux/vmalloc.h<br />  o fs/binfmt_elf.c: Kill warnings introduced by stack-grows-up changes<br />  o fs/romfs/inode.c: Kill warning on 64-bit systems<br />  o drivers/input/serio/i8042-sparcio.h: Define<br />    I8042_{COMMAND,DATA}_REG<br />  o arch/sparc64/defconfig: Update<br />  o [SCTP]: Rename sctp_foo.[ch] to foo.[ch] and kill CVS tags on<br />    authors request<br />  o [OpenPROM]: Fix signedness/user-access checking bugs in openprom<br />    char driver and openpromfs<br />  o fs/openpromfs/inode.c: Prevent overflow of sprintf buffer<br />  o fs/openpromfs/inode.c: Prevent unsigned roll-over in size of<br />    kmalloc<br />  o fs/openpromfs/inode.c: Better fixes for overflow<br />  o This converts all of the input USB drivers to manage DMA buffers<br />    via usb_buffer_alloc in 2.5.x  This helps platforms where doing a<br />    pci_{map,unmap}_single() on every input event is very inefficient.<br /><br />Eric Sandeen &lt;sandeen&#64;sgi.com&gt;:<br />  o warning cleanup for drivers_scsi_dpt_i2o.c<br />  o warning cleanup for drivers_scsi_fdomain.c<br />  o warning cleanup for drivers_char_mxser.c<br /><br />Frank Davis &lt;fdavis&#64;si.rr.com&gt;:<br />  o drivers/media/video/bt856.c<br />  o drivers/media/video/saa7110.c<br />  o drivers/media/video/bt819.c<br /><br />Greg Kroah-Hartman &lt;greg&#64;kroah.com&gt;:<br />  o USB: added new pl2303 device, thanks to Tasos Chronis<br />    &lt;tasosc&#64;otenet.gr&gt;<br />  o USB: ipaq driver: fixed __FUNCTION__ usages<br />  o USB: usbserial core: fixed __FUNCTION__ usages<br />  o USB: visor driver: fixed __FUNCTION__ usages<br />  o USB: whiteheat driver: fixed __FUNCTION__ use<br />  o USB: ftdi_sio driver: fixed __FUNCTION__ usages<br />  o USB: keyspan_pda driver: fixed __FUNCTION__ usages<br />  o USB: belkin serial driver: fixed __FUNCTION__ usages<br />  o USB: cyberjack driver: fixed __FUNCTION__ usages<br />  o USB: pl2303 driver: fixed __FUNCTION__ usages<br />  o USB: omninet driver: fixed __FUNCTION__ usages<br />  o USB: mct_u232 driver: fixed __FUNCTION__ usages<br />  o USB: kl5usb105 driver: fixed __FUNCTION__ usages<br />  o USB: digi_acceleport driver: fixed __FUNCTION__ usages<br />  o USB: empeg driver: fixed __FUNCTION__ usages<br />  o USB: io_edgeport driver: fixed __FUNCTION__ usages<br />  o USB: ir-usb driver: gcc3 warning fix<br />  o USB: keyspan driver: minor formatting fixes<br />  o USB: added break support for 2 port keyspan devices<br />  o USB: fix debugging code to allow USB_NO_DMA_MAP<br />  o USB: io_ti driver: fixed __FUNCTION__ usages<br />  o USB: safe_serial driver: fixed __FUNCTION__ usages<br />  o USB: serial drivers: fixed __FUNCTION__ usages that I missed before<br />  o USB: bluetty driver: fixed __FUNCTION__ usages<br />  o USB: brlvger driver: fixed __FUNCTION__ usage<br />  o PCI:  add pci_bus_* functions to replace the pci_read_* and<br />    pci_write_* functions<br />  o PCI Hotplug: removed the pci_*_nodev functions<br />  o PCI: x86-64 pci_ops changes<br />  o PCI: alpha pci_ops changes<br />  o PCI: compile time fix for the pci pool patch<br />  o ACPI: fix needed due to previous pci_ops change<br /><br />Hanna Linder &lt;hannal&#64;us.ibm.com&gt;:<br />  o PCI: ia64 pci_ops changes<br />  o PCI: mips pci_ops changes<br />  o PCI: sh pci_ops changes<br /><br />Ingo Molnar &lt;mingo&#64;elte.hu&gt;:<br />  o ldt-fix-2.5.32-A3<br />  o MAINTAINERS patch<br />  o clone-cleanup 2.5.32-BK<br />  o scheduler fixes, 2.5.32-BK<br />  o TLS boot-initialization bugfix on SMP, 2.5.32-BK<br /><br />Jeff Garzik &lt;jgarzik&#64;mandrakesoft.com&gt;:<br />  o Update 8139too net driver to make new rx-reset method the default<br />  o Fix mistake in 8139too net driver Config.in entry<br />  o Proper support for RTL8139 rev K in 8139too net driver<br />  o Release 8139too net driver version 0.9.26<br />  o 8139cp net driver updates<br />  o Include linux/in.h and linux/ip.h in 8139cp net driver<br />  o Add 64-bit DMA support to 8139cp net driver<br />  o Fix 8139cp net driver 64-bit PCI DMA support (thanks for DaveM for<br />    advice and help)<br />  o e1000 net driver small cleanup<br /><br />Linus Torvalds &lt;torvalds&#64;home.transmeta.com&gt;:<br />  o Merge with dri CVS tree<br />  o The SCSI layer should _not_ try to decide about non-existent<br />    partitions. The higher layers do a better job of it.<br />  o Call con_init_devfs() to initialize VT subsystem for devfs<br />  o Make block device initialization initialize the request queue<br />    pointer before the device is opened.<br />  o Clean up insane floppy driver CURRENT handling, make the driver<br />    remove the ftont of the queue from the request list and cache it in<br />    'current_req'.<br />  o Fix defconfig (incomplete due to the syntax error in char<br />    Config.in)<br />  o Don't use __func__ - not all versions of gcc support it<br />  o Don't paste __FUNCTION__, that's deprecated<br />  o Make e100 driver compile (e100_force_speed_duplex() cannot be<br />    static, as it is needed by e100_test.c too)<br />  o Add some fascist code to trap __FUNCTION__ pasting, fix up some<br />    more pasters..<br />  o Avoid unused variable warning when kmap() ends up being a no-op<br /><br />Luca Barbieri &lt;ldb&#64;ldb.ods.org&gt;:<br />  o Fix panic if pnpbios is enabled and speed up its check in<br /><br />matt_domsch&#64;dell.com &lt;Matt_Domsch&#64;Dell.com&gt;:<br />  o ia64: update files for efi.h move from include/asm-ia64 to<br />    include/linux<br /><br />Neil Brown &lt;neilb&#64;cse.unsw.edu.au&gt;:<br />  o kNFSd - More small fixes for TCP nfsd<br />  o md - Fix a typo in a recent patchset for raid5<br /><br />Paul Mackerras &lt;paulus&#64;samba.org&gt;:<br />  o Fix mesh config<br /><br />Pete Zaitcev &lt;zaitcev&#64;redhat.com&gt;:<br />  o Patch to irq compat stuff in 2.5.32<br /><br />Petr Vandrovec &lt;vandrove&#64;vc.cvut.cz&gt;:<br />  o Add a missing EXPORT_SYMBOL(input_devclass); into input.c<br /><br />Randy Dunlap &lt;rddunlap&#64;osdl.org&gt;:<br />  o I've been using gcml2 from Greg Banks to look at CONFIG_ variable<br />    dependencies in config.in files.<br /><br />Richard Gooch &lt;rgooch&#64;atnf.csiro.au&gt;:<br />  o devfs update <br />  o Exported devfs_find_and_unregister() and devfs_only() to modules<br />    Updated README from master HTML file Fixed module unload race in<br />    devfs_open()<br /><br />Robert Love &lt;rml&#64;tech9.net&gt;:<br />  o have lockd and rpciod drop locks on exit<br />  o make raid5 checksums preempt-safe, take two<br />  o misc. kernel preemption bits<br /><br />Rusty Russell &lt;rusty&#64;rustcorp.com.au&gt;:<br />  o list_for_each_entry<br />  o Designated initializers for sound_ppc<br /><br />Scott Feldman &lt;scott.feldman&#64;intel.com&gt;:<br />  o e100 net driver update<br />  o e1000 net driver update<br /><br />Simon Evans &lt;spse&#64;secret.org.uk&gt;:<br />  o more typedef removal from usbvideo<br /><br />Tom Rini &lt;trini&#64;kernel.crashing.org&gt;:<br />  o Make CONFIG_VIDEO_RPOC_FS depend on CONFIG_PROC_FS<br /><br />Vojtech Pavlik &lt;vojtech&#64;suse.cz&gt;:<br />  o Remove uninformative coments in input.c<br />  o Don't allow CONFIG_INPUT_MOUSEDEV_PSAUX without<br />    CONFIG_INPUT_MOUSEDEV<br />  o Start keyboard_bh only after registering the keyboard handler<br />  o Support the 0xff ps/2 mouse reset command in mousedev.c, XFree<br />    needs it for mouse autodetection.<br />  o Remove user configurable I8042_BASE/I8042_IRQs<br />  o In mousedev.c, don't send a zero mouse movement after a command if<br />    requested, also fix a possible race with two processes using the<br />    same file descriptor.<br />  o Ignore error 0xff - 'general error' in AUX wire test in i8042.c,<br />    some mainboards (Andrew Morton's Dell) report that even everything<br />    is okay with AUX. Also remove a check for very old AMI i8042's,<br />    which could generate false positives on modern buggy mainboards.<br /><br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.kernel.org<br />More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html">http://vger.kernel.org/majordomo-info.html</a><br />Please read the FAQ at  <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
