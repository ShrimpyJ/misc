    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2002/7/10/136">First message in thread</a></li><li><a href="/lkml/2002/7/10/136">"Grover, Andrew"</a><ul><li><a href="/lkml/2002/7/10/181">Andrew Morton</a><ul><li><a href="/lkml/2002/7/10/183">Lincoln Dale</a><ul><li><a href="/lkml/2002/7/11/51">Kasper Dupont</a><ul><li><a href="/lkml/2002/7/11/4">george anzinger</a></li><li><a href="/lkml/2002/7/11/52">Alan Cox</a></li></ul></li></ul></li><li><a href="/lkml/2002/7/10/187">Thunder from the hill</a><ul><li><a href="/lkml/2002/7/10/151">"J.A. Magallon"</a></li><li><a href="/lkml/2002/7/10/182">Cort Dougan</a></li><li><a href="/lkml/2002/7/10/197">Thunder from the hill</a><ul><li><a href="/lkml/2002/7/10/176">Eli Carter</a></li><li><a href="/lkml/2002/7/10/188">Dave Mielke</a></li><li><a href="/lkml/2002/7/10/196">Thunder from the hill</a></li></ul></li><li><a href="/lkml/2002/7/11/78">Mark Mielke</a><ul><li><a href="/lkml/2002/7/11/12">Daniel Phillips</a></li></ul></li></ul></li><li><a href="/lkml/2002/7/10/195">Benjamin LaHaise</a><ul><li><a href="/lkml/2002/7/10/16">CaT</a></li><li><a href="/lkml/2002/7/10/165">Benjamin LaHaise</a></li><li><a href="/lkml/2002/7/10/192">Andrew Morton</a></li><li><a href="/lkml/2002/7/11/31">Martin Dalecki</a></li></ul></li></ul></li><li><a href="/lkml/2002/7/10/200">george anzinger</a><ul><li><a href="/lkml/2002/7/11/46">Hannu Savolainen</a><ul><li><a href="/lkml/2002/7/11/43">Thunder from the hill</a><ul><li><a href="/lkml/2002/7/11/38">Martin Dalecki</a></li></ul></li><li><a href="/lkml/2002/7/11/66">george anzinger</a><ul><li><a href="/lkml/2002/7/11/144">Stevie O</a></li></ul></li></ul></li></ul></li><li class="origin"><a href="/lkml/2002/7/15/137">(Linus Torvalds)</a><ul><li><a href="/lkml/2002/7/15/137">Robert Love</a><ul><li><a href="/lkml/2002/7/15/189">Linus Torvalds</a><ul><li><a href="/lkml/2002/7/15/148">mbs</a></li><li><a href="/lkml/2002/7/15/183"> yodaiken&#64;fsmlabs ...</a></li></ul></li></ul></li><li><a href="/lkml/2002/7/16/108">Vojtech Pavlik</a></li><li><a href="/lkml/2002/7/17/211">Daniel Phillips</a><ul><li><a href="/lkml/2002/7/17/22">Linus Torvalds</a></li><li><a href="/lkml/2002/7/17/197">"Richard B. Johnson"</a><ul><li><a href="/lkml/2002/7/17/202">Daniel Phillips</a></li><li><a href="/lkml/2002/7/17/223">Linus Torvalds</a></li></ul></li><li><a href="/lkml/2002/7/18/96">(Kai Henningsen)</a></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">(Linus Torvalds)</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: HZ, preferably as small as possible</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Mon, 15 Jul 2002 05:06:45 +0000 (UTC)</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">In article &lt;59885C5E3098D511AD690002A5072D3C02AB7F88&#64;orsmsx111.jf.intel.com&gt;,<br />Grover, Andrew &lt;andrew.grover&#64;intel.com&gt; wrote:<br />&gt;<br />&gt;But on the other hand, increasing HZ has perf/latency benefits, yes? Have<br />&gt;these been quantified?<br /><br />I've never had good reason to believe the latency/perf benefits myself,<br />but I was approached at OLS about problems with something as simple as<br />DVD playing, where a 100Hz timer means that the DVD player ends up<br />having to busy-loop on gettimeofday() because it cannot sanely sleep due<br />to the lack in sufficient sleeping granularity.<br /><br />You apparently end up visibly missing frames - a frame is just 3 timer<br />ticks at 100 Hz, and considering that the kernel has to round up by one<br />due to POSIX requirements _and_ considering that you lose roughly one<br />for actually processing the frame itself, that doesn't sound _that_<br />outlandish. <br /><br />&gt;		 I'd either like to see a HZ that has balanced<br />&gt;power/performance, or could we perhaps detect we are on a system that cares<br />&gt;about power (aka a laptop) and tweak its value at runtime?<br /><br />Runtime tweaking is not really an option with the current setup. There<br />are also divisions etc that really want it to be a compile-time constant<br />for efficiency.<br /><br />As noted, even power/performance-wise a higher Hz can actually _help_. <br />Especially on laptops.  Exactly because you actually sanely _can_ afford<br />to sleep, which you cannot with a 100Hz timer. <br /><br />So you lose some, you win some, depending on your needs.<br /><br />There is, of course, the option to do variable frequency (and make it<br />integer multiples of the exposed "constant HZ" so that kernel code<br />doesn't actually need to _care_ about the variability). There are<br />patches to play with things like that.<br /><br />		Linus<br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.kernel.org<br />More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html">http://vger.kernel.org/majordomo-info.html</a><br />Please read the FAQ at  <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
