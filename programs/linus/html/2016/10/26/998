    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2016/10/26/963">First message in thread</a></li><li><a href="/lkml/2016/10/26/963">David Herrmann</a><ul><li><a href="/lkml/2016/10/26/964">David Herrmann</a><ul><li><a href="/lkml/2016/10/29/391">"Kirill A. Shutemov"</a></li></ul></li><li><a href="/lkml/2016/10/26/965">David Herrmann</a><ul><li><a href="/lkml/2016/10/27/209">Peter Zijlstra</a><ul><li><a href="/lkml/2016/10/27/298">David Herrmann</a><ul><li><a href="/lkml/2016/10/27/105">David Herrmann</a></li><li><a href="/lkml/2016/10/27/109">Arnd Bergmann</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/2016/10/26/966">David Herrmann</a></li><li><a href="/lkml/2016/10/26/967">David Herrmann</a><ul><li><a href="/lkml/2016/10/27/114">Peter Zijlstra</a><ul><li><a href="/lkml/2016/10/27/334">Peter Zijlstra</a></li></ul></li><li><a href="/lkml/2016/10/27/117">Peter Zijlstra</a></li><li><a href="/lkml/2016/10/27/349">Peter Zijlstra</a></li></ul></li><li><a href="/lkml/2016/10/26/969">David Herrmann</a></li><li><a href="/lkml/2016/10/26/970">David Herrmann</a></li><li><a href="/lkml/2016/10/26/971">David Herrmann</a></li><li><a href="/lkml/2016/10/26/972">David Herrmann</a></li><li><a href="/lkml/2016/10/26/974">David Herrmann</a></li><li><a href="/lkml/2016/10/26/975">David Herrmann</a><ul><li><a href="/lkml/2016/10/27/365">Peter Zijlstra</a></li><li><a href="/lkml/2016/10/27/451">Peter Zijlstra</a><ul><li><a href="/lkml/2016/10/28/276">Tom Gundersen</a><ul><li><a href="/lkml/2016/10/28/335">Peter Zijlstra</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/2016/10/26/976">David Herrmann</a><ul><li><a href="/lkml/2016/10/28/365">Peter Zijlstra</a></li></ul></li><li><a href="/lkml/2016/10/26/977">David Herrmann</a><ul><li><a href="/lkml/2016/10/28/284">Richard Weinberger</a><ul><li><a href="/lkml/2016/10/28/327">Tom Gundersen</a><ul><li><a href="/lkml/2016/10/28/329">Richard Weinberger</a></li></ul></li></ul></li><li><a href="/lkml/2016/10/28/324">Richard Weinberger</a><ul><li><a href="/lkml/2016/10/28/330">Tom Gundersen</a><ul><li><a href="/lkml/2016/10/28/350">Richard Weinberger</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/2016/10/26/978">David Herrmann</a><ul><li><a href="/lkml/2016/10/26/1197">Andy Lutomirski</a><ul><li><a href="/lkml/2016/10/26/1226">Tom Gundersen</a><ul><li><a href="/lkml/2016/10/27/96">Arnd Bergmann</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/2016/10/26/979">David Herrmann</a></li><li class="origin"><a href="/lkml/2016/10/26/1049">Linus Torvalds</a><ul><li><a href="/lkml/2016/10/26/1049">David Herrmann</a><ul><li><a href="/lkml/2016/10/29/390">"Kirill A. Shutemov"</a><ul><li><a href="/lkml/2016/10/29/399">Josh Triplett</a></li><li><a href="/lkml/2016/11/2/274">David Herrmann</a></li></ul></li><li><a href="/lkml/2017/1/30/801">Pavel Machek</a></li></ul></li></ul></li><li><a href="/lkml/2016/10/27/270">Michael Kerrisk</a></li><li><a href="/lkml/2016/10/28/325">Richard Weinberger</a><ul><li><a href="/lkml/2016/10/28/339">Tom Gundersen</a></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Wed, 26 Oct 2016 12:39:54 -0700</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [RFC v1 00/14] Bus1 Kernel Message Bus</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">So the thing that tends to worry me about these is resource management.<br /><br />If I understood the documentation correctly, this has per-user<br />resource management, which guarantees that at least the system won't<br />run out of memory. Good. The act of sending a message transfers the<br />resource to the receiver end. Fine.<br /><br />However, the usual problem ends up being that a bad user can basically<br />DoS a system agent, especially since for obvious performance reasons<br />the send/receive has to be asynchronous.<br /><br />So the usual DoS model is that some user just sends a lot of messages<br />to a system agent, filling up the system agent resource quota, and<br />basically killing the system. No, it didn't run out of memory, but the<br />system agent may not be able to do anything more, since it is now out<br />of resources.<br /><br />Keeping the resource management with the sender doesn't solve the<br />problem, it just reverses it: now the attack will be to send a lot of<br />queries to the system agent, but then just refuse to listen to the<br />replies - again causing the system agent to run out of resources.<br /><br />Usually the way this is resolved this is by forcing a<br />"request-and-reply" resource management model, where the person who<br />sends out a request is not only the one who is accounted for the<br />request, but also accounted for the reply buffer. That way the system<br />agent never runs out of resources, because it's always the requesting<br />party that has its resources accounted, never the system agent.<br /><br />You may well have solved this, but can you describe what the solution<br />is without forcing people to read the code and try to analyze it?<br /><br />               Linus<br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
