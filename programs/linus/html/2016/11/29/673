    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2016/11/23/646">First message in thread</a></li><li><a href="/lkml/2016/11/29/435">Adam Borowski</a><ul><li><a href="/lkml/2016/11/29/580">Michal Marek</a><ul><li><a href="/lkml/2016/11/29/600">Linus Torvalds</a><ul><li><a href="/lkml/2016/11/29/866">Ben Hutchings</a><ul><li><a href="/lkml/2016/11/29/888">Linus Torvalds</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/2016/11/29/734">Adam Borowski</a><ul><li class="origin"><a href="/lkml/2016/11/29/932">Linus Torvalds</a><ul><li><a href="/lkml/2016/11/29/932">Michal Marek</a></li></ul></li><li><a href="/lkml/2016/11/29/683">Linus Torvalds</a><ul><li><a href="/lkml/2016/12/1/320">Arnd Bergmann</a><ul><li><a href="/lkml/2016/12/1/470">Michal Marek</a></li><li><a href="/lkml/2016/12/1/585">Linus Torvalds</a></li></ul></li></ul></li></ul></li></ul></li></ul><div class="threadlist">Patch in this message</div><ul class="threadlist"><li><a href="/lkml/diff/2016/11/29/673/1">Get diff 1</a></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Tue, 29 Nov 2016 09:10:58 -0800</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [PATCH] x86/kbuild: enable modversions for symbols exported from asm</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">On Tue, Nov 29, 2016 at 9:05 AM, Adam Borowski &lt;kilobyte&#64;angband.pl&gt; wrote:<br />&gt;<br />&gt; Thus, if it's indeed binutils, you'll see the breakage as soon as Fedora<br />&gt; recovers from the freeze.<br /><br />So quite frankly, I don't want to make our kernel sources worse due to<br />broken shit tools getting something wrong that we shouldn't even care<br />about.<br /><br />How about this stupid patch? It weakens modversions, but that may be<br />ok for Debian, and a better alternative than just saying "we don't<br />support it at all".<br /><br />            Linus<br /> kernel/module.c | 5 +++--<br /> 1 file changed, 3 insertions(+), 2 deletions(-)<br /><br />diff --git a/kernel/module.c b/kernel/module.c<br />index f57dd63186e6..0e54d5bf0097 100644<br />--- a/kernel/module.c<br />+++ b/kernel/module.c<br />&#64;&#64; -1301,8 +1301,9 &#64;&#64; static int check_version(Elf_Shdr *sechdrs,<br /> 		goto bad_version;<br /> 	}<br /> <br />-	pr_warn("%s: no symbol version for %s\n", mod-&gt;name, symname);<br />-	return 0;<br />+	/* Broken toolchain. Warn once, then let it go.. */<br />+	pr_warn_once("%s: no symbol version for %s\n", mod-&gt;name, symname);<br />+	return 1;<br /> <br /> bad_version:<br /> 	pr_warn("%s: disagrees about version of symbol %s\n",</pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
