    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2016/12/14/590">First message in thread</a></li><li><a href="/lkml/2016/12/22/3">Dave Chinner</a><ul><li><a href="/lkml/2016/12/22/24">Linus Torvalds</a><ul><li><a href="/lkml/2016/12/22/46">Dave Chinner</a><ul><li><a href="/lkml/2016/12/22/401">Chris Leech</a><ul><li><a href="/lkml/2016/12/22/523">Ming Lei</a></li></ul></li></ul></li><li><a href="/lkml/2016/12/22/435">Hugh Dickins</a><ul><li><a href="/lkml/2016/12/23/21">Johannes Weiner</a><ul><li><a href="/lkml/2016/12/23/29">Johannes Weiner</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/2016/12/22/37">Dave Chinner</a><ul><li class="origin"><a href="/lkml/2016/12/22/438">Linus Torvalds</a><ul><li><a href="/lkml/2016/12/22/438">Thomas Gleixner</a></li><li><a href="/lkml/2016/12/22/456">Dave Chinner</a><ul><li><a href="/lkml/2016/12/22/466">Dave Chinner</a></li></ul></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Thu, 22 Dec 2016 09:24:12 -0800</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [4.10, panic, regression] iscsi: null pointer deref at iscsi_tcp_segment_done+0x20d/0x2e0</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">On Wed, Dec 21, 2016 at 10:28 PM, Dave Chinner &lt;david&#64;fromorbit.com&gt; wrote:<br />&gt;<br />&gt; This sort of thing is normally indicative of a memory reclaim or<br />&gt; lock contention problem. Profile showed unusual spinlock contention,<br />&gt; but then I realised there was only one kswapd thread running.<br />&gt; Yup, sure enough, it's caused by a major change in memory reclaim<br />&gt; behaviour:<br />&gt;<br />&gt; [    0.000000] Zone ranges:<br />&gt; [    0.000000]   DMA      [mem 0x0000000000001000-0x0000000000ffffff]<br />&gt; [    0.000000]   DMA32    [mem 0x0000000001000000-0x00000000ffffffff]<br />&gt; [    0.000000]   Normal   [mem 0x0000000100000000-0x000000083fffffff]<br />&gt; [    0.000000] Movable zone start for each node<br />&gt; [    0.000000] Early memory node ranges<br />&gt; [    0.000000]   node   0: [mem 0x0000000000001000-0x000000000009efff]<br />&gt; [    0.000000]   node   0: [mem 0x0000000000100000-0x00000000bffdefff]<br />&gt; [    0.000000]   node   0: [mem 0x0000000100000000-0x00000003bfffffff]<br />&gt; [    0.000000]   node   0: [mem 0x00000005c0000000-0x00000005ffffffff]<br />&gt; [    0.000000]   node   0: [mem 0x0000000800000000-0x000000083fffffff]<br />&gt; [    0.000000] Initmem setup node 0 [mem 0x0000000000001000-0x000000083fffffff]<br />&gt;<br />&gt; the numa=fake=4 CLI option is broken.<br /><br />Ok, I think that is independent of anything else. Removing block<br />people and adding the x86 people.<br /><br />I'm not seeing anything at all that would change the fake numa stuff,<br />but maybe the cpu hotplug changes?<br /><br />Thomas/Ingo/Peter - Dave is going away for several months, so you<br />won't get feedback from him, but can you look at this? Or maybe point<br />me towards the right people - I'm seeing no possible relevant changes<br />at all fir x85 numa since 4.9, so it must be some indirect breakage.<br /><br />Dave is using fake-numa to do performance testing in a VM, and it's a<br />big deal for the node optimizations for writeback etc. Do you have any<br />ideas?<br /><br />Dave, if you're still around, can you send out the kernel config file<br />you used...<br /><br />               Linus<br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
