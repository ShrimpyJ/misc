    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2010/7/14/539">First message in thread</a></li><li><a href="/lkml/2010/7/22/259">Linus Torvalds</a><ul><li><a href="/lkml/2010/7/22/265">Greg Freemyer</a><ul><li><a href="/lkml/2010/7/22/266">Greg Freemyer</a></li></ul></li><li><a href="/lkml/2010/7/22/279">Jan Engelhardt</a></li><li><a href="/lkml/2010/7/22/281">Jeremy Allison</a><ul><li class="origin"><a href="/lkml/2010/7/22/296">Linus Torvalds</a><ul><li><a href="/lkml/2010/7/22/296">Trond Myklebust</a><ul><li><a href="/lkml/2010/7/22/336">Jeremy Allison</a></li></ul></li><li><a href="/lkml/2010/7/22/297">Jan Engelhardt</a><ul><li><a href="/lkml/2010/7/22/301">Trond Myklebust</a></li><li><a href="/lkml/2010/7/22/322">Linus Torvalds</a></li></ul></li><li><a href="/lkml/2010/7/22/303">Jim Rees</a><ul><li><a href="/lkml/2010/7/22/312">Linus Torvalds</a></li></ul></li><li><a href="/lkml/2010/7/22/582">	tridge&#64;samba ...</a><ul><li><a href="/lkml/2010/7/22/599">Ted Ts'o</a></li></ul></li><li><a href="/lkml/2010/7/30/788">utz lehmann</a><ul><li><a href="/lkml/2010/7/31/20">Jan Engelhardt</a></li><li><a href="/lkml/2010/7/31/60">David Howells</a></li><li><a href="/lkml/2010/8/1/70">Jeff Layton</a></li></ul></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Thu, 22 Jul 2010 09:40:22 -0700</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [PATCH 02/18] xstat: Add a pair of system calls to make extended  file stats available [ver #6]</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">On Thu, Jul 22, 2010 at 9:27 AM, Jeremy Allison &lt;jra&#64;samba.org&gt; wrote:<br />&gt; On Thu, Jul 22, 2010 at 08:47:46AM -0700, Linus Torvalds wrote:<br />&gt;&gt; Tell me why we shouldn't just do this right?<br />&gt;<br />&gt; No, ctime isn't the same as Windows "create time".<br /><br />Umm. What kind of reading problems do you guys have?<br /><br />I know effin well that ctime isn't the same as Windows create time.<br />THAT WAS MY POINT.<br /><br />But the fact is, th Unix ctime semantics are insane and largely<br />useless. There's a damn good reason almost nobody uses ctime under<br />unix.<br /><br />So what I'm suggesting is that we have a flag - either per-process or<br />per-mount - that just says "use windows semantics for ctime".<br /><br />And yes, I'm very aware that the "c" in ctime doesn't stand for<br />"create". But anybody who points that out is - once more - totally<br />missing the point. My point is that we have three timestamps, and<br />windows wants three timestamps (somebody claims that NTFS has four<br />timestamps, but the Windows file time access functions certainly only<br />shows three times, so any potential extra on-disk times have no<br />relevance because they are invisible to pretty much everybody). We can<br />have unix semantics for mtime/atime/ctime, or we can have windows<br />semantics for those three values.<br /><br />So let's say that we introduce a mount flag that says<br />"ctime=winctime", which basically just sets a flag that instead of<br />changing ctime on chmod/chown/etc, it just changes mtime instead (or,<br />as mentioned, we could make it a process flag instead).<br /><br />Let's face it, Unix semantics are not sacred.  Especially not<br />something like ctime, which is pretty damn useless. If you're a samba<br />server, why not just say "let's do ctime the way windows does creation<br />times", and let it be at that?<br /><br />I personally think that Unix ctime is insane. There is no real reason<br />why "write()" should change mtime, but "chmod" changes ctime. It was<br />just a random decision way back when, and it's clearly not what samba<br />wants, and it's equally clearly not what even most _unix_ people want<br />(just google for "ctime" and "creation time", and watch the confusion<br />- exactly because unix semantics are simply _random_ and odd semantics<br />in this area)<br /><br />I would not be at all surprised if it turns out that people might want<br />to really turn ctime into creation time (with the mount flag or<br />whatever) even if they are _not_ running samba.<br /><br />An added issue is that most filesystems simply don't have more than<br />three times (and some obviously have not even that, but that's true in<br />Windows too). So re-using ctime actually means that this scheme would<br />work a whole lot better than some crazy xstat() interface that doesn't<br />support common filesystems anyway.<br /><br />                                         Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
