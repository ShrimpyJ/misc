    </div></td><td width="32"> </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2010/7/12/398">First message in thread</a></li><li><a href="/lkml/2010/7/14/1">Linus Torvalds</a><ul><li><a href="/lkml/2010/7/14/6">Grant Likely</a><ul><li class="origin"><a href="">Linus Torvalds</a></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Wed, 14 Jul 2010 08:37:23 -0700</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [PATCH] kbuild: Enable building defconfigs from Kconfig files</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">On Tue, Jul 13, 2010 at 10:47 PM, Grant Likely<br />&lt;grant.likely&#64;secretlab.ca&gt; wrote:<br />&gt;<br />&gt; Okay, well I advocate for the -D /dev/null approach then.  I think<br />&gt; that validating our defaults, and looking for the subtle interactions<br />&gt; are exactly what we want to be doing when it comes to defconfigs.  The<br />&gt; fact that a defconfig does *not* want the default value is exactly<br />&gt; what the defconfigs should be capturing.<br /><br />Sure. That does have the downside that it absolutely _requires_<br />changes to the Kconfig language. Because currently "select" can only<br />set a config variable, it cannot clear it or downgrade it from the<br />defaults - so if you start from anything but a noconfig, you can't<br />unset anything.<br /><br />But that's not a big downside, since honestly either approach will<br />want it anyway (even -n wants it for setting integer or string options<br />- never mind the whole issue of making it easier/cleaner to write the<br />files in the first place).<br /><br />&gt;&gt;          set NODES_SHIFT 10<br />&gt;<br />&gt; I'm partial to extending select statements myself because it fits<br />&gt; nicely into the existing grammer; but I can see value in having a set<br />&gt; statement too.<br /><br />If it turns out easier to just implement the "set value" as a "select<br />with a value", that's fine by me too. If the syntax for setting a<br />particular value ends up being<br /><br />   select NODES_SHIFT 10<br /><br />that still works (with or without a "=" there). It looks a bit odd to<br />me, but that's probably just because it's new. It doesn't look _wrong_<br />by any stretch.<br /><br />&gt; It would eliminate the temporary config options that<br />&gt; both my and Stephen's patch would add.<br /><br />I don't think there is anything wrong with having the extra config<br />option just to drive the "select" syntax. In fact, in many cases I<br />think it would be "documentation", because I think the extra config<br />option should generally be named by the platform that you're actually<br />selecting for - even if that name may not be used for anything else.<br /><br />So having the basic syntax for a Kconfig.xyz file be something like<br /><br />         config SIDEWINDER_PLATFORM<br />              def_bool y<br />              select ...<br /><br />where that initial config/def_bool is strictly not needed for the<br />actual end result, but is used to get to the select statements, and to<br />include that "SIDEWINDER_PLATFORM=y" in the resulting .config as a<br />kind of top-level comment all looks fine.<br /><br />                 Linus<br />--<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.kernel.org<br />More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html">http://vger.kernel.org/majordomo-info.html</a><br />Please read the FAQ at  <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
