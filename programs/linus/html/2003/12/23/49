    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2003/12/22/122">First message in thread</a></li><li><a href="/lkml/2003/12/23/30">Florian Weimer</a><ul><li><a href="/lkml/2003/12/23/31">"Giacomo A. Catenazzi"</a><ul><li class="origin"><a href="/lkml/2003/12/23/62">Linus Torvalds</a><ul><li><a href="/lkml/2003/12/23/62"> viro&#64;parcelfa ...</a></li><li><a href="/lkml/2003/12/23/90">"Giacomo A. Catenazzi"</a><ul><li><a href="/lkml/2003/12/23/98">Mitchell Blank Jr</a></li><li><a href="/lkml/2003/12/23/116"> venom&#64;sns ...</a></li></ul></li><li><a href="/lkml/2003/12/23/96">Mitchell Blank Jr</a></li><li><a href="/lkml/2003/12/23/130">Andries Brouwer</a></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Tue, 23 Dec 2003 04:34:41 -0800 (PST)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: SCO's infringing files list</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Tue, 23 Dec 2003, Giacomo A. Catenazzi wrote:<br /><br />&gt; Florian Weimer wrote:<br />&gt; &gt; <br />&gt; &gt; The comments were added in Linux 0.99.1, and I'm not sure what was the<br />&gt; &gt; source.<br /><br />No, the comments are already there in 0.97 (and they are _not_ in<br />0.96c-pl2, which is the last patch before that that I have found).<br /><br />The timeline looks like (this is by no means guaranteed correct, the dates<br />are from things like the patch files that may not be the originals, but <br />they look consistent):<br /><br /> 0.96c:		July 4th, 1992<br /> 0.96c-pl1:	July 11th<br /> 0.96c-pl2:	July 18th<br /><br />	--- here somewhere ---<br /><br /> 0.97:		Aug 1st<br /><br /><br />The errno change was apparently done on or around July 25, 1992. That's<br />the date on the "errno.h" file in the linux-0.97 archive, and it is<br />consistent with the above release dates.<br /><br />If anybody has newgroup/mailing list archives from around that time, it<br />would be very nice to see what that finds..<br /><br />&gt; &gt;	  For example, Linux has:<br />&gt; &gt; <br />&gt; &gt; #define ENOTTY          25      /* Not a typewriter */<br /><br />My _suspicion_ is that it comes from "strerror()". That's how I'd<br />personally have done it (ie write a simple script to generate the errno<br />values and the comments). But this is over a decade ago, and I sure as <br />hell can't remember who would have done that.<br /><br />It might even have been me, but I doubt it - I've never been that big into<br />comments, so it's likely somebody else was more motivated than me to make <br />errno.h cleaner. But if I did it, I definitely would have done it with a <br />script.<br /><br />Btw: there is some incidental "evidence" that that original 0.97 version<br />of &lt;linux/errno.h&gt; is automatically generated: the thing looks to have<br />very regular whitespace. It looks like it was generated with<br /><br />	#define\t%s\t\t%2d\t/* %s */<br /><br />and then tab-corrected for the symbolic name lengths. There are no spaces <br />at ends-of-lines, and _all_ of the spaces between "define" and the actual <br />error mnemonic are actually _tabs_.<br /><br />And this is true for _all_ the Exxxx defines _except_ for the two special<br />kernel entries: ERESTARTSYS and ERESTARTNOINTR were clearly not generated<br />the same way, because they have a regular _space_ between the #define and<br />the EXXXX.<br /><br />That just makes me go "hmm..". You can't actually see the TAB vs &lt;space&gt; <br />thing when you open the file normally, because they both end up being <br />aligned the same way. So I'd suspect a script that generated the <br />list of the "normal" error codes simply because<br /><br /> - people just aren't that regular by hand<br /> - most people would use a space in between #define and XXXX, as also <br />   shown by the two cases that clearly are _not_ scripted.<br /><br />For example, grepping for "#define" followed by space shows up 1836 such<br />entries in the 0.97 kernel. In contrast, doing the same for "#define"  <br />followed by a tab shows 227 such entries - of which the errno.h ones are a<br />solid block of 121 entries, while the others are a lot more random (and 44<br />of the remaining ~100 cases have multiple tabs and are thus _visible_ as<br />such).<br /><br />So just from a regularity standpoint, it does look auto-generated.<br /><br />&gt; &gt; Solaris:<br />&gt; &gt; <br />&gt; &gt; #define ENOTTY  25      /* Inappropriate ioctl for device       */<br />&gt; &gt; <br />&gt; &gt; Current POSIX:<br />&gt; &gt; <br />&gt; &gt;     [ENOTTY]<br />&gt; &gt;         Inappropriate I/O control operation.<br />&gt; &gt; <br />&gt; &gt; I couldn't find any historic Minix header files.  Minix 2 has:<br />&gt; &gt; <br />&gt; &gt; #define ENOTTY        (_SIGN 25)  /* inappropriate I/O control operation */<br /><br />The "Not a typewriter" thing is the obvious one from just reading the<br />error number mnemonic. Hard to tell where it comes from, but it definitely<br />does not rule out strerror() in that timeframe.<br /><br />&gt; In <br />&gt; <a href="https://www.opensource.apple.com/darwinsource/DevToolsMay2002/gcc-937.2/libiberty/strerror.c">http://www.opensource.apple.com/darwinsource/DevToolsMay2002/gcc-937.2/libiberty/strerror.c</a><br />&gt; <br />&gt; /* Extended support for using errno values.<br />&gt;     Written by Fred Fish.  fnf&#64;cygnus.com<br />&gt;     This file is in the public domain.  --Per Bothner.  */<br />&gt; (...)<br />&gt; #if defined (ENOTTY)<br />&gt;    ENTRY(ENOTTY, "ENOTTY", "Not a typewriter"),<br />&gt; #endif<br /><br />Something like that may well be the source of the string. Fred Fish was <br />active long before this timeframe (if it's the same Fred Fish - he used to <br />do freeware collections for the Amiga in the '80's).<br /><br />But there were multiple libc's around (estdio, libc5, glibc..), and it <br />could be any of them.<br /><br />Trying to find the kernel list archives from that timeframe would likely<br />clarify the issue. There were several lists back then: "linux-activists"  <br />mailing list, and of course the "comp.os.linux" newsgroup (this was before<br />it split into multiple newsgroups).<br /><br />I've found some archives for linux-activists, but no newsgroup archives <br />going that far back.. Anybody?<br /><br />			Linus<br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.kernel.org<br />More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html">http://vger.kernel.org/majordomo-info.html</a><br />Please read the FAQ at  <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
