    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2008/8/28/371">First message in thread</a></li><li><a href="/lkml/2008/8/30/141">Linus Torvalds</a><ul><li><a href="/lkml/2008/8/30/147">"Yinghai Lu"</a><ul><li class="origin"><a href="/lkml/2008/8/30/179">Linus Torvalds</a><ul><li><a href="/lkml/2008/8/30/179">"Yinghai Lu"</a><ul><li><a href="/lkml/2008/8/30/189">"Yinghai Lu"</a></li><li><a href="/lkml/2008/8/30/276">Linus Torvalds</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/2008/8/30/149">Linus Torvalds</a><ul><li><a href="/lkml/2008/8/30/155">"Rafael J. Wysocki"</a><ul><li><a href="/lkml/2008/8/30/157">"Yinghai Lu"</a></li></ul></li><li><a href="/lkml/2008/8/30/156">"Yinghai Lu"</a><ul><li><a href="/lkml/2008/8/30/164">Linus Torvalds</a><ul><li><a href="/lkml/2008/8/30/170">"Yinghai Lu"</a></li></ul></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Sat, 30 Aug 2008 12:31:02 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: Linux 2.6.27-rc5: System boot regression caused by commit a2bd7274b47124d2fc4dfdb8c0591f545ba749dd</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Sat, 30 Aug 2008, Yinghai Lu wrote:<br />&gt; <br />&gt; do you agree to use quirk to make the BAR res to have correct end<br />&gt; between pci_probe and pci_resource_survey?<br /><br />In general I would agree, but now that I've looked at it a bit more, I <br />actually don't think it's a bug in the chipset any more. See my previous <br />email that crossed with yours.<br /><br />I suspect that that northbridge resource is basically acting as a bridge <br />resource. So 0xe0000000 - 0xffffffff is actually _correct_. And MCFG being <br />in that window (and being first in it) is just a detail.<br /><br />Look at the resource allocations on Rafael's machine: there are two <br />different classes:<br /><br /> - outside that BAR3 window:<br /><br />   The "external gfx0 port A" decode (bridged by device 0000:02.0):<br /><br />	d8000000-dfffffff : PCI Bus 0000:01<br />	  d8000000-dfffffff : 0000:01:00.0<br />	    d8000000-d8ffffff : vesafb<br /><br />   and suspect the graphics port is special (considering that this is an <br />   ATI chipset)<br /><br /> - inside that BAR3 window: everything else (PCI express):<br /><br />	e0000000-efffffff : PCI MMCONFIG 0<br />	fe6f4000-fe6f7fff : 0000:00:14.2<br />	  fe6f4000-fe6f7fff : ICH HD audio<br />	fe6fa000-fe6fafff : 0000:00:13.4<br />	  fe6fa000-fe6fafff : ohci_hcd<br />	fe6fb000-fe6fbfff : 0000:00:13.3<br />	  fe6fb000-fe6fbfff : ohci_hcd<br />	fe6fc000-fe6fcfff : 0000:00:13.2<br />	  fe6fc000-fe6fcfff : ohci_hcd<br />	fe6fd000-fe6fdfff : 0000:00:13.1<br />	  fe6fd000-fe6fdfff : ohci_hcd<br />	fe6fe000-fe6fefff : 0000:00:13.0<br />	  fe6fe000-fe6fefff : ohci_hcd<br />	fe6ff000-fe6ff0ff : 0000:00:13.5<br />	  fe6ff000-fe6ff0ff : ehci_hcd<br />	fe6ff800-fe6ffbff : 0000:00:12.0<br />	  fe6ff800-fe6ffbff : ahci<br />	fe700000-fe7fffff : PCI Bus 0000:01<br />	  fe7c0000-fe7dffff : 0000:01:00.0<br />	  fe7e0000-fe7effff : 0000:01:00.1<br />	  fe7f0000-fe7fffff : 0000:01:00.0<br />	fe800000-fe8fffff : PCI Bus 0000:02<br />	  fe8ffc00-fe8fffff : 0000:02:00.0<br />	    fe8ffc00-fe8fffff : ahci<br />	fe900000-fe9fffff : PCI Bus 0000:03<br />	  fe9c0000-fe9dffff : 0000:03:00.0<br />	  fe9fc000-fe9fffff : 0000:03:00.0<br />	    fe9fc000-fe9fffff : sky2<br />	fea00000-feafffff : PCI Bus 0000:04<br />	  feaffc00-feafffff : 0000:04:00.0<br />	    feaffc00-feafffff : ahci<br />	feb00000-febfffff : PCI Bus 0000:05<br />	  febff000-febfffff : 0000:05:08.0<br />	    febff000-febff7ff : ohci1394<br />	fec00000-fec00fff : IOAPIC 0<br />	fed00000-fed003ff : HPET 2<br />	fee00000-fee00fff : Local APIC<br />	fff00000-ffffffff : reserved<br /><br />Hmm? <br /><br />(yeah, some of those resources are _really_ special, and are inside the <br />CPU itself, eg the APIC and possibly HPET, and never necessarily even make <br />it to the host bridge at all because they get decoded early).<br /><br />			Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
