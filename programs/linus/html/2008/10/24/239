    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2008/10/24/3">First message in thread</a></li><li><a href="/lkml/2008/10/24/167">"Rafael J. Wysocki"</a><ul><li><a href="/lkml/2008/10/24/192">Alistair John Strachan</a><ul><li><a href="/lkml/2008/10/24/196">Alexey Dobriyan</a><ul><li><a href="/lkml/2008/10/24/231">=?iso-8859-1?Q?Bj=F6rn?= Steinbrink</a></li></ul></li><li class="origin"><a href="/lkml/2008/10/24/399">Linus Torvalds</a><ul><li><a href="/lkml/2008/10/24/399">David Miller</a><ul><li><a href="/lkml/2008/10/24/406">Sam Ravnborg</a></li></ul></li><li><a href="/lkml/2008/10/24/429">Sam Ravnborg</a></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Fri, 24 Oct 2008 08:17:53 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: Linux 2.6.28-rc1</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Fri, 24 Oct 2008, Alistair John Strachan wrote:<br />&gt; <br />&gt; git reset --hard v2.6.27 ; git clean -d -f<br />&gt; git status ("Nothing to commit")<br /><br />The problem is ignored files.<br /><br />Yes, git claims everything is clean, but that's because it has been told <br />to ignore certain files, and because it has been told to ignore them, it <br />will not remove them (without the -x flag) in "git clean", nor will it <br />mention them in "git status".<br /><br />And yes, one of the ignored file patterns is<br /><br />	include/asm-*/asm-offsets.h<br /><br />which means that your "git clean -df" didn't *really* clean everything <br />from the old include/asm-x86, and because it didn't clean it all it also <br />wouldn't be able to remove the old stale directory - since it wasn't <br />empty.<br /><br />You can use "git clean -dfx" to force git to remove ignored files too. And <br />"make distclean" should have done it too.<br /><br />Now, _another_ part (and arguably the really core reason) of this problem <br />is that our Makefile rules for the asm include directory is weak and <br />unreliable in the presense of already-existing unexpected entries.<br /><br />And it has caused problems before. For example, if you somehow made the <br />symlink not be a symlink at all (by using "cp -LR" for example), or a <br />symlink pointing to another architecture (changing architecture builds in <br />the same tree without doing a "make clean" in between), you historically <br />got really odd results.<br /><br />In fact, it's broken in subtle way before to the point where we now have a <br />special "check-symlink" target internally that checks that the symlink is <br />correctly set up.<br /><br />Of course, it didn't check that you had some old stuff in include/asm-x86, <br />it only checks for the _traditional_ problems we've had. Not some new odd <br />one.<br /><br />		Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
