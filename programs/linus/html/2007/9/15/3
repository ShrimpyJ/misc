    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2007/9/13/19">First message in thread</a></li><li><a href="/lkml/2007/9/13/19">Randy Dunlap</a><ul><li class="origin"><a href="/lkml/2007/9/15/8">Linus Torvalds</a><ul><li><a href="/lkml/2007/9/15/8">Randy Dunlap</a><ul><li><a href="/lkml/2007/9/15/10">Randy Dunlap</a></li></ul></li><li><a href="/lkml/2007/9/15/166">Andi Kleen</a><ul><li><a href="/lkml/2007/9/15/170">Randy Dunlap</a><ul><li><a href="/lkml/2007/9/15/186">Linus Torvalds</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/2007/9/16/62">Andrea Arcangeli</a><ul><li><a href="/lkml/2007/9/16/65">Randy Dunlap</a></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Fri, 14 Sep 2007 21:28:12 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: crashme fault</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Wed, 12 Sep 2007, Randy Dunlap wrote:<br />&gt;<br />&gt; I run almost-daily kernel testing.  I haven't seen 'crashme' cause a<br />&gt; kernel fault until today, and now I've seen it twice on 2.6.23-rc6-git2,<br />&gt; x86_64.  After the first fault, I ran 'crashme' about 10 more times<br />&gt; to get the second fault (usually for 10 minutes, one time for 30<br />&gt; minutes).<br /><br />Interesting. If this is reproducible for you, can you try to narrow down <br />(with bit-bisect) roughly when it started.<br /><br />&gt; There is very little helpful info.  RIP is strange, e.g.: 000000000051b446<br />&gt; The call stack is not printed.  No kernel symbols are printed,<br />&gt; even though I have CONFIG_KALLSYMS{_ALL}=y.<br /><br />It looks like it's a page fault as a result of a *user*space* access, and <br />most likely your machine would continue happily, except you have <br />"panic_on_oops" set, so when the oops happens, it shuts the system down.<br /><br />Now, the reason I say it looks like a user space access is that you have<br /><br />	RIP: 0033:[&lt;0000000000510eea&gt;]<br />	RSP: 002b:00007fffc9a8ec10<br /><br />which are all user space segments. So the register contents clearly say <br />"page fault in user space".<br /><br />However, what makes the kernel oops (rather than just send a SIGSEGV) is <br />that the page fault "error code" is zero (that's the number that is <br />printed out just after the "Oops" string). For a normal user space access, <br />you should have bit #2 set in the error code.<br /><br />So the kernel thinks it's a kernel page fault, because the page fault <br />error code says so. But everything else seems to indicate that it's really <br />user mode.. It would be very interesting to hear when this started <br />happening.<br /><br />Even if you cannot bisect it down all the way, since you say that you do <br />almost daily kernel testing, is this really new to 2.6.23-rc6-git2, and <br />2.6.23-rc6-git1 was fine? <br /><br />Andi, anything comes to mind?<br /><br />			Linus<br /><br />---<br />&gt; [ 7487.208128] Unable to handle kernel paging request at 00000000ff019b53 RIP:<br />&gt; [ 7487.212752]  [&lt;0000000000510eea&gt;]<br />&gt; [ 7487.218537] PGD 10c1a2067 PUD 0<br />&gt; [ 7487.221811] Oops: 0000 [1] SMP<br />&gt; [ 7487.224989] CPU 2<br />&gt; [ 7487.227024] Modules linked in: loop<br />&gt; [ 7487.230550] Pid: 19139, comm: crashme Not tainted 2.6.23-rc6-git2 #1<br />&gt; [ 7487.236896] RIP: 0033:[&lt;0000000000510eea&gt;]  [&lt;0000000000510eea&gt;]<br />&gt; [ 7487.242925] RSP: 002b:00007fffc9a8ec10  EFLAGS: 00010e83<br />&gt; [ 7487.248234] RAX: 00000000ffff8c4a RBX: 00000000004014f1 RCX: 00002b20e11c8b37<br />&gt; [ 7487.255361] RDX: 0000000000510ee0 RSI: 0000000000000000 RDI: 000000000000000a<br />&gt; [ 7487.262489] RBP: 00007fffc9a8ec10 R08: 00007fffc9a8eb60 R09: 0000000000000000<br />&gt; [ 7487.269616] R10: 0000000000000008 R11: 0000000000000612 R12: 0000000000000000<br />&gt; [ 7487.276743] R13: 00007fffc9a8ee00 R14: 0000000000000000 R15: 0000000000000000<br />&gt; [ 7487.283871] FS:  00002b20e13676d0(0000) GS:ffff81011fc75840(0000) knlGS:0000000000000000<br />&gt; [ 7487.291952] CS:  0010 DS: 0000 ES: 0000 CR0: 000000008005003b<br />&gt; [ 7487.297693] CR2: 00000000ff019b53 CR3: 000000005be6b000 CR4: 00000000000006e0<br />&gt; [ 7487.304821] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000<br />&gt; [ 7487.311949] DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400<br />&gt; [ 7487.319076] Process crashme (pid: 19139, threadinfo ffff810106830000, task ffff810102cf5040)<br />&gt; [ 7487.327511]<br />&gt; [ 7487.329009] RIP  [&lt;0000000000510eea&gt;]<br />&gt; [ 7487.332690]  RSP &lt;00007fffc9a8ec10&gt;<br />&gt; [ 7487.336180] CR2: 00000000ff019b53<br />&gt; [ 7487.339810] Kernel panic - not syncing: Fatal exception<br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.kernel.org<br />More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html">http://vger.kernel.org/majordomo-info.html</a><br />Please read the FAQ at  <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
