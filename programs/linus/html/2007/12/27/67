    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2007/12/25/12">First message in thread</a></li><li><a href="/lkml/2007/12/25/12">Arjan van de Ven</a><ul><li><a href="/lkml/2007/12/27/32">Jeff Garzik</a><ul><li><a href="/lkml/2007/12/27/41">Arjan van de Ven</a></li><li class="origin"><a href="">Linus Torvalds</a></li></ul></li><li><a href="/lkml/2008/1/11/264">Greg KH</a><ul><li><a href="/lkml/2008/1/11/268">Arjan van de Ven</a><ul><li><a href="/lkml/2008/1/11/270">Greg KH</a></li></ul></li><li><a href="/lkml/2008/1/11/273">Matthew Wilcox</a><ul><li><a href="/lkml/2008/1/11/275">Arjan van de Ven</a><ul><li><a href="/lkml/2008/1/11/278">Greg KH</a></li></ul></li></ul></li><li><a href="/lkml/2008/1/11/281">Arjan van de Ven</a><ul><li><a href="/lkml/2008/1/11/292">Greg KH</a></li></ul></li></ul></li><li><a href="/lkml/2008/1/15/143">=?iso-8859-1?Q?=D8yvind_V=E5gen_J=E6gtnes?=</a></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Thu, 27 Dec 2007 09:52:44 -0800 (PST)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [Patch v2] Make PCI extended config space (MMCONFIG) a driver opt-in</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Thu, 27 Dec 2007, Jeff Garzik wrote:<br />&gt; <br />&gt; 2) [non-minor] hmmmm.<br />&gt; <br />&gt; 	[jgarzik&#64;core ~]$ lspci -n | wc -l<br />&gt; 	23<br />&gt; <br />&gt; So I would have to perform 23 sysfs twiddles, before I could obtain a full and<br />&gt; unabridged 'lspci -vvvxxx'?<br /><br />Or you force it on with "pci=mmconfig" or something at boot-time.<br /><br />But yes. The *fact* is that MMCONFIG has not just been globally broken, <br />but broken on a per-device basis. I don't know why (and quite frankly, I <br />doubt anybody does), but the PCI device ID corruption happened only for a <br />specific set of devices.<br /><br />Whether it was a timing issue with particular devices or whether it was a <br />timing issue with some particular bridge (and could affect any devices <br />behind that bridge), who knows... It almost certainly was brought on by a <br />borderline (or broken) northbridge, but it apparently only affected <br />specific devices - which makes me suspect that it wasn't *entirely* due to <br />just the northbridge, and it was a combination of things.<br /><br />I don't understand why you cannot seem to accept that per-device thing, in <br />the face of clear data that yes, it really *is* per-device. Not to mention <br />the fact that the way MMIO config setups work, you may well have entire <br />buses that simply aren't accessible with MMIO config at all (because the <br />MMIO config window is not large enough).<br /><br />Furthermore, please accept the fact that of those 23 devices, exactly <br />*none* will actually care. So yes, you'd have to enable it manually for <br />those individual devices, but that's only if you want to do something <br />totally pointless in the first place.<br /><br />So stop this totally inane "it has to be global" crap. It doesn't have to <br />be global at all, and we have hard data showing that it really SHOULD NOT <br />be a global flag.<br /><br />		Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
