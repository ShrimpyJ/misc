    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2007/8/30/234">First message in thread</a></li><li><a href="/lkml/2007/8/31/64">Linus Torvalds</a><ul><li><a href="/lkml/2007/8/31/75">Jakob Oestergaard</a><ul><li class="origin"><a href="/lkml/2007/9/3/118">Linus Torvalds</a><ul><li><a href="/lkml/2007/9/3/118">Jakob Oestergaard</a><ul><li><a href="/lkml/2007/9/3/127">Martin Knoblauch</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/2007/8/31/118">Trond Myklebust</a><ul><li><a href="/lkml/2007/8/31/125">Frank van Maarseveen</a><ul><li><a href="/lkml/2007/8/31/137">Trond Myklebust</a><ul><li><a href="/lkml/2007/8/31/155">Frank van Maarseveen</a></li></ul></li></ul></li><li><a href="/lkml/2007/9/4/18">David Howells</a></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Fri, 31 Aug 2007 09:43:29 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: recent nfs change causes autofs regression</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Fri, 31 Aug 2007, Jakob Oestergaard wrote:<br />&gt; <br />&gt; &gt; The fact that he may *also* have broken insane setups is totally <br />&gt; &gt; irrelevant. Don't go off on some tangent that has nothing to do with the <br />&gt; &gt; regression in question!<br />&gt; <br />&gt; It does not have "nothing" to do with the regression.<br />&gt; <br />&gt; Some setups which worked more by accident than by design earlier on were broken<br />&gt; by the fix. This could have been avoided, I agree, but the breakage was caused<br />&gt; by the fix (or the breakage is the fix, however you prefer to look at it).<br /><br />Well, it's not a "fix" if it breaks other setups. <br /><br />It's especially not a fix since the whole requirement that all the flags <br />be exactly the same is totally brain-dead in the first place. We *have* <br />that kind of mount already, and it has nothing to do with NFS: it's called <br />a "bind" mount.<br /><br />So if you want an identical mount, with cache coherency and tying the two <br />mount-points together (requiring that they have the same mount flags), <br />then that has absolutely *nothing* to do with NFS. The VFS layer does that <br />for you.<br /><br />&gt; *part* of it wasn't a security hole.<br />&gt; <br />&gt; The other half very much was.<br /><br />No, the fix was simply wrong.  It was done the wrong way, and it broke <br />things it shouldn't have broken.<br /><br />Let's put it this way: if I create a patch that stops the system from <br />booting, I sure as hell fix a potential security hole, don't I?<br /><br />Does that make my patch a "fix"?<br /><br />No it does not.<br /><br />&gt; Sure, given that Trond (or whomever) has the time it takes to go and implement<br />&gt; all of this, there's no need to screw anyone.<br />&gt; <br />&gt; Assuming he's on a schedule and this will have to wait, I agree with him that<br />&gt; it makes the most sense to play it safe security/consistency-wise rather than<br />&gt; functionality-wise.<br /><br />I disagree. Either that thing gets fixed before 2.6.23, or the commit that <br />introduced the broken behaviour gets reverted.<br /><br />We've had this policy of "regressions are fixed" for a long time, and <br />we're not suddenly changing it.<br /><br />This is *not* a security hole. In order to make it a security hole, you <br />need to be root in the first place. So what you call a security hole is <br />really no different from root installing a bad SUID binary. It's simply <br />not the kernels place to then say "SUID binaries will not work, because <br />it's a potential security hole".<br /><br />See?<br /><br />So stop calling this a security hole.  It's certainly a misfeature, but:<br /><br /> - it's a misfeature that people are used to, and has been around forever.<br /><br /> - there are bound to be ways to fix it that don't break existing users.<br /><br /> - the requirement that all flags be the same for a mount to the same NFS <br />   directory is *particularly* stupid, since there are better ways to do <br />   that than go through NFS!<br /><br />so I really don't see why people excuse the new behaviour.<br /><br />			Linus<br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.kernel.org<br />More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html">http://vger.kernel.org/majordomo-info.html</a><br />Please read the FAQ at  <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
