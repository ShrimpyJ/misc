    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2000/7/27/214">First message in thread</a></li><li><a href="/lkml/2000/7/28/231">Linus Torvalds</a><ul><li><a href="/lkml/2000/7/29/60">"Albert D. Cahalan"</a><ul><li class="origin"><a href="/lkml/2000/7/30/60">Linus Torvalds</a><ul><li><a href="/lkml/2000/7/30/60">Alexander Viro</a></li><li><a href="/lkml/2000/7/31/12">"Albert D. Cahalan"</a></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Sun, 30 Jul 2000 10:31:16 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: sysconf (was Re: RLIM_INFINITY inconsistency between archs)</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Sat, 29 Jul 2000, Albert D. Cahalan wrote:<br />&gt; <br />&gt; ARM systems can have HZ be either 100 or 64, because some hardware<br />&gt; does not support 100. MIPS, Alpha, and ia64 all seem to support more<br />&gt; than one HZ value. According to you, binaries should not depend on<br />&gt; what platform they were compiled for. Asking the admin to supply HZ<br />&gt; is silly when the kernel damn well knows what it is. So there is no<br />&gt; sane way to even create this "/etc/sysconf" file you propose.<br /><br />No.<br /><br />You're asking the wrong question.<br /><br />There is no sane reason for the OS to expose HZ. We did it for historical<br />reasons, because it is the easy thing to do. But you have to understand<br />what the primary objective of an OS is: to create a virtual environment<br />that is simple and sane to program against.<br /><br />The fact that you think you need sysconf() means that the OS is not doing<br />a good job!<br /><br />And that is one of the fundamental arguments against a sysconf() system<br />call. It is an implicit admission that there is something wrong, and<br />instead of fixing it you expose some interface that gives whatever random<br />fixed numbers the kernel was compiled with. <br /><br />&gt; &gt; Oh. And how do you handle 2.2.x kernels that don't have it?<br />&gt; <br />&gt; Fall back to the existing hacks as needed, then drop support<br />&gt; for 2.2.x after 3.0.x is out.<br /><br />And you do not see what is wrong with this?<br /><br />Have you learned nothing at all from DOS and Windows?<br /><br />Have you no _taste_?<br /><br />And do you not realize that features never get dropped: they just end up<br />increasing the binary size and icache pressure forever?<br /><br />I have yet to hear a _single_ argument that invalidates the "mmap<br />/proc/sysconf" approach. Your HZ argument does _not_ do it. It's very easy<br />indeed for an install-script to determine what kind of machine it runs on,<br />and then write the appropriate value to /etc/sysconf. This is not rocket<br />science.<br /><br />Your previous argument was CPU hotplug. I told you then that you could<br />just have simple administration tools to update the /etc/sysconf file.<br />What is it about this that you refuse to understand?<br /><br />With /etc/sysconf all of the problems just magically go away. <br /><br />&gt; This is a maintenance horror for millions of clueless sysadmins.<br />&gt; Going with binary makes the horror worse, while going with text<br />&gt; will help slow down every Linux executable using glibc.<br /><br />The binary file is generated pretty much _once_. At glibc installation<br />time. Make it automatic when you install the glibc rpm. The same way that<br />"ldconfig" is run automatically. What's so hard to administer?<br /><br />Once your adminstrator starts hot-swapping CPU's and memory etc, he can<br />just re-run the generation tool. Or use perl scripts or whatever to do it<br />especially. Trust me, when you do hot-plug anything, you need to<br />administer it. It doesn't have to be hard.<br /><br />		Linus<br /><br /><br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.rutgers.edu<br />Please read the FAQ at <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
