    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2000/7/19/92">First message in thread</a></li><li><a href="/lkml/2000/7/19/92">David Hinds</a><ul><li class="origin"><a href="">(Linus Torvalds)</a></li><li><a href="/lkml/2000/8/7/129">Linus Torvalds</a></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">(Linus Torvalds)</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [BUG] PCMCIA CardBus problems</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">19 Jul 2000 18:14:10 -0700</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">In article &lt;20000719154955.U21194&#64;valinux.com&gt;,<br />David Hinds  &lt;dhinds&#64;valinux.com&gt; wrote:<br />&gt;I think the problem is that the CardBus bridge setup code in 2.4 only<br />&gt;allocates 256 bytes of IO space, total, per socket, and this card<br />&gt;requires two 256-byte IO windows, one for each device.  So the<br />&gt;allocation for resource 0 for the second device (the modem) fails.<br />&gt;<br />&gt;I tried poking around to figure out where this is set but I couldn't<br />&gt;find it.  Martin probably knows exactly where to look.<br />&gt;<br />&gt;Hmmm.  Actually, now that I think about it, maybe this is not so easy<br />&gt;as bumping a limit up from 0x100 to 0x200.  The IO port allocation<br />&gt;code in 2.4 assumes that the only safe IO port regions for PCI devices<br />&gt;are 0x400-0x4ff, 0x800-0x8ff, 0xa00-0x8ff, etc.  A card like this that<br />&gt;needs &gt;256 ports will need to have them split up into non-contiguous<br />&gt;pieces.  However, the resource manager expects a PCI bus to have a<br />&gt;single parent IO resource that can get cut up in any arbitrary way.<br /><br />Hmm..  The 256-byte limitation was something I was wondering about:<br />there's really not all that strong a reason for it these days, and I<br />_think_ a PCI decode should override a old-time ISA decode anyway. <br /><br />So we might change the 256-byte check into a warning rather than an<br />error.. Martin?<br /><br />		Linus<br /><br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.rutgers.edu<br />Please read the FAQ at <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
