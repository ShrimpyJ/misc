    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2000/7/13/198">First message in thread</a></li><li><a href="/lkml/2000/7/13/198">"Khimenko Victor"</a><ul><li class="origin"><a href="/lkml/2000/7/13/226">Linus Torvalds</a><ul><li><a href="/lkml/2000/7/13/226">"Khimenko Victor"</a><ul><li><a href="/lkml/2000/7/14/12">"H. Peter Anvin"</a><ul><li><a href="/lkml/2000/7/14/53">"Khimenko Victor"</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/2000/7/14/11">"H. Peter Anvin"</a><ul><li><a href="/lkml/2000/7/14/55">"Khimenko Victor"</a></li><li><a href="/lkml/2000/7/14/57">OKUJI Yoshinori</a><ul><li><a href="/lkml/2000/7/14/126">"H. Peter Anvin"</a></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Thu, 13 Jul 2000 17:47:30 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: Bug in kernel - how to make big kernel bootable with GRUB (was Re:    Linux 2.4.0-Test{1,2} with Grub (I think I found the answer))</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Fri, 14 Jul 2000, Khimenko Victor wrote:<br />&gt; <br />&gt; Huh. Patch is trivial. Really trivial. Just one problem: I do not think it'll<br />&gt; be applied. Since it's TWO patches: one for kernel and one for GRUB.<br /><br />Actually, the only problem with the patch is that it is not<br />byte-order-safe, which means that you cannot cross-compile from a<br />big-endian host.<br /><br />I don't see any real problem in extending syssize to be 4 bytes, as the<br />two ne wbytes that it writes over are the "swap_dev" bytes that I don't<br />think anybody ever used. We might as well get rid of them. And thanks to<br />being little-endian, it would not change for loaders that don't know about<br />the new 4-byte format (the two low bytes are still the same).<br /><br />So I won't apply the patch as-is, but fix it to be endian-safe and get<br />some input from other bootloaders (assuming they all agree that swap_dev<br />is a non-issue - which I think they will) and I _will_ apply it.<br /><br />&gt; Who's the bright idea was to extend maximum kernel beyond 1MB and STILL write<br />&gt; only two bytes of sys_size in boot sector anyway ? And why it was done via<br />&gt; buf in first place ?<br /><br />I'd be careful about calling other people stupid if you don't understand<br />the code.<br /><br />Using "buf" the way the code used it meant that people whose native<br />byte-order was big-endian would still be able to build images. Performance<br />was never a big issue here, so it works fine. It may not be pretty, but I<br />doubt beauty was a big issue either ;)<br /><br />The field never got extended because nobody really needed it extended.<br />That's as simple as it can get, no?<br /><br />		Linus<br /><br /><br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.rutgers.edu<br />Please read the FAQ at <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
