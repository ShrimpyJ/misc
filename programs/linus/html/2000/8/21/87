    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2000/8/21/25">First message in thread</a></li><li><a href="/lkml/2000/8/21/137">Philipp Rumpf</a><ul><li><a href="/lkml/2000/8/21/76">Philipp Rumpf</a><ul><li><a href="/lkml/2000/8/21/71">Alan Cox</a><ul><li><a href="/lkml/2000/8/21/125">Jes Sorensen</a></li></ul></li><li class="origin"><a href="/lkml/2000/8/21/58">Linus Torvalds</a><ul><li><a href="/lkml/2000/8/21/58">Alan Cox</a></li><li><a href="/lkml/2000/8/21/69">Philipp Rumpf</a><ul><li><a href="/lkml/2000/8/21/132">Linus Torvalds</a></li></ul></li><li><a href="/lkml/2000/8/21/88">Vojtech Pavlik</a><ul><li><a href="/lkml/2000/8/22/102">Linus Torvalds</a></li></ul></li><li><a href="/lkml/2000/8/22/41">(Rogier Wolff)</a><ul><li><a href="/lkml/2000/8/22/46">"Eric S. Raymond"</a></li></ul></li><li><a href="/lkml/2000/8/22/89">David Woodhouse</a><ul><li><a href="/lkml/2000/8/22/32"> tytso&#64;valinux ...</a></li><li><a href="/lkml/2000/8/22/37">Philipp Rumpf</a></li><li><a href="/lkml/2000/8/22/59">Vojtech Pavlik</a></li><li><a href="/lkml/2000/8/22/83">(Rogier Wolff)</a></li></ul></li><li><a href="/lkml/2000/8/25/171">Jeff Randall</a></li></ul></li></ul></li><li><a href="/lkml/2000/8/21/99">Brendan Cully</a></li><li><a href="/lkml/2000/8/21/106">Linus Torvalds</a></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Mon, 21 Aug 2000 14:01:59 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [PATCH] Re: Move of input drivers, some word needed from you</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Mon, 21 Aug 2000, Philipp Rumpf wrote:<br /><br />&gt; On Mon, Aug 21, 2000 at 12:02:03PM -0700, Linus Torvalds wrote:<br />&gt; &gt; <br />&gt; &gt; Yes, people always worry about common chips, but they don't happen all<br />&gt; &gt; that often in the end, and the pain from trying to share the code is<br />&gt; &gt; usually much MUCH bigger than the pain from just occasionally stealing<br />&gt; &gt; code from the other guy.<br />&gt; <br />&gt; So you think it's a good thing we have 5 serial drivers rather than one, and<br />&gt; it'd be a good thing to split up the one we have into several drivers again ?<br /><br />Probably.<br /><br />Which does not mean that we should just duplicate all the code. The same<br />way we don't duplicate the whole TCP/IP stack for each network card<br />driver. There are tons of common issues in serial cards, and it's probably<br />a good idea to have common code. But you should not take it too far.<br /><br />I think the current serial.c is starting to be a major mistake. That one<br />driver tries to handle everything from the original 16450 all the way up<br />to serial multi-port cards that happen to just be multiple 16550's with<br />some tweaks. As a result, the driver is quite complex and huge and is a<br />mess of #ifdef CONFIG_xxx.<br /><br />A lot of serial.c is actually completely hardware-independent, and<br />serial.c in many ways is already "two drivers", in that it both knows how<br />to handle the low-level hardware AND it knows how to handle the<br />higher-level issues. And I don't think it would be bad to split it up some<br />more.<br /><br />I would not be unhappy to have separate drivers for different chipsets,<br />and even if you want to have the same driver for a 16450 and a 16550 (they<br />_are_ quite close, after all), it's not clear that it makes sense to do<br />the same thing for the multiport things etc.<br /><br />&gt; I think what might be saving us right now is that there is only one widely-used<br />&gt; bus architecture (PCI and it's derivatives/predecessors), so no-one is going to<br />&gt; implement conflicting new features in both parts of a split driver.<br /><br />And this is not going to change. Everything but PCI is dead, and there<br />isn't going to be multiple different buses. Sure, we'll have some serial<br />new-generation stuff, and we'll continue to have things like USB, but I'm<br />not worried about having the same chip on different buses. It'<br />s a thing of the past.<br /><br />&gt; I don't think "there aren't going to be a great many file in this directory"<br />&gt; is really a good argument against creating a directory, except for the very<br />&gt; special case that there would be no files at all in it.<br /><br />I think you're wrong. <br /><br />Logical naming and hierarchy are only helpers. If they lead to people<br />finding the files more quickly and understanding them better, they are<br />doing their job.<br /><br />If hierarchy leads to having to look more places, think about it more, and<br />just more work, that hierarchy is BAD. It doesn't matter if it is logical<br />or not. It sucks. It just ends up being in your way.<br /><br />We could create a subdirectory for each driver. In some cases we _do_<br />that (tulip and ide come to mind). But in the end, it should be done only<br />when it clarifies things, not just because somebody thinks it "ought" to<br />be that way.<br /><br />And "there aren't going to be many files in this directory" is an argument<br />against it. It means that the directory doesn't end up clarifying things<br />very much at all.<br /><br />		Linus<br /><br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.kernel.org<br />Please read the FAQ at <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
