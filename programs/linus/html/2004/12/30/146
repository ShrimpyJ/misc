    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2004/12/29/148">First message in thread</a></li><li><a href="/lkml/2004/12/30/132">Linus Torvalds</a><ul><li><a href="/lkml/2004/12/30/142">"Georg C. F. Greve"</a><ul><li class="origin"><a href="/lkml/2004/12/30/195">Linus Torvalds</a><ul><li><a href="/lkml/2004/12/30/195">Herbert Poetzl</a><ul><li><a href="/lkml/2004/12/30/199">Linus Torvalds</a></li></ul></li><li><a href="/lkml/2004/12/31/27">"Georg C. F. Greve"</a></li><li><a href="/lkml/2005/1/1/38">Alan Cox</a></li></ul></li><li><a href="/lkml/2005/1/2/71">Linus Torvalds</a><ul><li><a href="/lkml/2005/1/2/79">Dave Jones</a></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Thu, 30 Dec 2004 14:23:01 -0800 (PST)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: PROBLEM: Kernel 2.6.10 crashing repeatedly and hard</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Thu, 30 Dec 2004, Georg C. F. Greve wrote:<br />&gt; <br />&gt;  lt&gt; Any chance that you can get a full oops, with register info?<br />&gt;  lt&gt; Right now your errors only have the call trace, not the registers<br />&gt;  lt&gt; or the EIP itself..<br />&gt; <br />&gt; Yes, for the first two times, the top of the crash report scrolled off<br />&gt; the screen and I don't have a serial console handy. The third crash<br />&gt; contained the <br />&gt; <br />&gt;  EFLAGS: 00010002   (2.6.10)<br />&gt;  EIP is at free_block+0x45/0xd0<br />&gt;  eax: 46484849   ebx: df2b1000   ecx: df2b1050   edx: df2ab000<br />&gt;  esi: c183cd80   edi: 00000001   ebp: 00000018   esp: c188fef8<br />&gt;  ds: 007b   es: 007b   ss: 0068<br />&gt;  Process events/0 (pid: 6, threadinfo:c188e000 task=c185ca20)<br />&gt;  Stack: c183cdb8 c1858810 c1858800 00000018 c183cd80 c0141724 c183cd80 c1858810<br />&gt;         00000018 c183ccb8 c183cd80 00000002 c183cce0 c01417c6 c183cd80 c1858800<br />&gt;         00000000 c183ccb8 c183ce10 00000003 c170fc20 c183b000 c170fc24 00000000<br />&gt; <br />&gt; header, which I think may contain what you were looking for.<br /><br />Ok. This is apparently a slab cache corruption issue.<br /><br />Can you compile with SLAB_DEBUG and DEBUG_PAGEALLOC turned on, since that <br />may well catch something in the act (or it may make the machine so <br />unusably slow that it's not funny - who knows..)<br /><br />&gt; Meanwhile, because of the trouble, I gave Alans patch-2.6.10-ac1 a try<br />&gt; and again put ext3 on dm-crypt on raid5, and: No crash so far despite<br />&gt; moving and removing ~100 gigabytes a couple of times on to/from the<br />&gt; partition.<br /><br />Goodie. Maybe Alan already knows what it's about. Alan? Any slab <br />corruption or wild pointers that you are aware of? However:<br /><br />&gt; I did however get occasional<br />&gt; <br />&gt;  EXT3-fs error (device dm-0): ext3_readdir: bad entry in directory #37306376: directory entry across blocks - offset=0, inode=3350155169, rec_len=11148, name_len=1<br /><br />I suspect that it's more of the slab corruption thing, and Alan's patch <br />ended up moving something around subtly enough that you don't get the <br />crash, but instead get corrupted buffer heads or similar.. Your BTTV <br />issues are interesting, though.<br /><br />		Linus<br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.kernel.org<br />More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html">http://vger.kernel.org/majordomo-info.html</a><br />Please read the FAQ at  <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
