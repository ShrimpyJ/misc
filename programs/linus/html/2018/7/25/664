    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2018/7/24/409">First message in thread</a></li><li><a href="/lkml/2018/7/24/940">Andrew Morton</a><ul><li><a href="/lkml/2018/7/25/367">"Kirill A. Shutemov"</a><ul><li class="origin"><a href="">Linus Torvalds</a></li><li><a href="/lkml/2018/7/25/773">Andrew Morton</a><ul><li><a href="/lkml/2018/7/26/569">"Kirill A. Shutemov"</a></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Wed, 25 Jul 2018 10:33:41 -0700</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [PATCHv3 1/3] mm: Introduce vma_init()</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">On Wed, Jul 25, 2018 at 5:39 AM Kirill A. Shutemov &lt;kirill&#64;shutemov.name&gt; wrote:<br />&gt;<br />&gt; There are few more:<br />&gt;<br />&gt; arch/arm64/include/asm/tlb.h:   struct vm_area_struct vma = { .vm_mm = tlb-&gt;mm, };<br />&gt; arch/arm64/mm/hugetlbpage.c:    struct vm_area_struct vma = { .vm_mm = mm };<br />&gt; arch/arm64/mm/hugetlbpage.c:    struct vm_area_struct vma = { .vm_mm = mm };<br /><br />We probably do not care. These are not "real" vma's and are never used<br />as such. They are literally just fake vmas for the "flush_tlb()"<br />machinery, which won't ever really cause any VM activity and will just<br />call back to the architecture TLB flushing routines.<br /><br />They initialize vm_mm exactly because that's how the mm is passed down<br />to the tlb flushing (we pass the whole vma because some architectures<br />than have special flags in vm_flags too that can affect how the TLB<br />gets flushed - ie "only flush ITLB if it's an execute-only vma" etc).<br /><br />Using "vma_init()" on them is only confusing, I think.<br /><br />                 Linus<br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
