    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2019/9/28/96">First message in thread</a></li><li><a href="/lkml/2019/9/28/96">Thomas Gleixner</a><ul><li><a href="/lkml/2019/9/28/100">Linus Torvalds</a><ul><li><a href="/lkml/2019/9/29/21">Thomas Gleixner</a></li><li><a href="/lkml/2019/9/29/27">"Alexander E. Patrakov"</a></li><li class="origin"><a href="/lkml/2019/9/29/493">Linus Torvalds</a><ul><li><a href="/lkml/2019/9/29/493">Linus Torvalds</a><ul><li><a href="/lkml/2019/9/30/24">Borislav Petkov</a></li></ul></li><li><a href="/lkml/2019/9/29/501">"Theodore Y. Ts'o"</a><ul><li><a href="/lkml/2019/9/30/340">"Theodore Y. Ts'o"</a></li></ul></li></ul></li><li><a href="/lkml/2019/10/1/791">"Ahmed S. Darwish"</a><ul><li><a href="/lkml/2019/10/1/814">Kees Cook</a><ul><li><a href="/lkml/2019/10/1/1099">"Ahmed S. Darwish"</a></li></ul></li><li><a href="/lkml/2019/10/1/1103">Linus Torvalds</a><ul><li><a href="/lkml/2019/10/6/171">Pavel Machek</a></li></ul></li><li><a href="/lkml/2019/10/2/247">"Theodore Y. Ts'o"</a></li></ul></li><li><a href="/lkml/2019/10/6/169">Pavel Machek</a><ul><li><a href="/lkml/2019/10/6/341">Linus Torvalds</a><ul><li><a href="/lkml/2019/10/6/437">Pavel Machek</a></li></ul></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Sun, 29 Sep 2019 18:16:33 -0700</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: x86/random: Speculation to the rescue</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">On Sat, Sep 28, 2019 at 4:53 PM Linus Torvalds<br />&lt;torvalds&#64;linux-foundation.org&gt; wrote:<br />&gt;<br />&gt; But hey, here's a made-up patch. It basically does jitter entropy, but<br />&gt; it uses a more complex load than the fibonacci LFSR folding: it calls<br />&gt; "schedule()" in a loop, and it sets up a timer to fire.<br /><br />Ok, I'm sure a lot of people will end up finding this distasteful, and<br />I'll admit to just waffling about it myself.<br /><br />But I am supposed to close the merge window today, and honestly, I<br />want _something_ to happen about the getrandom() issue during the 5.4<br />merge cycle.<br /><br />So I had a few choices<br /><br /> - just ignore things and hope some consensus happens<br /><br /> - start the movement to a new getrandom() interface and encourage<br />user space to say "yeah, I don't need _secure_ random numbers"<br /><br /> - or just say "hey, a lot of people find jitter entropy reasonable,<br />so let's just try this".<br /><br />And I went with that last choice. If it works, it makes the<br />getrandom() interface changes a non-issue.<br /><br />I'm not saying my patch is going to be the last word on the issue. I'm<br />_personally_ ok with it and believe it's not crazy, and if it then<br />makes serious people go "Eww" and send some improvements to it, then<br />it has served its purpose.<br /><br />But I've committed that patch and the revert of the ext4 revert to a<br />local branch, I'll do some basic testing of it (which honestly on my<br />machines are kind of pointless, since all of them support rdrand), but<br />assuming it passes the basic smoke tests - and I expect it to - I'll<br />merge it for rc1.<br /><br />I also have my old readdir branch that I decided I want to merge due<br />to the (completely independent) discussion about filldir issues, so<br />I'll probably end up delaying rc1 until tomorrow, but just a heads up.<br />I don't want to leave this until "some time later in the -rc series",<br />although I will be _more_ than happy to have people send me fixes to<br />my somewhat simplistic patch.<br /><br />That said, my patch may be simplistic, but I suspect using a loop with<br />a real load like schedule() and arming a timer is a lot more realistic<br />than some of the jitter entropy papers with their _very_ trivial<br />LFSR's and some made-up pointer chasing.<br /><br />But yeah, I think improvements to it are also not unexpected or unreasonable ;)<br /><br />              Linus<br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
