    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2014/10/12/207">First message in thread</a></li><li><a href="/lkml/2014/10/12/207">Dave Chinner</a><ul><li class="origin"><a href="/lkml/2014/10/13/469">Linus Torvalds</a><ul><li><a href="/lkml/2014/10/13/469">Dave Chinner</a></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Mon, 13 Oct 2014 05:48:18 -0400</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [GIT PULL] xfs: updates for 3.18-rc1</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">On Sun, Oct 12, 2014 at 9:37 PM, Dave Chinner &lt;david&#64;fromorbit.com&gt; wrote:<br />&gt;<br />&gt; i.e. I have generated this pull-req from the base tree I've been working<br />&gt; on (3.17-rc2) but there have already been commits merged into a more<br />&gt; recent upstream tree (3.17-rc4) in this tree. When I generate the<br />&gt; pull request from the underlying 3.17-rc2 branch, it includes all<br />&gt; those commits, both in the summary and the diffstat. If I base the<br />&gt; pull request off 3.17, the base commit is the last one that was<br />&gt; merged into your tree, and the diffstat and commit list reflect<br />&gt; that.<br /><br />That's fine, and works for me too. This is normal and expected for<br />stuff that has gotten into my tree other ways (ie bugfixes that were<br />cherrypicked to be backported from development trees etc).  I'm used<br />to it, and while I hope people minimize it (not only because of<br />multiple commits showing up with the same patch, but because it can<br />easily cause stupid merge conflicts because the development tree then<br />made further changes on top of the same patch), it's also very much<br />considered "normal development".<br /><br />That said, when there are actual *common* commits as in your case (as<br />opposed to cherrypicked commits that generate duplicate commits with<br />the same patch), I would generally suggest you just let "git<br />merge-base" figure it all out from my latest tree. That way it takes<br />into account the stuff that you sent earlier on its own.<br /><br />But this is not a big deal.<br /><br />&gt; So my question is this: Which tree should I generate the pull<br />&gt; request from? I flipped a coin an generated this one from 3.17-rc2,<br />&gt; but if you'd prefer to see just the commits/diffstat that aren't in<br />&gt; your tree, let me know and I'll do it differently next time....<br /><br />Normally, I'd suggest the easiest way to handle things is to have a<br />"linus" branch that tracks my upstream, and then just generate the<br />pull request off that. Git will figure out the latest merge base and<br />just do the right thing, and you don't need to really think about<br />where you forked things off, and which parts you have already sent to<br />me.<br /><br />As mentioned, even then the diffstat doesn't always end up being<br />exactly right, because the history with partially merged branches, and<br />with potential cherry-picked commits. So I am not surprised or upset<br />if the diffstat doesn't always match, it happens quite commonly. I go<br />on a rant when that i sdue to bad development practices, but I don't<br />see anything like that in your tree.<br /><br />Some people avoid this by actually generating a test-merge (to warn me<br />about upcoming conflicts etc), and then generate the diffstat from<br />that test merge instead of just using the plain "git diff" in the<br />git-pull-request helper scripts. Whatever works. This is not a huge<br />deal, exactly because it's "normal development" (unlike the<br />back-merges issue).<br /><br />And in this case, it looks like you don't even have cherry-picks, but<br />just shared common branches, some of which you sent earlier. It looks<br />like the diffstat if you just use my current tree as the other point<br />of the git merge-base is correct, although I haven't actually done the<br />merge itself yet (still waiting for the build for the previous merge<br />to finish).<br /><br />                Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
