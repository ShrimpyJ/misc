    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2014/11/14/656">First message in thread</a></li><li><a href="/lkml/2014/11/26/22">Linus Torvalds</a><ul><li><a href="/lkml/2014/11/26/36">Juergen Gross</a></li><li><a href="/lkml/2014/11/26/101">Juergen Gross</a></li><li><a href="/lkml/2014/11/26/303">Dave Jones</a><ul><li class="origin"><a href="">Linus Torvalds</a></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Wed, 26 Nov 2014 09:37:25 -0800</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: frequent lockups in 3.18rc4</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">On Wed, Nov 26, 2014 at 6:34 AM, Dave Jones &lt;davej&#64;redhat.com&gt; wrote:<br />&gt;<br />&gt; Woke up to the below trace. Looks like a different issue.<br /><br />Yeah, apparently the Xen issue was really just a Xen bug.<br /><br />&gt; NMI watchdog: BUG: soft lockup - CPU#2 stuck for 22s! [trinity-c149:24766]<br />&gt; RIP: 0010:[&lt;ffffffff8104658c&gt;]  [&lt;ffffffff8104658c&gt;] kernel_map_pages+0xbc/0x120<br /><br />Well, this one at least makes some amount of sense. The "Code:" line says it's<br /><br />  1b: 9c                   pushfq<br />  1c: 5a                   pop    %rdx<br />  1d: fa                   cli<br />  1e: 0f 20 e0             mov    %cr4,%rax<br />  21: 48 89 c1             mov    %rax,%rcx<br />  24: 80 e1 7f             and    $0x7f,%cl<br />  27: 0f 22 e1             mov    %rcx,%cr4<br />  2a: 0f 22 e0             mov    %rax,%cr4<br />  2d: 52                   push   %rdx<br />  2e: 9d                   popfq<br />  2f:* eb cf                 jmp    back &lt;-- trapping instruction<br /><br />and %rdx is 0x0202 which is actually a valid flags value.<br /><br />That looks like the code for __native_flush_tlb_global().<br /><br />Not that interrupt should have been disabled very long.<br /><br />&gt; Call Trace:<br />&gt;  [&lt;ffffffff81185ebf&gt;] get_page_from_freelist+0x49f/0xaa0<br />&gt;  [&lt;ffffffff811866ee&gt;] __alloc_pages_nodemask+0x22e/0xb60<br />&gt;  [&lt;ffffffff811d093e&gt;] alloc_pages_vma+0xee/0x1b0<br />&gt;  [&lt;ffffffff81194f0e&gt;] shmem_alloc_page+0x6e/0xc0<br />&gt;  [&lt;ffffffff81197880&gt;] shmem_getpage_gfp+0x4d0/0x7e0<br />&gt;  [&lt;ffffffff81197bd2&gt;] shmem_write_begin+0x42/0x70<br />&gt;  [&lt;ffffffff8117c2d4&gt;] generic_perform_write+0xd4/0x1f0<br />&gt;  [&lt;ffffffff8117eac2&gt;] __generic_file_write_iter+0x162/0x350<br />&gt;  [&lt;ffffffff8117ecef&gt;] generic_file_write_iter+0x3f/0xb0<br />&gt;  [&lt;ffffffff811f01b8&gt;] do_iter_readv_writev+0x78/0xc0<br />&gt;  [&lt;ffffffff811f19e8&gt;] do_readv_writev+0xd8/0x2a0<br />&gt;  [&lt;ffffffff811f1c3c&gt;] vfs_writev+0x3c/0x50<br />&gt;  [&lt;ffffffff811f1dac&gt;] SyS_writev+0x5c/0x100<br />&gt;  [&lt;ffffffff817e0249&gt;] tracesys_phase2+0xd4/0xd9<br /><br />Hmm. Maybe some oom issue, that we spent a long time before this<br />trying to free pages?<br /><br />                  Linus<br /><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
