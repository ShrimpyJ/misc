    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2006/10/31/230">First message in thread</a></li><li><a href="/lkml/2006/10/31/230">Mark Lord</a><ul><li class="origin"><a href="/lkml/2006/10/31/245">Linus Torvalds</a><ul><li><a href="/lkml/2006/10/31/245">Mark Lord</a></li><li><a href="/lkml/2006/11/6/131">Takashi Iwai</a></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Tue, 31 Oct 2006 09:53:35 -0800 (PST)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: 2.6.19-rc3-git7:  BUG: mutex warning sysfs_dir_open</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Tue, 31 Oct 2006, Mark Lord wrote:<br />&gt; <br />&gt; I found this in my syslog just now:<br />&gt; <br />&gt; kernel: BUG: warning at kernel/mutex.c:132/__mutex_lock_common()<br /><br />That's the "spin_lock_mutex()" debugging (kernel/mutex-debug.h), and it's <br />one of either<br /><br />	DEBUG_LOCKS_WARN_ON(in_interrupt());<br />or<br />	DEBUG_LOCKS_WARN_ON(l-&gt;magic != l);<br /><br />where the much more likely one is the "l-&gt;magic" one triggering, because <br />your bug that follows is:<br /><br />&gt; kernel: BUG: unable to handle kernel paging request at virtual address 6e726574<br /><br />64726574 is "tern", for whatever that's worth, and that EIP is in <br />"__list_add()", which comes from list_add_tail(), and so it looks like the <br />mutex "lock-&gt;lock_list" is also totally buggered (which would certainly <br />fit with the lock "magic" field being crud too).<br /><br />&gt; kernel: Call Trace:<br />&gt; kernel:  [&lt;c035d76e&gt;] __mutex_lock_slowpath+0x8e/0x260<br />&gt; kernel:  [&lt;c035d961&gt;] mutex_lock+0x21/0x30<br />&gt; kernel:  [&lt;c01a0286&gt;] sysfs_dir_open+0x26/0x60<br /><br />This would be<br /><br />	mutex_lock(&amp;dentry-&gt;d_inode-&gt;i_mutex);<br /><br />in sysfs_dir_open(), so you would seem to have an inode that is <br />overwritten by crud (or it could be a dentry with a bogus d_inode <br />pointer, of course).<br /><br />There's a ton of stuff with "tern" in it, mostly "Internal", so sadly even <br />the nice string pattern doesn't seem to be all that helpful.<br /><br />Is this somewhat reproducible? <br /><br />HOWEVER, google does find a clue. We've had reports of something somewhat <br />similar before: googling for "__mutex_lock_slowpath" and "sysfs_dir_open" <br />shows for example<br /><br />	<a href="https://lkml.org/lkml/2006/8/18/72">http://lkml.org/lkml/2006/8/18/72</a><br /><br />where the thread ended up first blaming sound, but then deciding that <br />maybe it was DRM-related. However, you don't seem to have any AGP or DRM <br />support at all, so maybe it really _is_ a sound problem.<br /><br />Mark - can you verify that you don't have any DRM support in your kernel?<br /><br />Frederic, Takashi, did that bug-report ever get resolved?<br /><br />		Linus<br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.kernel.org<br />More majordomo info at  <a href="http://vger.kernel.org/majordomo-info.html">http://vger.kernel.org/majordomo-info.html</a><br />Please read the FAQ at  <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
