    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/2017/8/14/37">First message in thread</a></li><li><a href="/lkml/2017/8/14/37">kernel test robot</a><ul><li class="origin"><a href="/lkml/2017/8/17/923">Linus Torvalds</a><ul><li><a href="/lkml/2017/8/17/923">Florian Fainelli</a></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Mon, 14 Aug 2017 11:04:30 -0700</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [lkp-robot] [net] 98cd1552ea: BUG:unable_to_handle_kernel</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">On Sun, Aug 13, 2017 at 11:10 PM, kernel test robot<br />&lt;xiaolong.ye&#64;intel.com&gt; wrote:<br />&gt; FYI, we noticed the following commit:<br />&gt;<br />&gt; commit: 98cd1552ea27e512c7e99e2aa76042a26e4fb25c ("net: dsa: Mock-up driver")<br />&gt; <a href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git">https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git</a> master<br />&gt;<br />&gt; in testcase: trinity<br />&gt; with following parameters:<br />&gt;<br />&gt;         runtime: 300s<br />&gt;<br />&gt; test-description: Trinity is a linux system call fuzz tester.<br />&gt; test-url: <a href="http://codemonkey.org.uk/projects/trinity/">http://codemonkey.org.uk/projects/trinity/</a><br />&gt;<br />&gt; on test machine: qemu-system-x86_64 -enable-kvm -cpu host -smp 2 -m 1G<br />&gt;<br />&gt; caused below changes (please refer to attached dmesg/kmsg for entire log/backtrace):<br />&gt;<br />&gt; +-----------------------------------------------------+------------+------------+<br />&gt; |                                                     | 772c3bdad1 | 98cd1552ea |<br />&gt; +-----------------------------------------------------+------------+------------+<br />&gt; | boot_successes                                      | 0          | 0          |<br />&gt; | boot_failures                                       | 30         | 30         |<br />&gt; | WARNING:at_arch/x86/mm/dump_pagetables.c:#note_page | 30         | 30         |<br />&gt; | invoked_oom-killer:gfp_mask=0x                      | 28         | 13         |<br />&gt; | Mem-Info                                            | 28         | 13         |<br />&gt; | Out_of_memory:Kill_process                          | 28         | 13         |<br />&gt; | BUG:unable_to_handle_kernel                         | 0          | 16         |<br />&gt; | Oops:#[##]                                          | 0          | 16         |<br />&gt; | Kernel_panic-not_syncing:Fatal_exception            | 0          | 16         |<br />&gt; +-----------------------------------------------------+------------+------------+<br />&gt;<br />&gt; [    9.603869] BUG: unable to handle kernel NULL pointer dereference at 00000000000001f0\<br /><br />The code disassembly is<br /><br />   0:   55                      push   %rbp<br />   1:   48 89 e5                mov    %rsp,%rbp<br />   4:   41 55                   push   %r13<br />   6:   41 54                   push   %r12<br />   8:   41 89 f4                mov    %esi,%r12d<br />   b:   53                      push   %rbx<br />   c:   48 8b 87 10 03 00 00    mov    0x310(%rdi),%rax<br />  13:   31 db                   xor    %ebx,%ebx<br />  15:*  4c 8b a8 f0 01 00 00    mov    0x1f0(%rax),%r13         &lt;--<br />trapping instruction<br /><br />which seems to be<br /><br />        struct dsa_switch_tree *dst = dev-&gt;dsa_ptr;<br />        struct dsa_port *cpu_dp = dsa_get_cpu_port(dst);<br /><br />where 'dst' is NULL (the "dsa_get_cpu_port() function is just an<br />inline that returns "dst-&gt;cpu_dp").<br /><br />So 'dev' is not NULL, but dev-&gt;dsa_ptr definitely is.<br /><br />                 Linus<br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
