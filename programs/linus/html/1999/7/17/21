    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/1999/7/9/133">First message in thread</a></li><li><a href="/lkml/1999/7/17/16">Linus Torvalds</a><ul><li><a href="/lkml/1999/7/17/19">(Rogier Wolff)</a><ul><li class="origin"><a href="/lkml/1999/7/17/71">Linus Torvalds</a><ul><li><a href="/lkml/1999/7/17/71"> allbery&#64;kf8nh ...</a><ul><li><a href="/lkml/1999/7/19/83">The Doctor What</a></li></ul></li></ul></li></ul></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js"></script><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">Sat, 17 Jul 1999 01:13:22 -0700 (PDT)</td></tr><tr><td class="lp">From</td><td class="rp" itemprop="author">Linus Torvalds &lt;&gt;</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: New kernel/resource.c</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody"><br /><br />On Sat, 17 Jul 1999, Rogier Wolff wrote:<br />&gt; <br />&gt; Reasons that I can come up with right now:<br />&gt; - It has an educational effect. (It tells people where their 3G kernel<br />&gt;   virtual addressing space went, it explains why you should use mem=960M<br />&gt;   instead of mem=1024M if you have 1G of RAM.)<br />&gt; - ioremap &amp; vmalloc are parcelling out a resource, that nicely fits the <br />&gt;   model. <br /><br />I certainly agree that the model fits very well.<br /><br />Whether it really is needed is another matter. VM isn't _that_ scarce,<br />although it might be a nice visualization tool for module loading etc.<br /><br />&gt; Not convinced? Oh well, at least you straightened me out....  ;-)<br /><br />I'd be more convinced if you could show (for example) that you can<br />actually simplify "vmalloc()" by using this to find empty holes. Or<br />something like that.<br /><br />Right now vmalloc() already does its own resource handling. That may be a<br />mistake in itself: we might be able to get rid of the vmalloc() resource<br />handling and rely entirely on the concept of a "virtual memory resource"<br />for this. If so, that would indeed be a major benefit, and would convince<br />me in a jiffy.<br /><br />But there may well be reasons why vmalloc() is better off doing the<br />resource management itself. I'm off to bed, I'll leave that to somebody<br />else to look into..<br /><br />If this were to be done, it would be something like this:<br /><br />	vm_resource   --+--   user space: 0-3GB<br />	0-4GB		|<br />			+--   kernel 1:1 mapping 3GB-3.2GB<br />			|	|<br />			|	+--   ISA legacy region<br />			|<br />			+--   vmalloc arena 3.3GB-3.9GB<br />			|	|<br />			|	+--   module1<br />			|	|<br />			|	+--   module2<br />			|<br />			+--   fixmap arena 3.9GB - 4GB<br />				|<br />				+--   io_apic<br />				|<br />				+--   local_apic<br /><br />where the "vmalloc" arena would be a sub-resource and have the actual<br />vmalloc'ed areas inside it (that shows the idea behind sub-resources: this<br />way we can use the general resource management functions to find empty<br />areas without having to worry about empty areas in some other location).<br /><br />I can certainly see the visualization as being fun and useful,<br /><br />			Linus<br /><br /><br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.rutgers.edu<br />Please read the FAQ at <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
