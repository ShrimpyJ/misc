    </div></td><td width="32">Â </td></tr><tr><td valign="top"><div class="es-jasper-simpleCalendar" baseurl="/lkml/"></div><div class="threadlist">Messages in this thread</div><ul class="threadlist"><li class="root"><a href="/lkml/1999/12/28/84">First message in thread</a></li><li><a href="/lkml/1999/12/28/84">Christoph Rohland</a><ul><li><a href="/lkml/1999/12/28/88">Alan Cox</a><ul><li><a href="/lkml/1999/12/28/90">Christoph Rohland</a></li></ul></li><li class="origin"><a href="/lkml/1999/12/29/81">(Linus Torvalds)</a><ul><li><a href="/lkml/1999/12/29/81">Richard Gooch</a><ul><li><a href="/lkml/1999/12/30/5">"Vikram"</a><ul><li><a href="/lkml/1999/12/30/12">David Ford</a></li></ul></li></ul></li></ul></li><li><a href="/lkml/1999/12/28/112">Christoph Rohland</a></li></ul></li></ul></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerl.gif" width="32" height="32" alt="/" /></td><td class="c" rowspan="2" valign="top" style="padding-top: 1em"><table><tr><td colspan="2"><!--BuySellAds Zone Code--><div id="bsap_1297613" class="bsarocks bsap_5aa49c00cc06c882289a1dd6a5e50b62"></div><!--End BuySellAds Zone Code--></td></tr><tr><td><table><tr><td class="lp">From</td><td class="rp" itemprop="author">(Linus Torvalds)</td></tr><tr><td class="lp">Subject</td><td class="rp" itemprop="name">Re: [PATCH] get rid of vm_private_data and win posix shm</td></tr><tr><td class="lp">Date</td><td class="rp" itemprop="datePublished">28 Dec 1999 11:14:34 -0800</td></tr></table></td><td><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></td></tr></table><pre itemprop="articleBody">In article &lt;qwwd7rrgeen.fsf&#64;sap.com&gt;,<br />Christoph Rohland  &lt;hans-christoph.rohland&#64;sap.com&gt; wrote:<br />&gt;<br />&gt;I implemented posix shm with its own namespace by extending filp_open<br />&gt;and do_unlink by an additional parameter for the root inode.<br /><br />Beautiful patch _except_ for this case. I'm really pleased with how well<br />the POSIX shm code seems to integrate into the FS and VM layers, and<br />that makes me happy.<br /><br />The one imbalance you added makes me cringe, though.  I think we should<br />just export it as a real filesystem, and mount it in a standard<br />location.  Nothing clever, just come up with a new location that is<br />fixed and acceptable to all, kind of like /proc is now. <br /><br />That has the added advantage that you can eventually write scripts with<br />perl etc to look at shared memory regions etc, without having to add new<br />magic system calls. <br /><br />So how about standardizing on a base path called "//posix/shm"? Right<br />now that is the same as "/posix/shm", but leave the double slash there<br />in the utilities and library routines, because maybe we'll end up using<br />the POSIX-approved "initial double slash is special" rule at some point<br />in the future.  So we can initially mount it as a regular mount-point,<br />and then in the future maybe extend the notion of '//'-paths to be more<br />of a "virtual filesystem" thing without breaking backwards<br />compatibility. <br /><br />And don't worry about making "readdir()" and friends work yet - a<br />minimalistic shm filesystem that only knows "lookup", "create" and<br />"unlink" is fine, with the nice finishing touches can be left for<br />later.. <br /><br />		Linus<br /><br />-<br />To unsubscribe from this list: send the line "unsubscribe linux-kernel" in<br />the body of a message to majordomo&#64;vger.rutgers.edu<br />Please read the FAQ at <a href="http://www.tux.org/lkml/">http://www.tux.org/lkml/</a><br /><br /></pre><div align="center"><div class="shariff" data-services="[&quot;reddit&quot;]" data-theme="grey" data-lang="en" data-backend-url="//shariff.lkml.org/index.php"></div></div></td><td width="32" rowspan="2" class="c" valign="top"><img src="/images/icornerr.gif" width="32" height="32" alt="\" /></td></tr><tr><td align="right" valign="bottom">
